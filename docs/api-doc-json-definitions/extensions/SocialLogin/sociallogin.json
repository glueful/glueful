{
  "openapi": "3.0.0",
  "info": {
    "title": "Social Login API",
    "description": "Authentication endpoints for social login providers",
    "version": "1.0.0"
  },
  "paths": {
    "/auth/social/google": {
      "get": {
        "summary": "Google OAuth Authentication",
        "description": "Initiates the OAuth flow with Google for user authentication",
        "tags": ["Social Authentication"],
        "responses": {
          "302": {
            "description": "Redirects to Google's OAuth authorization page"
          }
        }
      },
      "post": {
        "summary": "Google Native Authentication",
        "description": "Authenticates a user with a Google ID token from a native mobile app",
        "tags": ["Social Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["id_token"],
                "properties": {
                  "id_token": {
                    "type": "string",
                    "description": "ID token obtained from Google Sign-In SDK"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated with Google",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "description": "User profile information"
                    },
                    "tokens": {
                      "type": "object",
                      "properties": {
                        "access_token": {
                          "type": "string",
                          "description": "JWT access token"
                        },
                        "refresh_token": {
                          "type": "string",
                          "description": "JWT refresh token"
                        },
                        "expires_in": {
                          "type": "integer",
                          "description": "Token expiration time in seconds"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Missing ID token"
          },
          "401": {
            "description": "Failed to verify Google ID token"
          },
          "500": {
            "description": "Server error during authentication"
          }
        }
      }
    },
    "/auth/social/google/callback": {
      "get": {
        "summary": "Google OAuth Callback",
        "description": "Callback endpoint that processes the OAuth response from Google",
        "tags": ["Social Authentication"],
        "parameters": [
          {
            "name": "code",
            "in": "query",
            "description": "Authorization code from Google",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "state",
            "in": "query",
            "description": "State token for CSRF protection",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully authenticated with Google",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": {
                      "type": "string",
                      "description": "JWT access token"
                    },
                    "refresh_token": {
                      "type": "string",
                      "description": "JWT refresh token"
                    },
                    "expires_in": {
                      "type": "integer",
                      "description": "Token expiration time in seconds"
                    },
                    "user": {
                      "type": "object",
                      "description": "User profile information"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request or invalid parameters"
          },
          "401": {
            "description": "Authentication failed"
          }
        }
      }
    },
    "/auth/social/facebook": {
      "get": {
        "summary": "Facebook OAuth Authentication",
        "description": "Initiates the OAuth flow with Facebook for user authentication",
        "tags": ["Social Authentication"],
        "responses": {
          "302": {
            "description": "Redirects to Facebook's OAuth authorization page"
          }
        }
      },
      "post": {
        "summary": "Facebook Native Authentication",
        "description": "Authenticates a user with a Facebook access token from a native mobile app",
        "tags": ["Social Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["access_token"],
                "properties": {
                  "access_token": {
                    "type": "string",
                    "description": "Access token obtained from Facebook Login SDK"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated with Facebook",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "description": "User profile information"
                    },
                    "tokens": {
                      "type": "object",
                      "properties": {
                        "access_token": {
                          "type": "string",
                          "description": "JWT access token"
                        },
                        "refresh_token": {
                          "type": "string",
                          "description": "JWT refresh token"
                        },
                        "expires_in": {
                          "type": "integer",
                          "description": "Token expiration time in seconds"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Missing access token"
          },
          "401": {
            "description": "Failed to verify Facebook access token"
          },
          "500": {
            "description": "Server error during authentication"
          }
        }
      }
    },
    "/auth/social/facebook/callback": {
      "get": {
        "summary": "Facebook OAuth Callback",
        "description": "Callback endpoint that processes the OAuth response from Facebook",
        "tags": ["Social Authentication"],
        "parameters": [
          {
            "name": "code",
            "in": "query",
            "description": "Authorization code from Facebook",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "state",
            "in": "query",
            "description": "State token for CSRF protection",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully authenticated with Facebook",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": {
                      "type": "string",
                      "description": "JWT access token"
                    },
                    "refresh_token": {
                      "type": "string",
                      "description": "JWT refresh token"
                    },
                    "expires_in": {
                      "type": "integer",
                      "description": "Token expiration time in seconds"
                    },
                    "user": {
                      "type": "object",
                      "description": "User profile information"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request or invalid parameters"
          },
          "401": {
            "description": "Authentication failed"
          }
        }
      }
    },
    "/auth/social/github": {
      "get": {
        "summary": "GitHub OAuth Authentication",
        "description": "Initiates the OAuth flow with GitHub for user authentication",
        "tags": ["Social Authentication"],
        "responses": {
          "302": {
            "description": "Redirects to GitHub's OAuth authorization page"
          }
        }
      },
      "post": {
        "summary": "GitHub Native Authentication",
        "description": "Authenticates a user with a GitHub access token from a native mobile app",
        "tags": ["Social Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["access_token"],
                "properties": {
                  "access_token": {
                    "type": "string",
                    "description": "Access token obtained from GitHub OAuth"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated with GitHub",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "description": "User profile information"
                    },
                    "tokens": {
                      "type": "object",
                      "properties": {
                        "access_token": {
                          "type": "string",
                          "description": "JWT access token"
                        },
                        "refresh_token": {
                          "type": "string",
                          "description": "JWT refresh token"
                        },
                        "expires_in": {
                          "type": "integer",
                          "description": "Token expiration time in seconds"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Missing access token"
          },
          "401": {
            "description": "Failed to verify GitHub access token"
          },
          "500": {
            "description": "Server error during authentication"
          }
        }
      }
    },
    "/auth/social/github/callback": {
      "get": {
        "summary": "GitHub OAuth Callback",
        "description": "Callback endpoint that processes the OAuth response from GitHub",
        "tags": ["Social Authentication"],
        "parameters": [
          {
            "name": "code",
            "in": "query",
            "description": "Authorization code from GitHub",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "state",
            "in": "query",
            "description": "State token for CSRF protection",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully authenticated with GitHub",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": {
                      "type": "string",
                      "description": "JWT access token"
                    },
                    "refresh_token": {
                      "type": "string",
                      "description": "JWT refresh token"
                    },
                    "expires_in": {
                      "type": "integer",
                      "description": "Token expiration time in seconds"
                    },
                    "user": {
                      "type": "object",
                      "description": "User profile information"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request or invalid parameters"
          },
          "401": {
            "description": "Authentication failed"
          }
        }
      }
    },
    "/auth/social/apple": {
      "get": {
        "summary": "Apple OAuth Authentication",
        "description": "Initiates the OAuth flow with Apple for user authentication",
        "tags": ["Social Authentication"],
        "responses": {
          "302": {
            "description": "Redirects to Apple's OAuth authorization page"
          }
        }
      },
      "post": {
        "summary": "Apple Native Authentication",
        "description": "Authenticates a user with an Apple ID token from a native mobile app",
        "tags": ["Social Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["id_token"],
                "properties": {
                  "id_token": {
                    "type": "string",
                    "description": "ID token obtained from Sign in with Apple SDK"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated with Apple",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "description": "User profile information"
                    },
                    "tokens": {
                      "type": "object",
                      "properties": {
                        "access_token": {
                          "type": "string",
                          "description": "JWT access token"
                        },
                        "refresh_token": {
                          "type": "string",
                          "description": "JWT refresh token"
                        },
                        "expires_in": {
                          "type": "integer",
                          "description": "Token expiration time in seconds"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Missing ID token"
          },
          "401": {
            "description": "Failed to verify Apple ID token"
          },
          "500": {
            "description": "Server error during authentication"
          }
        }
      }
    },
    "/auth/social/apple/callback": {
      "post": {
        "summary": "Apple OAuth Callback",
        "description": "Callback endpoint that processes the OAuth response from Apple",
        "tags": ["Social Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "type": "object",
                "required": ["code", "state"],
                "properties": {
                  "code": {
                    "type": "string",
                    "description": "Authorization code from Apple"
                  },
                  "state": {
                    "type": "string",
                    "description": "State token for CSRF protection"
                  },
                  "user": {
                    "type": "string",
                    "description": "JSON string containing user information (only provided on first login)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated with Apple",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": {
                      "type": "string",
                      "description": "JWT access token"
                    },
                    "refresh_token": {
                      "type": "string",
                      "description": "JWT refresh token"
                    },
                    "expires_in": {
                      "type": "integer",
                      "description": "Token expiration time in seconds"
                    },
                    "user": {
                      "type": "object",
                      "description": "User profile information"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request or invalid parameters"
          },
          "401": {
            "description": "Authentication failed"
          }
        }
      }
    },
    "/user/social-accounts": {
      "get": {
        "summary": "Get Connected Social Accounts",
        "description": "Retrieve all social accounts connected to the authenticated user",
        "tags": ["Social Account Management"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved social accounts",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "success"
                    },
                    "message": {
                      "type": "string",
                      "example": "Social accounts retrieved successfully"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "uuid": {
                            "type": "string",
                            "description": "Unique identifier for the social account"
                          },
                          "provider": {
                            "type": "string",
                            "description": "Social provider name (google, facebook, github, etc.)"
                          },
                          "created_at": {
                            "type": "string",
                            "format": "date-time",
                            "description": "When the account was connected"
                          },
                          "updated_at": {
                            "type": "string",
                            "format": "date-time",
                            "description": "When the account was last updated"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - User is not authenticated"
          },
          "500": {
            "description": "Server error retrieving social accounts"
          }
        }
      }
    },
    "/user/social-accounts/{uuid}": {
      "delete": {
        "summary": "Unlink Social Account",
        "description": "Remove a social provider connection from the authenticated user",
        "tags": ["Social Account Management"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "uuid",
            "in": "path",
            "description": "UUID of the social account to unlink",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully unlinked social account",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "success"
                    },
                    "message": {
                      "type": "string",
                      "example": "Social account unlinked successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - User is not authenticated"
          },
          "404": {
            "description": "Social account not found or not owned by user"
          },
          "500": {
            "description": "Server error unlinking social account"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "tags": [
    {
      "name": "Social Authentication",
      "description": "Endpoints for authenticating users via OAuth providers"
    },
    {
      "name": "Social Account Management",
      "description": "Endpoints for managing connected social accounts"
    }
  ]
}