import{aP as E,d as O,bw as A,bx as S,f as g,by as h,bb as b,bz as y,bA as M,bo as z,bB as D,bC as T,w as W,bD as B,E as L,bE as _,l as $,A as x,$ as I}from"./index-CRsdYi2H.js";function K(n={}){const{inheritAttrs:l=!0}=n,u=E(),a=O({setup(r,{slots:i}){return()=>{u.value=i.default}}}),c=O({inheritAttrs:l,props:n.props,setup(r,{attrs:i,slots:t}){return()=>{var e;u.value;const o=(e=u.value)==null?void 0:e.call(u,{...n.props==null?N(i):r,$slots:t});return l&&(o==null?void 0:o.length)===1?o[0]:o}}});return A({define:a,reuse:c},[a,c])}function N(n){const l={};for(const u in n)l[S(u)]=n[u];return l}const w=D?window:void 0;function R(n){var l;const u=b(n);return(l=u==null?void 0:u.$el)!=null?l:u}function C(...n){const l=[],u=()=>{l.forEach(t=>t()),l.length=0},a=(t,e,o,s)=>(t.addEventListener(e,o,s),()=>t.removeEventListener(e,o,s)),c=g(()=>{const t=h(b(n[0])).filter(e=>e!=null);return t.every(e=>typeof e!="string")?t:void 0}),r=y(()=>{var t,e;return[(e=(t=c.value)==null?void 0:t.map(o=>R(o)))!=null?e:[w].filter(o=>o!=null),h(b(c.value?n[1]:n[0])),h($(c.value?n[2]:n[1])),b(c.value?n[3]:n[2])]},([t,e,o,s])=>{if(u(),!(t!=null&&t.length)||!(e!=null&&e.length)||!(o!=null&&o.length))return;const f=_(s)?{...s}:s;l.push(...t.flatMap(d=>e.flatMap(v=>o.map(p=>a(d,v,p,f)))))},{flush:"post"}),i=()=>{r(),u()};return M(u),i}function P(){const n=E(!1),l=I();return l&&x(()=>{n.value=!0},l),n}function j(n){const l=P();return g(()=>(l.value,!!n()))}function k(n,l,u={}){const{window:a=w,...c}=u;let r;const i=j(()=>a&&"MutationObserver"in a),t=()=>{r&&(r.disconnect(),r=void 0)},e=g(()=>{const d=b(n),v=h(d).map(R).filter(B);return new Set(v)}),o=L(()=>e.value,d=>{t(),i.value&&d.size&&(r=new MutationObserver(l),d.forEach(v=>r.observe(v,c)))},{immediate:!0,flush:"post"}),s=()=>r==null?void 0:r.takeRecords(),f=()=>{o(),t()};return M(f),{isSupported:i,stop:f,takeRecords:s}}function F(n,l,u={}){const{window:a=w,document:c=a==null?void 0:a.document,flush:r="sync"}=u;if(!a||!c)return T;let i;const t=s=>{i==null||i(),i=s},e=W(()=>{const s=R(n);if(s){const{stop:f}=k(c,d=>{d.map(p=>[...p.removedNodes]).flat().some(p=>p===s||p.contains(s))&&l(d)},{window:a,childList:!0,subtree:!0});t(f)}},{flush:r}),o=()=>{e(),t()};return M(o),o}function U(n={}){var l;const{window:u=w,deep:a=!0,triggerOnRemoval:c=!1}=n,r=(l=n.document)!=null?l:u==null?void 0:u.document,i=()=>{var o;let s=r==null?void 0:r.activeElement;if(a)for(;s!=null&&s.shadowRoot;)s=(o=s==null?void 0:s.shadowRoot)==null?void 0:o.activeElement;return s},t=E(),e=()=>{t.value=i()};if(u){const o={capture:!0,passive:!0};C(u,"blur",s=>{s.relatedTarget===null&&e()},o),C(u,"focus",e,o)}return c&&F(t,e,{document:r}),e(),t}const m=new Map;function V(n){const l=z();function u(t){var e;const o=m.get(n)||new Set;o.add(t),m.set(n,o);const s=()=>c(t);return(e=l==null?void 0:l.cleanups)==null||e.push(s),s}function a(t){function e(...o){c(e),t(...o)}return u(e)}function c(t){const e=m.get(n);e&&(e.delete(t),e.size||r())}function r(){m.delete(n)}function i(t,e){var o;(o=m.get(n))==null||o.forEach(s=>s(t,e))}return{on:u,once:a,off:c,emit:i,reset:r}}export{U as a,C as b,K as c,V as u};
