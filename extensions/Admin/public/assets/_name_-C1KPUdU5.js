import{_ as Pt}from"./Modal-B3tkIP1b.js";import{_ as dt}from"./Checkbox-D3Mbv2b_.js";import{d as ye,a as Be,i as q,o as s,j as b,k as m,l,P as Oe,p as Se,m as ve,f as ee,aO as ht,c as Je,t as ct,b as It,a_ as pt,r as A,u as et,E as Fe,a2 as We,a$ as yt,z as W,ax as da,A as Pe,$ as ua,aY as Ht,e as ca,n as tt,Q as Le,R as pa,a1 as xt,_ as ma,S as St,G as mt,q as Vt,v as Gt,N as de,b0 as fa,b1 as va,b2 as Yt,O as G,H as Et,U as ga,M as At,a8 as Rt,K as Wt,a9 as ba,at as ya,a3 as Jt,a4 as ha,a5 as Ze,ac as wt,b3 as Qt,aW as _a,aX as xa,a7 as Xt,a6 as _t,aj as Ca,am as Ke,b4 as Ot,B as I,X as ne,Z as a,al as qe,ak as zt,F as _e,ai as $e,b5 as wa,aw as ka,ah as Qe,aa as Sa,b6 as $a,au as Re,aG as Ia,af as Va}from"./index-CRsdYi2H.js";import{c as Ea}from"./index-DB23InID.js";import{_ as ut}from"./Input-BHZUZoYe.js";import{u as lt}from"./DashboardSidebarToggle.vue_vue_type_script_setup_true_lang-DsgFYwLG.js";import{c as Ta,u as Ua,a as Fa,b as Da,_ as La}from"./useFocusGuards-Du7C4AgP.js";import{u as Tt}from"./useDirection-k4nYEygm.js";import{g as Aa,_ as Ra}from"./RovingFocusGroup-BBmQv82t.js";import{u as Ut}from"./useFormControl-NdRzoGR7.js";import{_ as Ft}from"./VisuallyHiddenInput-C3uj9iqK.js";import{u as Oa,a as za,_ as Na}from"./useBodyScrollLock-B9_nYFZW.js";import{_ as Zt}from"./Table-DpZO3-jS.js";import{_ as st}from"./FormField-B_wRBRDF.js";import{u as at}from"./useToastNotification-BcotWXPZ.js";import{u as He}from"./dbTables-D08AeIB0.js";import{d as ft,c as Ba,f as Nt,u as Ma,_ as qa,n as bt,a as ja,b as kt,r as Bt,g as Mt,e as Ka}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-MhcffMh4.js";import{_ as vt}from"./Slideover-Bz-TrAjm.js";import{_ as ea}from"./Textarea-Byvyu8gK.js";import{_ as Pa}from"./Switch-DxUzj61U.js";import{_ as Ha}from"./Tabs-Rxng3JkH.js";import{_ as $t}from"./Select-C57MTzpF.js";import{_ as Ga}from"./Card-kWGpn_Iq.js";import{_ as Ya}from"./Pagination-CSR3ezQk.js";import{_ as ta}from"./DropdownMenu-COhFxxyy.js";import{_ as qt}from"./Label-PeVd4_oV.js";import{_ as Wa}from"./RovingFocusItem-h949RZXv.js";import{_ as Ja}from"./TableDataSkeleton.vue_vue_type_script_setup_true_lang-CYjHPP2B.js";import{_ as Qa}from"./DashboardNavbar.vue_vue_type_script_setup_true_lang-BjOyJKj1.js";import"./DialogPortal-CiOOOcvu.js";import"./isValueEqualOrExist-BBQ1z4Lv.js";import"./index-88opOQSr.js";import"./index-BkXOrXe_.js";import"./useArrowNavigation-B5rxJs06.js";import"./CollapsibleTrigger-DPh81dER.js";import"./TabsTrigger-BPe8l6ke.js";import"./Skeleton-D_IVtAoi.js";function Xa(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}const Za=ye({__name:"ComboboxAnchor",props:{reference:{},asChild:{type:Boolean},as:{}},setup(E){const{forwardRef:R}=Be();return(e,t)=>(s(),q(l(Ta),{"as-child":"",reference:e.reference},{default:b(()=>[m(l(Oe),Se({ref:l(R),"as-child":e.asChild,as:e.as},e.$attrs),{default:b(()=>[ve(e.$slots,"default")]),_:3},16,["as-child","as"])]),_:3},8,["reference"]))}});function aa(E){const R=ee(()=>l(E)),e=ee(()=>new Intl.Collator("en",{usage:"search",...R.value}));return{startsWith:(c,p)=>p.length===0?!0:(c=c.normalize("NFC"),p=p.normalize("NFC"),e.value.compare(c.slice(0,p.length),p)===0),endsWith:(c,p)=>p.length===0?!0:(c=c.normalize("NFC"),p=p.normalize("NFC"),e.value.compare(c.slice(-p.length),p)===0),contains:(c,p)=>{if(p.length===0)return!0;c=c.normalize("NFC"),p=p.normalize("NFC");let x=0;const f=p.length;for(;x+f<=c.length;x++){const D=c.slice(x,x+f);if(e.value.compare(p,D)===0)return!0}return!1}}}function el(E,R,e){return E===void 0?!1:Array.isArray(E)?E.some(t=>rt(t,R,e)):rt(E,R,e)}function rt(E,R,e){return E===void 0||R===void 0?!1:typeof E=="string"?E===R:typeof e=="function"?e(E,R):typeof e=="string"?(E==null?void 0:E[e])===(R==null?void 0:R[e]):ht(E,R)}function tl(E,R,e){const t=E.findIndex(p=>ht(p,R)),d=E.findIndex(p=>ht(p,e));if(t===-1||d===-1)return[];const[g,c]=[t,d].sort((p,x)=>p-x);return E.slice(g,c+1)}const[Ct,al]=Je("ListboxRoot"),ll=ye({__name:"ListboxRoot",props:{modelValue:{},defaultValue:{},multiple:{type:Boolean},orientation:{default:"vertical"},dir:{},disabled:{type:Boolean},selectionBehavior:{default:"toggle"},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(E,{expose:R,emit:e}){const t=E,d=e,{multiple:g,highlightOnHover:c,orientation:p,disabled:x,selectionBehavior:f,dir:D}=ct(t),{getItems:k}=It({isProvider:!0}),{handleTypeaheadSearch:u}=Ua(),{primitiveElement:L,currentElement:O}=pt(),V=Xa(),N=Tt(D),Z=Ut(O),te=A(),h=A(!1),M=A(!0),y=et(t,"modelValue",d,{defaultValue:t.defaultValue??(g.value?[]:void 0),passive:t.modelValue===void 0,deep:!0});function U(Q){if(h.value=!0,t.multiple){const ce=Array.isArray(y.value)?[...y.value]:[],me=ce.findIndex(we=>rt(we,Q,t.by));t.selectionBehavior==="toggle"?(me===-1?ce.push(Q):ce.splice(me,1),y.value=ce):(y.value=[Q],te.value=Q)}else t.selectionBehavior==="toggle"&&rt(y.value,Q,t.by)?y.value=void 0:y.value=Q;setTimeout(()=>{h.value=!1},1)}const P=A(null),fe=A(null),ae=A(!1),z=A(!1),J=yt(),re=yt(),ge=yt();function C(){return k().map(Q=>Q.ref).filter(Q=>Q.dataset.disabled!=="")}function i(Q,ce=!0){if(!Q)return;P.value=Q,M.value&&P.value.focus(),ce&&P.value.scrollIntoView({block:"nearest"});const me=k().find(we=>we.ref===Q);d("highlight",me)}function o(Q){if(ae.value)ge.trigger(Q);else{const ce=k().find(me=>rt(me.value,Q,t.by));ce&&(P.value=ce.ref,i(ce.ref))}}function r(Q){P.value&&P.value.isConnected&&(Q.preventDefault(),Q.stopPropagation(),z.value||P.value.click())}function T(Q){if(M.value){if(h.value=!0,ae.value)re.trigger(Q);else{const ce=Q.altKey||Q.ctrlKey||Q.metaKey;if(ce&&Q.key==="a"&&g.value){const me=k(),we=me.map(Ie=>Ie.value);y.value=[...we],Q.preventDefault(),i(me[me.length-1].ref)}else if(!ce){const me=u(Q.key,k());me&&i(me)}}setTimeout(()=>{h.value=!1},1)}}function S(){z.value=!0}function B(){requestAnimationFrame(()=>{z.value=!1})}function H(){We(()=>{const Q=new KeyboardEvent("keydown",{key:"PageUp"});he(Q)})}function le(Q){const ce=P.value;ce!=null&&ce.isConnected&&(fe.value=ce),P.value=null,d("leave",Q)}function ie(Q){var me,we;const ce=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((me=Q.currentTarget)==null||me.dispatchEvent(ce),d("entryFocus",ce),!ce.defaultPrevented)if(fe.value)i(fe.value);else{const Ie=(we=C())==null?void 0:we[0];i(Ie)}}function he(Q){const ce=Aa(Q,p.value,N.value);if(!ce)return;let me=C();if(P.value){if(ce==="last")me.reverse();else if(ce==="prev"||ce==="next"){ce==="prev"&&me.reverse();const we=me.indexOf(P.value);me=me.slice(we+1)}ze(Q,me[0])}if(me.length){const we=!P.value&&ce==="prev"?me.length-1:0;i(me[we])}if(ae.value)return re.trigger(Q)}function ze(Q,ce){var we;if(!(ae.value||t.selectionBehavior!=="replace"||!g.value||!Array.isArray(y.value)||(Q.altKey||Q.ctrlKey||Q.metaKey)&&!Q.shiftKey)&&Q.shiftKey){const Ie=k().filter(Y=>Y.ref.dataset.disabled!=="");let K=(we=Ie.find(Y=>Y.ref===ce))==null?void 0:we.value;if(Q.key===V.END?K=Ie[Ie.length-1].value:Q.key===V.HOME&&(K=Ie[0].value),!K||!te.value)return;const _=tl(Ie.map(Y=>Y.value),te.value,K);y.value=_}}async function Me(Q){if(await We(),ae.value)J.trigger(Q);else{const ce=C(),me=ce.find(we=>we.dataset.state==="checked");me?i(me):ce.length&&i(ce[0])}}return Fe(y,()=>{h.value||We(()=>{Me()})},{immediate:!0,deep:!0}),R({highlightedElement:P,highlightItem:o,highlightFirstItem:H,highlightSelected:Me,getItems:k}),al({modelValue:y,onValueChange:U,multiple:g,orientation:p,dir:N,disabled:x,highlightOnHover:c,highlightedElement:P,isVirtual:ae,virtualFocusHook:J,virtualKeydownHook:re,virtualHighlightHook:ge,by:t.by,firstValue:te,selectionBehavior:f,focusable:M,onLeave:le,onEnter:ie,changeHighlight:i,onKeydownEnter:r,onKeydownNavigation:he,onKeydownTypeAhead:T,onCompositionStart:S,onCompositionEnd:B,highlightFirstItem:H}),(Q,ce)=>(s(),q(l(Oe),{ref_key:"primitiveElement",ref:L,as:Q.as,"as-child":Q.asChild,dir:l(N),"data-disabled":l(x)?"":void 0,onPointerleave:le,onFocusout:ce[0]||(ce[0]=async me=>{const we=me.relatedTarget||me.target;await We(),P.value&&l(O)&&!l(O).contains(we)&&le(me)})},{default:b(()=>[ve(Q.$slots,"default",{modelValue:l(y)}),l(Z)&&Q.name?(s(),q(l(Ft),{key:0,name:Q.name,value:l(y),disabled:l(x),required:Q.required},null,8,["name","value","disabled","required"])):W("",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),[Xe,sl]=Je("ComboboxRoot"),nl=ye({__name:"ComboboxRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean},resetSearchTermOnBlur:{type:Boolean,default:!0},resetSearchTermOnSelect:{type:Boolean,default:!0},ignoreFilter:{type:Boolean},modelValue:{},defaultValue:{},multiple:{type:Boolean},dir:{},disabled:{type:Boolean},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","update:open"],setup(E,{expose:R,emit:e}){var re,ge,C;const t=E,d=e,{primitiveElement:g,currentElement:c}=pt(),{multiple:p,disabled:x,ignoreFilter:f,resetSearchTermOnSelect:D,dir:k}=ct(t),u=Tt(k),L=et(t,"modelValue",d,{defaultValue:t.defaultValue??(p.value?[]:void 0),passive:t.modelValue===void 0,deep:!0}),O=et(t,"open",d,{defaultValue:t.defaultOpen,passive:t.open===void 0});async function V(i){var o,r;O.value=i,ae.search="",i?(await We(),(o=g.value)==null||o.highlightSelected(),Z.value=!0):Z.value=!1,(r=h.value)==null||r.focus(),setTimeout(()=>{!i&&t.resetSearchTermOnBlur&&N.trigger()},1)}const N=yt(),Z=A(!1),te=A(!1),h=A(),M=A(),y=ee(()=>{var i;return((i=g.value)==null?void 0:i.highlightedElement)??void 0}),U=A(new Map),P=A(new Map),{contains:fe}=aa({sensitivity:"base"}),ae=da({search:"",filtered:{count:0,items:new Map,groups:new Set}});function z(){if(!ae.search||t.ignoreFilter||te.value){ae.filtered.count=U.value.size;return}ae.filtered.groups=new Set;let i=0;for(const[o,r]of U.value){const T=fe(r,ae.search);ae.filtered.items.set(o,T?1:0),T&&i++}for(const[o,r]of P.value)for(const T of r)if(ae.filtered.items.get(T)>0){ae.filtered.groups.add(o);break}ae.filtered.count=i}Fe([()=>ae.search,()=>U.value.size],()=>{z()},{immediate:!0}),Fe(()=>O.value,()=>{We(()=>{O.value&&z()})},{flush:"post"});const J=ua();return Pe(()=>{var i,o,r;J!=null&&J.exposed&&(J.exposed.highlightItem=(i=g.value)==null?void 0:i.highlightItem,J.exposed.highlightFirstItem=(o=g.value)==null?void 0:o.highlightFirstItem,J.exposed.highlightSelected=(r=g.value)==null?void 0:r.highlightSelected)}),R({filtered:ee(()=>ae.filtered),highlightedElement:y,highlightItem:(re=g.value)==null?void 0:re.highlightItem,highlightFirstItem:(ge=g.value)==null?void 0:ge.highlightFirstItem,highlightSelected:(C=g.value)==null?void 0:C.highlightSelected}),sl({modelValue:L,multiple:p,disabled:x,open:O,onOpenChange:V,contentId:"",isUserInputted:Z,isVirtual:te,inputElement:h,highlightedElement:y,onInputElementChange:i=>h.value=i,triggerElement:M,onTriggerElementChange:i=>M.value=i,parentElement:c,resetSearchTermOnSelect:D,onResetSearchTerm:N.on,allItems:U,allGroups:P,filterState:ae,ignoreFilter:f}),(i,o)=>(s(),q(l(Fa),null,{default:b(()=>[m(l(ll),Se({ref_key:"primitiveElement",ref:g},i.$attrs,{modelValue:l(L),"onUpdate:modelValue":o[0]||(o[0]=r=>Ht(L)?L.value=r:null),style:{pointerEvents:l(O)?"auto":void 0},as:i.as,"as-child":i.asChild,dir:l(u),multiple:l(p),name:i.name,required:i.required,disabled:l(x),"highlight-on-hover":!0,by:t.by,onHighlight:o[1]||(o[1]=r=>d("highlight",r))}),{default:b(()=>[ve(i.$slots,"default",{open:l(O),modelValue:l(L)})]),_:3},16,["modelValue","style","as","as-child","dir","multiple","name","required","disabled","by"])]),_:3}))}}),ol=ye({__name:"ListboxContent",props:{asChild:{type:Boolean},as:{}},setup(E){const{CollectionSlot:R}=It(),e=Ct(),t=ca(!1,10);return(d,g)=>(s(),q(l(R),null,{default:b(()=>[m(l(Oe),{role:"listbox",as:d.as,"as-child":d.asChild,tabindex:l(e).focusable.value?l(e).highlightedElement.value?"-1":"0":void 0,"aria-orientation":l(e).orientation.value,"aria-multiselectable":!!l(e).multiple.value,"data-orientation":l(e).orientation.value,onMousedown:g[0]||(g[0]=Le(c=>t.value=!0,["left"])),onFocus:g[1]||(g[1]=c=>{l(t)||l(e).onEnter(c)}),onKeydown:[g[2]||(g[2]=tt(Le(c=>{l(e).focusable.value&&l(e).onKeydownNavigation(c)},["prevent"]),["down","up","left","right","home","end"])),tt(l(e).onKeydownEnter,["enter"]),l(e).onKeydownTypeAhead]},{default:b(()=>[ve(d.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),[il,rl]=Je("ComboboxContent"),dl=ye({__name:"ComboboxContentImpl",props:{position:{default:"inline"},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(E,{emit:R}){const e=E,t=R,{position:d}=ct(e),g=Xe(),{forwardRef:c,currentElement:p}=Be();Oa(e.bodyLock),za(g.parentElement);const x=ee(()=>e.position==="popper"?e:{}),f=pa(x.value),D={boxSizing:"border-box","--reka-combobox-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-combobox-content-available-width":"var(--reka-popper-available-width)","--reka-combobox-content-available-height":"var(--reka-popper-available-height)","--reka-combobox-trigger-width":"var(--reka-popper-anchor-width)","--reka-combobox-trigger-height":"var(--reka-popper-anchor-height)"};rl({position:d});const k=A(!1);return Pe(()=>{g.inputElement.value&&(k.value=p.value.contains(g.inputElement.value),k.value&&g.inputElement.value.focus())}),xt(()=>{var u;k.value&&((u=g.triggerElement.value)==null||u.focus())}),(u,L)=>(s(),q(l(ol),{"as-child":""},{default:b(()=>[m(l(ma),{"as-child":"","disable-outside-pointer-events":u.disableOutsidePointerEvents,onDismiss:L[0]||(L[0]=O=>l(g).onOpenChange(!1)),onFocusOutside:L[1]||(L[1]=O=>{var V;(V=l(g).parentElement.value)!=null&&V.contains(O.target)&&O.preventDefault(),t("focusOutside",O)}),onInteractOutside:L[2]||(L[2]=O=>t("interactOutside",O)),onEscapeKeyDown:L[3]||(L[3]=O=>t("escapeKeyDown",O)),onPointerDownOutside:L[4]||(L[4]=O=>{var V;(V=l(g).parentElement.value)!=null&&V.contains(O.target)&&O.preventDefault(),t("pointerDownOutside",O)})},{default:b(()=>[(s(),q(St(l(d)==="popper"?l(Da):l(Oe)),Se({...u.$attrs,...l(f)},{id:l(g).contentId,ref:l(c),"data-state":l(g).open.value?"open":"closed",style:{display:"flex",flexDirection:"column",outline:"none",...l(d)==="popper"?D:{}}}),{default:b(()=>[ve(u.$slots,"default")]),_:3},16,["id","data-state","style"]))]),_:3},8,["disable-outside-pointer-events"])]),_:3}))}}),ul=ye({__name:"ComboboxArrow",props:{width:{default:10},height:{default:5},rounded:{type:Boolean},asChild:{type:Boolean},as:{default:"svg"}},setup(E){const R=E,e=Xe(),t=il();return Be(),(d,g)=>l(e).open.value&&l(t).position.value==="popper"?(s(),q(l(La),mt(Se({key:0},R)),{default:b(()=>[ve(d.$slots,"default")]),_:3},16)):W("",!0)}}),cl=ye({__name:"ComboboxContent",props:{forceMount:{type:Boolean},position:{},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(E,{emit:R}){const d=Vt(E,R),{forwardRef:g}=Be(),c=Xe();return c.contentId||(c.contentId=lt(void 0,"reka-combobox-content")),(p,x)=>(s(),q(l(Gt),{present:p.forceMount||l(c).open.value},{default:b(()=>[m(dl,Se({...l(d),...p.$attrs},{ref:l(g)}),{default:b(()=>[ve(p.$slots,"default")]),_:3},16)]),_:3},8,["present"]))}}),pl=ye({__name:"ComboboxEmpty",props:{asChild:{type:Boolean},as:{}},setup(E){const R=E,e=Xe(),t=ee(()=>e.ignoreFilter.value?e.allItems.value.size===0:!!e.filterState.search&&e.filterState.filtered.count===0);return(d,g)=>t.value?(s(),q(l(Oe),mt(Se({key:0},R)),{default:b(()=>[ve(d.$slots,"default",{},()=>[g[0]||(g[0]=de("No options"))])]),_:3},16)):W("",!0)}}),[rr,ml]=Je("ListboxGroup"),fl=ye({__name:"ListboxGroup",props:{asChild:{type:Boolean},as:{}},setup(E){const R=E,e=lt(void 0,"reka-listbox-group");return ml({id:e}),(t,d)=>(s(),q(l(Oe),Se({role:"group"},R,{"aria-labelledby":l(e)}),{default:b(()=>[ve(t.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),[la,vl]=Je("ComboboxGroup"),jt=ye({__name:"ComboboxGroup",props:{asChild:{type:Boolean},as:{}},setup(E){const R=E,e=lt(void 0,"reka-combobox-group"),t=Xe(),d=ee(()=>t.ignoreFilter.value?!0:t.filterState.search?t.filterState.filtered.groups.has(e):!0),g=vl({id:e,labelId:""});return Pe(()=>{t.allGroups.value.has(e)||t.allGroups.value.set(e,new Set)}),xt(()=>{t.allGroups.value.delete(e)}),(c,p)=>(s(),q(l(fl),Se({id:l(e),"aria-labelledby":l(g).labelId},R,{hidden:d.value?void 0:!0}),{default:b(()=>[ve(c.$slots,"default")]),_:3},16,["id","aria-labelledby","hidden"]))}}),gl=ye({__name:"ListboxFilter",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},emits:["update:modelValue"],setup(E,{emit:R}){const e=E,d=et(e,"modelValue",R,{defaultValue:"",passive:e.modelValue===void 0}),g=Ct(),{primitiveElement:c,currentElement:p}=pt(),x=ee(()=>e.disabled||g.disabled.value||!1),f=A();return fa(()=>{var D;return f.value=(D=g.highlightedElement.value)==null?void 0:D.id}),Pe(()=>{g.focusable.value=!1,setTimeout(()=>{var D;e.autoFocus&&((D=p.value)==null||D.focus())},1)}),xt(()=>{g.focusable.value=!0}),(D,k)=>(s(),q(l(Oe),{ref_key:"primitiveElement",ref:c,as:D.as,"as-child":D.asChild,value:l(d),disabled:x.value?"":void 0,"data-disabled":x.value?"":void 0,"aria-disabled":x.value??void 0,"aria-activedescendant":f.value,type:"text",onKeydown:[tt(Le(l(g).onKeydownNavigation,["prevent"]),["down","up","home","end"]),tt(l(g).onKeydownEnter,["enter"])],onInput:k[0]||(k[0]=u=>{d.value=u.target.value,l(g).highlightFirstItem(u)}),onCompositionstart:l(g).onCompositionStart,onCompositionend:l(g).onCompositionEnd},{default:b(()=>[ve(D.$slots,"default",{modelValue:l(d)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),bl=ye({__name:"ComboboxInput",props:{displayValue:{},modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},emits:["update:modelValue"],setup(E,{emit:R}){const e=E,t=R,d=Xe(),g=Ct(),{primitiveElement:c,currentElement:p}=pt(),x=et(e,"modelValue",t,{passive:e.modelValue===void 0});Pe(()=>{p.value&&d.onInputElementChange(p.value)});function f(u){d.open.value||d.onOpenChange(!0)}function D(u){const L=u.target;d.open.value?d.filterState.search=L.value:(d.onOpenChange(!0),We(()=>{L.value&&(d.filterState.search=L.value,g.highlightFirstItem(u))}))}function k(){const u=d.modelValue.value;e.displayValue?x.value=e.displayValue(u):!d.multiple.value&&u&&!Array.isArray(u)&&typeof u!="object"?x.value=u.toString():x.value="",We(()=>{x.value=x.value})}return d.onResetSearchTerm(()=>{k()}),Fe(d.modelValue,async()=>{!d.isUserInputted.value&&d.resetSearchTermOnSelect.value&&k()},{immediate:!0,deep:!0}),Fe(()=>e.modelValue,()=>{e.modelValue!==void 0&&(d.filterState.search=e.modelValue)}),(u,L)=>(s(),q(l(gl),{ref_key:"primitiveElement",ref:c,modelValue:l(x),"onUpdate:modelValue":L[0]||(L[0]=O=>Ht(x)?x.value=O:null),as:u.as,"as-child":u.asChild,"auto-focus":u.autoFocus,"aria-expanded":l(d).open.value,"aria-controls":l(d).contentId,"aria-autocomplete":"list",role:"combobox",autocomplete:"false",onInput:D,onKeydown:tt(Le(f,["prevent"]),["down","up"])},{default:b(()=>[ve(u.$slots,"default")]),_:3},8,["modelValue","as","as-child","auto-focus","aria-expanded","aria-controls","onKeydown"]))}}),yl="listbox.select",[hl,_l]=Je("ListboxItem"),xl=ye({__name:"ListboxItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},emits:["select"],setup(E,{emit:R}){const e=E,t=R,d=lt(void 0,"reka-listbox-item"),{CollectionItem:g}=It(),{forwardRef:c,currentElement:p}=Be(),x=Ct(),f=ee(()=>p.value===x.highlightedElement.value),D=ee(()=>el(x.modelValue.value,e.value,x.by)),k=ee(()=>x.disabled.value||e.disabled);async function u(O){t("select",O),!(O!=null&&O.defaultPrevented)&&!k.value&&O&&(x.onValueChange(e.value),x.changeHighlight(p.value))}function L(O){const V={originalEvent:O,value:e.value};Yt(yl,u,V)}return _l({isSelected:D}),(O,V)=>(s(),q(l(g),{value:O.value},{default:b(()=>[va([f.value,D.value],()=>m(l(Oe),Se({id:l(d)},O.$attrs,{ref:l(c),role:"option",tabindex:l(x).focusable.value?f.value?"0":"-1":-1,"aria-selected":D.value,as:O.as,"as-child":O.asChild,disabled:k.value?"":void 0,"data-disabled":k.value?"":void 0,"data-highlighted":f.value?"":void 0,"data-state":D.value?"checked":"unchecked",onClick:L,onKeydown:tt(Le(L,["prevent"]),["space"]),onPointermove:V[0]||(V[0]=N=>{l(x).highlightedElement.value!==l(p)&&(l(x).highlightOnHover.value?l(x).changeHighlight(l(p),!1):l(x).focusable.value||l(x).changeHighlight(l(p),!1))})}),{default:b(()=>[ve(O.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),V,1)]),_:3},8,["value"]))}}),Kt=ye({__name:"ComboboxItem",props:{textValue:{},value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["select"],setup(E,{emit:R}){const e=E,t=R,d=lt(void 0,"reka-combobox-item"),g=Xe(),c=la(null),{primitiveElement:p,currentElement:x}=pt();if(e.value==="")throw new Error("A <ComboboxItem /> must have a value prop that is not an empty string. This is because the Combobox value can be set to an empty string to clear the selection and show the placeholder.");const f=ee(()=>{if(g.isVirtual.value||g.ignoreFilter.value||!g.filterState.search)return!0;{const D=g.filterState.filtered.items.get(d);return D===void 0?!0:D>0}});return Pe(()=>{var k;g.allItems.value.set(d,e.textValue||x.value.textContent||x.value.innerText);const D=c==null?void 0:c.id;D&&(g.allGroups.value.has(D)?(k=g.allGroups.value.get(D))==null||k.add(d):g.allGroups.value.set(D,new Set([d])))}),xt(()=>{g.allItems.value.delete(d)}),(D,k)=>f.value?(s(),q(l(xl),Se({key:0},e,{id:l(d),ref_key:"primitiveElement",ref:p,disabled:l(g).disabled.value||D.disabled,onSelect:k[0]||(k[0]=u=>{t("select",u),!u.defaultPrevented&&!l(g).multiple.value&&!D.disabled&&!l(g).disabled.value&&(u.preventDefault(),l(g).onOpenChange(!1),l(g).modelValue.value=e.value)})}),{default:b(()=>[ve(D.$slots,"default",{},()=>[de(G(D.value),1)])]),_:3},16,["id","disabled"])):W("",!0)}}),Cl=ye({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(E){const R=E;Be();const e=hl();return(t,d)=>l(e).isSelected.value?(s(),q(l(Oe),Se({key:0,"aria-hidden":"true"},R),{default:b(()=>[ve(t.$slots,"default")]),_:3},16)):W("",!0)}}),wl=ye({__name:"ComboboxItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(E){const R=E;return(e,t)=>(s(),q(l(Cl),mt(Et(R)),{default:b(()=>[ve(e.$slots,"default")]),_:3},16))}}),kl=ye({__name:"ComboboxLabel",props:{for:{},asChild:{type:Boolean},as:{default:"div"}},setup(E){const R=E;Be();const e=la({id:"",labelId:""});return e.labelId||(e.labelId=lt(void 0,"reka-combobox-group-label")),(t,d)=>(s(),q(l(Oe),Se(R,{id:l(e).labelId}),{default:b(()=>[ve(t.$slots,"default")]),_:3},16,["id"]))}}),Sl=ye({__name:"ComboboxPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(E){const R=E;return(e,t)=>(s(),q(l(ga),mt(Et(R)),{default:b(()=>[ve(e.$slots,"default")]),_:3},16))}}),$l=ye({__name:"ComboboxSeparator",props:{asChild:{type:Boolean},as:{}},setup(E){const R=E;return Be(),(e,t)=>(s(),q(l(Oe),Se(R,{"aria-hidden":"true"}),{default:b(()=>[ve(e.$slots,"default")]),_:3},16))}}),Il=ye({__name:"ComboboxTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(E){const R=E,{forwardRef:e,currentElement:t}=Be(),d=Xe(),g=ee(()=>R.disabled||d.disabled.value||!1);return Pe(()=>{t.value&&d.onTriggerElementChange(t.value)}),(c,p)=>(s(),q(l(Oe),Se(R,{ref:l(e),type:c.as==="button"?"button":void 0,tabindex:"-1","aria-label":"Show popup","aria-haspopup":"listbox","aria-expanded":l(d).open.value,"aria-controls":l(d).contentId,"data-state":l(d).open.value?"open":"closed",disabled:g.value,"data-disabled":g.value?"":void 0,"aria-disabled":g.value??void 0,onClick:p[0]||(p[0]=x=>l(d).onOpenChange(!l(d).open.value))}),{default:b(()=>[ve(c.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","disabled","data-disabled","aria-disabled"]))}}),Vl="radio.select";function El(E,R,e){Yt(Vl,e,{originalEvent:E,value:R})}const Tl=ye({__name:"Radio",props:{id:{},value:{},disabled:{type:Boolean,default:!1},checked:{type:Boolean,default:void 0},asChild:{type:Boolean},as:{default:"button"},name:{},required:{type:Boolean}},emits:["update:checked","select"],setup(E,{emit:R}){const e=E,t=R,d=et(e,"checked",t,{passive:e.checked===void 0}),{value:g}=ct(e),{forwardRef:c,currentElement:p}=Be(),x=Ut(p),f=ee(()=>{var k;return e.id&&p.value?((k=document.querySelector(`[for="${e.id}"]`))==null?void 0:k.innerText)??e.value:void 0});function D(k){e.disabled||El(k,e.value,u=>{t("select",u),!(u!=null&&u.defaultPrevented)&&(d.value=!0,x.value&&u.stopPropagation())})}return(k,u)=>(s(),q(l(Oe),Se(k.$attrs,{id:k.id,ref:l(c),role:"radio",type:k.as==="button"?"button":void 0,as:k.as,"aria-checked":l(d),"aria-label":f.value,"as-child":k.asChild,disabled:k.disabled?"":void 0,"data-state":l(d)?"checked":"unchecked","data-disabled":k.disabled?"":void 0,value:l(g),required:k.required,name:k.name,onClick:Le(D,["stop"])}),{default:b(()=>[ve(k.$slots,"default",{checked:l(d)}),l(x)&&k.name?(s(),q(l(Ft),{key:0,type:"radio",tabindex:"-1",value:l(g),checked:!!l(d),name:k.name,disabled:k.disabled,required:k.required},null,8,["value","checked","name","disabled","required"])):W("",!0)]),_:3},16,["id","type","as","aria-checked","aria-label","as-child","disabled","data-state","data-disabled","value","required","name"]))}}),[Ul,Fl]=Je("RadioGroupRoot"),Dl=ye({__name:"RadioGroupRoot",props:{modelValue:{},defaultValue:{},disabled:{type:Boolean,default:!1},orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!0},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(E,{emit:R}){const e=E,t=R,{forwardRef:d,currentElement:g}=Be(),c=et(e,"modelValue",t,{defaultValue:e.defaultValue,passive:e.modelValue===void 0}),{disabled:p,loop:x,orientation:f,name:D,required:k,dir:u}=ct(e),L=Tt(u),O=Ut(g);return Fl({modelValue:c,changeModelValue:V=>{c.value=V},disabled:p,loop:x,orientation:f,name:D==null?void 0:D.value,required:k}),(V,N)=>(s(),q(l(Ra),{"as-child":"",orientation:l(f),dir:l(L),loop:l(x)},{default:b(()=>[m(l(Oe),{ref:l(d),role:"radiogroup","data-disabled":l(p)?"":void 0,"as-child":V.asChild,as:V.as,"aria-orientation":l(f),"aria-required":l(k),dir:l(L)},{default:b(()=>[ve(V.$slots,"default",{modelValue:l(c)}),l(O)&&l(D)?(s(),q(l(Ft),{key:0,required:l(k),disabled:l(p),value:l(c),name:l(D)},null,8,["required","disabled","value","name"])):W("",!0)]),_:3},8,["data-disabled","as-child","as","aria-orientation","aria-required","dir"])]),_:3},8,["orientation","dir","loop"]))}}),[Ll,Al]=Je("RadioGroupItem"),Rl=ye({inheritAttrs:!1,__name:"RadioGroupItem",props:{id:{},value:{},disabled:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"button"},name:{},required:{type:Boolean}},emits:["select"],setup(E,{emit:R}){const e=E,t=R,{forwardRef:d,currentElement:g}=Be(),c=Ul(),p=ee(()=>c.disabled.value||e.disabled),x=ee(()=>c.required.value||e.required),f=ee(()=>{var L;return ht((L=c.modelValue)==null?void 0:L.value,e.value)});Al({disabled:p,checked:f});const D=A(!1),k=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];At("keydown",L=>{k.includes(L.key)&&(D.value=!0)}),At("keyup",()=>{D.value=!1});function u(){setTimeout(()=>{var L;D.value&&((L=g.value)==null||L.click())},0)}return(L,O)=>(s(),q(l(Wa),{checked:f.value,disabled:p.value,"as-child":"",focusable:!p.value,active:f.value},{default:b(()=>[m(Tl,Se({...L.$attrs,...e},{ref:l(d),checked:f.value,required:x.value,disabled:p.value,"onUpdate:checked":O[0]||(O[0]=V=>l(c).changeModelValue(L.value)),onSelect:O[1]||(O[1]=V=>t("select",V)),onKeydown:O[2]||(O[2]=tt(Le(()=>{},["prevent"]),["enter"])),onFocus:u}),{default:b(()=>[ve(L.$slots,"default",{checked:f.value,required:x.value,disabled:p.value})]),_:3},16,["checked","required","disabled"])]),_:3},8,["checked","disabled","focusable","active"]))}}),Ol=ye({__name:"RadioGroupIndicator",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(E){const{forwardRef:R}=Be(),e=Ll();return(t,d)=>(s(),q(l(Gt),{present:t.forceMount||l(e).checked.value},{default:b(()=>[m(l(Oe),Se({ref:l(R),"data-state":l(e).checked.value?"checked":"unchecked","data-disabled":l(e).disabled.value?"":void 0,"as-child":t.asChild,as:t.as},t.$attrs),{default:b(()=>[ve(t.$slots,"default")]),_:3},16,["data-state","data-disabled","as-child","as"])]),_:3},8,["present"]))}}),zl={slots:{base:["relative group rounded-md inline-flex items-center focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-dimmed",value:"truncate pointer-events-none",placeholder:"truncate text-dimmed",arrow:"fill-default",content:["max-h-60 w-(--reka-select-trigger-width) bg-default shadow-lg rounded-md ring ring-default overflow-hidden data-[state=open]:animate-[scale-in_100ms_ease-out] data-[state=closed]:animate-[scale-out_100ms_ease-in] origin-(--reka-select-content-transform-origin) pointer-events-auto flex flex-col","origin-(--reka-combobox-content-transform-origin) w-(--reka-combobox-trigger-width)"],viewport:"relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1",group:"p-1 isolate",empty:"text-center text-muted",label:"font-semibold text-highlighted",separator:"-mx-1 my-1 h-px bg-border",item:["group relative w-full flex items-center select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75 text-default data-highlighted:not-data-disabled:text-highlighted data-highlighted:not-data-disabled:before:bg-elevated/50","transition-colors before:transition-colors"],itemLeadingIcon:["shrink-0 text-dimmed group-data-highlighted:not-group-data-disabled:text-default","transition-colors"],itemLeadingAvatar:"shrink-0",itemLeadingAvatarSize:"",itemLeadingChip:"shrink-0",itemLeadingChipSize:"",itemTrailing:"ms-auto inline-flex gap-1.5 items-center",itemTrailingIcon:"shrink-0",itemLabel:"truncate",input:"border-b border-default",focusScope:"flex flex-col min-h-0"},variants:{buttonGroup:{horizontal:"not-only:first:rounded-e-none not-only:last:rounded-s-none not-last:not-first:rounded-none focus-visible:z-[1]",vertical:"not-only:first:rounded-b-none not-only:last:rounded-t-none not-last:not-first:rounded-none focus-visible:z-[1]"},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4",label:"p-1 text-[10px]/3 gap-1",item:"p-1 text-xs gap-1",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemLeadingChip:"size-4",itemLeadingChipSize:"sm",itemTrailingIcon:"size-4",empty:"p-1 text-xs"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4",label:"p-1.5 text-[10px]/3 gap-1.5",item:"p-1.5 text-xs gap-1.5",itemLeadingIcon:"size-4",itemLeadingAvatarSize:"3xs",itemLeadingChip:"size-4",itemLeadingChipSize:"sm",itemTrailingIcon:"size-4",empty:"p-1.5 text-xs"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5",label:"p-1.5 text-xs gap-1.5",item:"p-1.5 text-sm gap-1.5",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemLeadingChip:"size-5",itemLeadingChipSize:"md",itemTrailingIcon:"size-5",empty:"p-1.5 text-sm"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5",label:"p-2 text-xs gap-2",item:"p-2 text-sm gap-2",itemLeadingIcon:"size-5",itemLeadingAvatarSize:"2xs",itemLeadingChip:"size-5",itemLeadingChipSize:"md",itemTrailingIcon:"size-5",empty:"p-2 text-sm"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6",label:"p-2 text-sm gap-2",item:"p-2 text-base gap-2",itemLeadingIcon:"size-6",itemLeadingAvatarSize:"xs",itemLeadingChip:"size-6",itemLeadingChipSize:"lg",itemTrailingIcon:"size-6",empty:"p-2 text-base"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},sa=Object.assign({inheritAttrs:!1},{__name:"SelectMenu",props:Rt({id:{type:String,required:!1},placeholder:{type:String,required:!1},searchInput:{type:[Boolean,Object],required:!1,default:!0},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},trailingIcon:{type:String,required:!1},selectedIcon:{type:String,required:!1},content:{type:Object,required:!1},arrow:{type:[Boolean,Object],required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},valueKey:{type:null,required:!1},labelKey:{type:null,required:!1,default:"label"},items:{type:null,required:!1},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},createItem:{type:[Boolean,String,Object],required:!1},filterFields:{type:Array,required:!1},ignoreFilter:{type:Boolean,required:!1},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},class:{type:null,required:!1},ui:{type:null,required:!1},open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},resetSearchTermOnBlur:{type:Boolean,required:!1,default:!0},resetSearchTermOnSelect:{type:Boolean,required:!1,default:!0},highlightOnHover:{type:Boolean,required:!1},icon:{type:String,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:String,required:!1},trailing:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1}},{searchTerm:{type:String,default:""},searchTermModifiers:{}}),emits:Rt(["update:open","change","blur","focus","create","highlight","update:modelValue"],["update:searchTerm"]),setup(E,{expose:R,emit:e}){const t=E,d=e,g=Wt(),c=ba(E,"searchTerm",{type:String,default:""}),{t:p}=ya(),x=Xt(),{contains:f}=aa({sensitivity:"base"}),D=Vt(Jt(t,"modelValue","defaultValue","open","defaultOpen","required","multiple","resetSearchTermOnBlur","resetSearchTermOnSelect","highlightOnHover"),d),k=ha(Ze(()=>t.portal)),u=Ze(()=>wt(t.content,{side:"bottom",sideOffset:8,collisionPadding:8,position:"popper"})),L=Ze(()=>t.arrow),O=Ze(()=>wt(t.searchInput,{placeholder:p("selectMenu.search"),variant:"none"})),{emitFormBlur:V,emitFormFocus:N,emitFormInput:Z,emitFormChange:te,size:h,color:M,id:y,name:U,highlight:P,disabled:fe,ariaAttrs:ae}=Qt(t),{orientation:z,size:J}=_a(t),{isLeading:re,isTrailing:ge,leadingIconName:C,trailingIconName:i}=xa(Ze(()=>wt(t,{trailingIcon:x.ui.icons.chevronDown}))),o=ee(()=>J.value||h.value),[r,T]=Ea(),S=ee(()=>{var _;return _t({extend:_t(zl),...((_=x.ui)==null?void 0:_.selectMenu)||{}})({color:M.value,variant:t.variant,size:o==null?void 0:o.value,loading:t.loading,highlight:P.value,leading:re.value||!!t.avatar||!!g.leading,trailing:ge.value||!!g.trailing,buttonGroup:z.value})});function B(_){if(t.multiple&&Array.isArray(_)){const j=_.map(xe=>B(xe)).filter(Boolean);return j!=null&&j.length?j.join(", "):void 0}if(!t.valueKey)return _&&(typeof _=="object"?Ke(_,t.labelKey):_);const Y=le.value.find(j=>Ot(typeof j=="object"?Ke(j,t.valueKey):j,_));return Y&&(typeof Y=="object"?Ke(Y,t.labelKey):Y)}const H=ee(()=>{var _;return(_=t.items)!=null&&_.length?Ca(t.items)?t.items:[t.items]:[]}),le=ee(()=>H.value.flatMap(_=>_)),ie=ee(()=>{if(t.ignoreFilter||!c.value)return H.value;const _=Array.isArray(t.filterFields)?t.filterFields:[t.labelKey];return H.value.map(Y=>Y.filter(j=>typeof j!="object"||j===null?f(String(j),c.value):j.type&&["label","separator"].includes(j.type)?!0:_.some(xe=>f(Ke(j,xe),c.value)))).filter(Y=>Y.filter(j=>!K(j)||!j.type||!["label","separator"].includes(j.type)).length>0)}),he=ee(()=>ie.value.flatMap(_=>_)),ze=ee(()=>{if(!t.createItem||!c.value)return!1;const _=t.valueKey?{[t.valueKey]:c.value}:c.value;return typeof t.createItem=="object"&&t.createItem.when==="always"||t.createItem==="always"?!he.value.find(Y=>Ot(Y,_,t.valueKey)):!he.value.length}),Me=ee(()=>typeof t.createItem=="object"?t.createItem.position:"bottom"),Q=A(null);function ce(){var _,Y;t.autofocus&&((Y=(_=Q.value)==null?void 0:_.$el)==null||Y.focus({focusVisible:!0}))}Pe(()=>{setTimeout(()=>{ce()},t.autofocusDelay)});function me(_){if(ka(t.modelValue)===_)return;const Y=new Event("change",{target:{value:_}});d("change",Y),te(),Z(),t.resetSearchTermOnSelect&&(c.value="")}function we(_){let Y;if(_){const j=new FocusEvent("focus");d("focus",j),N(),clearTimeout(Y)}else{const j=new FocusEvent("blur");d("blur",j),V(),t.resetSearchTermOnBlur&&(Y=setTimeout(()=>{c.value=""},100))}}function Ie(_,Y){var j;if(K(Y)){if(Y.disabled){_.preventDefault();return}(j=Y.onSelect)==null||j.call(Y,_)}}function K(_){return typeof _=="object"&&_!==null}return R({triggerRef:Q}),(_,Y)=>(s(),I(_e,null,[m(l(r),null,{default:b(()=>{var j;return[m(l(jt),{class:ne(S.value.group({class:(j=t.ui)==null?void 0:j.group}))},{default:b(()=>{var xe;return[m(l(Kt),{class:ne(S.value.item({class:(xe=t.ui)==null?void 0:xe.item})),value:c.value,onSelect:Y[0]||(Y[0]=Le(se=>d("create",c.value),["prevent"]))},{default:b(()=>{var se;return[a("span",{class:ne(S.value.itemLabel({class:(se=t.ui)==null?void 0:se.itemLabel}))},[ve(_.$slots,"create-item-label",{item:c.value},()=>[de(G(l(p)("selectMenu.create",{label:c.value})),1)])],2)]}),_:3},8,["class","value"])]}),_:3},8,["class"])]}),_:3}),m(l(nl),Se({id:l(y)},{...l(D),..._.$attrs,...l(ae)},{"ignore-filter":"","as-child":"",name:l(U),disabled:l(fe),"onUpdate:modelValue":me,"onUpdate:open":we}),{default:b(({modelValue:j,open:xe})=>[m(l(Za),{"as-child":""},{default:b(()=>{var se;return[m(l(Il),{ref_key:"triggerRef",ref:Q,class:ne(S.value.base({class:[(se=t.ui)==null?void 0:se.base,t.class]})),tabindex:"0"},{default:b(()=>{var Te,ke;return[l(re)||E.avatar||g.leading?(s(),I("span",{key:0,class:ne(S.value.leading({class:(Te=t.ui)==null?void 0:Te.leading}))},[ve(_.$slots,"leading",{modelValue:j,open:xe,ui:S.value},()=>{var be,v,n;return[l(re)&&l(C)?(s(),q(qe,{key:0,name:l(C),class:ne(S.value.leadingIcon({class:(be=t.ui)==null?void 0:be.leadingIcon}))},null,8,["name","class"])):E.avatar?(s(),q(zt,Se({key:1,size:((v=t.ui)==null?void 0:v.itemLeadingAvatarSize)||S.value.itemLeadingAvatarSize()},E.avatar,{class:S.value.itemLeadingAvatar({class:(n=t.ui)==null?void 0:n.itemLeadingAvatar})}),null,16,["size","class"])):W("",!0)]})],2)):W("",!0),ve(_.$slots,"default",{modelValue:j,open:xe},()=>[(s(!0),I(_e,null,$e([B(j)],be=>{var v,n;return s(),I(_e,{key:be},[be!=null?(s(),I("span",{key:0,class:ne(S.value.value({class:(v=t.ui)==null?void 0:v.value}))},G(be),3)):(s(),I("span",{key:1,class:ne(S.value.placeholder({class:(n=t.ui)==null?void 0:n.placeholder}))},G(E.placeholder??"Â "),3))],64)}),128))]),l(ge)||g.trailing?(s(),I("span",{key:1,class:ne(S.value.trailing({class:(ke=t.ui)==null?void 0:ke.trailing}))},[ve(_.$slots,"trailing",{modelValue:j,open:xe,ui:S.value},()=>{var be;return[l(i)?(s(),q(qe,{key:0,name:l(i),class:ne(S.value.trailingIcon({class:(be=t.ui)==null?void 0:be.trailingIcon}))},null,8,["name","class"])):W("",!0)]})],2)):W("",!0)]}),_:2},1032,["class"])]}),_:2},1024),m(l(Sl),mt(Et(l(k))),{default:b(()=>{var se;return[m(l(cl),Se({class:S.value.content({class:(se=t.ui)==null?void 0:se.content})},u.value),{default:b(()=>{var Te,ke;return[m(l(Na),{trapped:"",class:ne(S.value.focusScope({class:(Te=t.ui)==null?void 0:Te.focusScope}))},{default:b(()=>{var be,v;return[ve(_.$slots,"content-top"),E.searchInput?(s(),q(l(bl),{key:0,modelValue:c.value,"onUpdate:modelValue":Y[1]||(Y[1]=n=>c.value=n),"display-value":()=>c.value,"as-child":""},{default:b(()=>{var n;return[m(ut,Se({autofocus:"",autocomplete:"off",size:E.size},O.value,{class:S.value.input({class:(n=t.ui)==null?void 0:n.input})}),null,16,["size","class"])]}),_:1},8,["modelValue","display-value"])):W("",!0),m(l(pl),{class:ne(S.value.empty({class:(be=t.ui)==null?void 0:be.empty}))},{default:b(()=>[ve(_.$slots,"empty",{searchTerm:c.value},()=>[de(G(c.value?l(p)("selectMenu.noMatch",{searchTerm:c.value}):l(p)("selectMenu.noData")),1)])]),_:3},8,["class"]),a("div",{role:"presentation",class:ne(S.value.viewport({class:(v=t.ui)==null?void 0:v.viewport}))},[ze.value&&Me.value==="top"?(s(),q(l(T),{key:0})):W("",!0),(s(!0),I(_e,null,$e(ie.value,(n,X)=>{var ue;return s(),q(l(jt),{key:`group-${X}`,class:ne(S.value.group({class:(ue=t.ui)==null?void 0:ue.group}))},{default:b(()=>[(s(!0),I(_e,null,$e(n,(F,w)=>{var Ve,De,Ce,Ae,Ne,Ue;return s(),I(_e,{key:`group-${X}-${w}`},[K(F)&&F.type==="label"?(s(),q(l(kl),{key:0,class:ne(S.value.label({class:[(Ve=t.ui)==null?void 0:Ve.label,(De=F.ui)==null?void 0:De.label,F.class]}))},{default:b(()=>[de(G(l(Ke)(F,t.labelKey)),1)]),_:2},1032,["class"])):K(F)&&F.type==="separator"?(s(),q(l($l),{key:1,class:ne(S.value.separator({class:[(Ce=t.ui)==null?void 0:Ce.separator,(Ae=F.ui)==null?void 0:Ae.separator,F.class]}))},null,8,["class"])):(s(),q(l(Kt),{key:2,class:ne(S.value.item({class:[(Ne=t.ui)==null?void 0:Ne.item,K(F)&&((Ue=F.ui)==null?void 0:Ue.item),K(F)&&F.class]})),disabled:K(F)&&F.disabled,value:t.valueKey&&K(F)?l(Ke)(F,t.valueKey):F,onSelect:$=>Ie($,F)},{default:b(()=>[ve(_.$slots,"item",{item:F,index:w},()=>{var $,Ee,oe,Ge;return[ve(_.$slots,"item-leading",{item:F,index:w},()=>{var je,Ye,nt,ot,it,pe,gt,Dt,Lt;return[K(F)&&F.icon?(s(),q(qe,{key:0,name:F.icon,class:ne(S.value.itemLeadingIcon({class:[(je=t.ui)==null?void 0:je.itemLeadingIcon,(Ye=F.ui)==null?void 0:Ye.itemLeadingIcon]}))},null,8,["name","class"])):K(F)&&F.avatar?(s(),q(zt,Se({key:1,size:((nt=F.ui)==null?void 0:nt.itemLeadingAvatarSize)||((ot=t.ui)==null?void 0:ot.itemLeadingAvatarSize)||S.value.itemLeadingAvatarSize()},{ref_for:!0},F.avatar,{class:S.value.itemLeadingAvatar({class:[(it=t.ui)==null?void 0:it.itemLeadingAvatar,(pe=F.ui)==null?void 0:pe.itemLeadingAvatar]})}),null,16,["size","class"])):K(F)&&F.chip?(s(),q(wa,Se({key:2,size:((gt=t.ui)==null?void 0:gt.itemLeadingChipSize)||S.value.itemLeadingChipSize(),inset:"",standalone:""},{ref_for:!0},F.chip,{class:S.value.itemLeadingChip({class:[(Dt=t.ui)==null?void 0:Dt.itemLeadingChip,(Lt=F.ui)==null?void 0:Lt.itemLeadingChip]})}),null,16,["size","class"])):W("",!0)]}),a("span",{class:ne(S.value.itemLabel({class:[($=t.ui)==null?void 0:$.itemLabel,K(F)&&((Ee=F.ui)==null?void 0:Ee.itemLabel)]}))},[ve(_.$slots,"item-label",{item:F,index:w},()=>[de(G(K(F)?l(Ke)(F,t.labelKey):F),1)])],2),a("span",{class:ne(S.value.itemTrailing({class:[(oe=t.ui)==null?void 0:oe.itemTrailing,K(F)&&((Ge=F.ui)==null?void 0:Ge.itemTrailing)]}))},[ve(_.$slots,"item-trailing",{item:F,index:w}),m(l(wl),{"as-child":""},{default:b(()=>{var je,Ye;return[m(qe,{name:E.selectedIcon||l(x).ui.icons.check,class:ne(S.value.itemTrailingIcon({class:[(je=t.ui)==null?void 0:je.itemTrailingIcon,K(F)&&((Ye=F.ui)==null?void 0:Ye.itemTrailingIcon)]}))},null,8,["name","class"])]}),_:2},1024)],2)]})]),_:2},1032,["class","disabled","value","onSelect"]))],64)}),128))]),_:2},1032,["class"])}),128)),ze.value&&Me.value==="bottom"?(s(),q(l(T),{key:1})):W("",!0)],2),ve(_.$slots,"content-bottom")]}),_:3},8,["class"]),E.arrow?(s(),q(l(ul),Se({key:0},L.value,{class:S.value.arrow({class:(ke=t.ui)==null?void 0:ke.arrow})}),null,16,["class"])):W("",!0)]}),_:3},16,["class"])]}),_:3},16)]),_:3},16,["id","name","disabled"])],64))}}),Nl={key:0},Bl={class:"text-center"},Ml={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},ql={key:1,class:"space-y-4"},jl={class:"flex items-center justify-between mb-4"},Kl={key:0,class:"border rounded-lg overflow-hidden mb-4"},Pl={class:"space-y-2"},Hl={class:"flex items-center justify-between"},Gl={class:"text-xs text-gray-500"},Yl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Wl={class:"flex-1"},Jl={class:"text-sm font-medium truncate"},Ql={key:0,class:"text-xs text-gray-500 ml-2"},Xl={class:"space-y-2"},Zl={class:"space-y-2"},es={class:"flex justify-between items-center w-full"},ts={key:0,class:"text-sm text-gray-500"},as={key:1},ls={class:"flex space-x-2"},ss=ye({__name:"CSVImportModal",props:{open:{type:Boolean,default:!1},tableName:{type:String,required:!0,default:""},tableColumns:{type:Array,default:()=>[]},ModalConfirmColor:{type:String,default:"primary"},ModalCancelColor:{type:String,default:"neutral"},ui:{type:Object,default:()=>({footer:"flex justify-end space-x-2"})}},emits:["update:open","close","imported"],setup(E,{emit:R}){const e=E,t=R,d=at(),g=He(),c=A(),p=A(""),x=A([]),f=A([]),D=A([]),k=A({}),u=A(!1),L=A(!1),O=A({skipFirstRow:!0,updateExisting:!1,skipErrors:!0}),V=ee({get:()=>e.open,set:C=>t("update:open",C)}),N=ee(()=>[{label:"Skip this column",value:"skip"},...x.value.map(i=>({label:i,value:i}))]),Z=ee(()=>x.value.map(C=>({accessorKey:C,header:C}))),te=async C=>{var r;const o=(r=C.target.files)==null?void 0:r[0];o&&await h(o)},h=async C=>{if(!C.name.endsWith(".csv")){d.error({title:"Invalid file type",description:"Please select a CSV file"});return}try{const i=await C.text();fe(i)}catch{d.error({title:"Failed to read file",description:"Could not read the selected file"})}},M=C=>{C.preventDefault(),C.stopPropagation(),L.value=!0},y=C=>{C.preventDefault(),C.stopPropagation(),L.value=!1},U=C=>{C.preventDefault(),C.stopPropagation()},P=async C=>{var r;C.preventDefault(),C.stopPropagation(),L.value=!1;const i=(r=C.dataTransfer)==null?void 0:r.files;if(!i||i.length===0)return;const o=i[0];await h(o)},fe=C=>{try{const i=C.trim().split(`
`);if(i.length===0){d.error({title:"Empty file",description:"The selected file is empty"});return}const o=ae(i[0]),r=i.slice(1).map(T=>{const S=ae(T),B={};return o.forEach((H,le)=>{B[H]=S[le]||""}),B}).filter(T=>Object.values(T).some(S=>S!==""));x.value=o,f.value=r,D.value=r.slice(0,5),p.value=C,z()}catch{d.error({title:"Failed to parse CSV",description:"The file could not be parsed as CSV"})}},ae=C=>{const i=[];let o="",r=!1;for(let T=0;T<C.length;T++){const S=C[T],B=C[T+1];S==='"'&&r&&B==='"'?(o+='"',T++):S==='"'?r=!r:S===","&&!r?(i.push(o.trim()),o=""):o+=S}return i.push(o.trim()),i},z=()=>{const C={};e.tableColumns.forEach(i=>{if(x.value.includes(i.name))C[i.name]=i.name;else{const o=x.value.find(r=>r.toLowerCase()===i.name.toLowerCase());o?C[i.name]=o:C[i.name]="skip"}}),k.value=C},J=async()=>{u.value=!0;try{if(Object.entries(k.value).filter(([,r])=>r!=="skip").length===0){d.error({title:"No columns mapped",description:"Please map at least one column before importing"});return}const i=f.value.map((r,T)=>{if(typeof r!="object"||r===null)return console.error(`Row ${T} is not an object:`,r,typeof r),{};const S={};for(const[B,H]of Object.entries(k.value))H&&H!=="skip"&&(H in r||console.warn(`Column "${H}" not found in row ${T}`),S[B]=r[H]);return S});console.log("Mapped data to send:",i),console.log("Import options:",O.value),console.log("First row of mapped data:",i[0]);const o=await g.bulkImportData(e.tableName,i,O.value);d.success({title:"Import successful",description:`Imported ${o.success} records. ${o.failed?`${o.failed} failed.`:""}`}),t("imported"),V.value=!1}catch(C){d.error({title:"Import failed",description:C.message||"Failed to import data"})}finally{u.value=!1}},re=()=>{p.value="",x.value=[],f.value=[],D.value=[],k.value={},c.value&&(c.value.value="")},ge=()=>{V.value=!1};return Fe(V,C=>{C||re()}),(C,i)=>{const o=qe,r=Qe,T=st,S=Zt,B=sa,H=dt,le=Pt;return s(),q(le,{dismissible:!1,open:V.value,"onUpdate:open":i[4]||(i[4]=ie=>V.value=ie),ui:E.ui,close:!1,class:"sm:max-w-5xl"},{body:b(()=>[p.value?(s(),I("div",ql,[a("div",jl,[i[9]||(i[9]=a("h4",{class:"font-medium"},"Map CSV Columns to Table Fields",-1)),m(r,{variant:"ghost",size:"xs",onClick:re},{default:b(()=>i[8]||(i[8]=[de(" Change File ")])),_:1,__:[8]})]),D.value.length>0?(s(),I("div",Kl,[i[10]||(i[10]=a("div",{class:"bg-gray-50 dark:bg-gray-800 px-4 py-2 text-sm font-medium"}," Preview (first 5 rows) ",-1)),m(S,{columns:Z.value,data:D.value},null,8,["columns","data"])])):W("",!0),a("div",Pl,[a("div",Hl,[i[11]||(i[11]=a("h5",{class:"text-sm font-medium"},"Column Mapping",-1)),a("span",Gl,G(Object.values(k.value).filter(ie=>ie&&ie!=="skip").length)+" of "+G(E.tableColumns.length)+" columns mapped ",1)]),a("div",Yl,[(s(!0),I(_e,null,$e(E.tableColumns,ie=>(s(),I("div",{key:ie.name,class:ne(["flex items-center space-x-2 p-2 rounded-lg",{"bg-green-50 dark:bg-green-900/20":k.value[ie.name]&&k.value[ie.name]!=="skip","bg-gray-50 dark:bg-gray-800/50":!k.value[ie.name]||k.value[ie.name]==="skip"}])},[a("div",Wl,[a("span",Jl,G(ie.name),1),ie.type?(s(),I("span",Ql,"("+G(ie.type)+")",1)):W("",!0)]),m(B,{modelValue:k.value[ie.name],"onUpdate:modelValue":he=>k.value[ie.name]=he,"value-key":"label",items:N.value,placeholder:"Select CSV column",class:"w-48"},null,8,["modelValue","onUpdate:modelValue","items"])],2))),128))])]),a("div",Xl,[i[12]||(i[12]=a("h5",{class:"text-sm font-medium"},"Import Options",-1)),a("div",Zl,[m(H,{modelValue:O.value.skipFirstRow,"onUpdate:modelValue":i[1]||(i[1]=ie=>O.value.skipFirstRow=ie),label:"First row contains headers"},null,8,["modelValue"]),m(H,{modelValue:O.value.updateExisting,"onUpdate:modelValue":i[2]||(i[2]=ie=>O.value.updateExisting=ie),label:"Update existing records (match by ID)"},null,8,["modelValue"]),m(H,{modelValue:O.value.skipErrors,"onUpdate:modelValue":i[3]||(i[3]=ie=>O.value.skipErrors=ie),label:"Skip rows with errors"},null,8,["modelValue"])])])])):(s(),I("div",Nl,[m(T,{label:"Select CSV File"},{default:b(()=>[a("div",{class:ne(["border-2 border-dashed rounded-lg p-6 transition-colors",{"border-gray-300 dark:border-gray-700":!L.value,"border-primary-500 dark:border-primary-400 bg-primary-50 dark:bg-primary-900/20":L.value}]),onDragenter:M,onDragleave:y,onDragover:U,onDrop:P},[a("input",{type:"file",accept:".csv",onChange:te,class:"hidden",ref_key:"fileInput",ref:c},null,544),a("div",Bl,[m(o,{name:"i-lucide-upload-cloud",class:ne(["w-12 h-12 mx-auto transition-colors",{"text-gray-400":!L.value,"text-primary-500":L.value}])},null,8,["class"]),a("p",Ml,[m(r,{variant:"link",onClick:i[0]||(i[0]=ie=>{var he;return(he=c.value)==null?void 0:he.click()})},{default:b(()=>i[5]||(i[5]=[de(" Click to upload ")])),_:1,__:[5]}),i[6]||(i[6]=de(" or drag and drop "))]),i[7]||(i[7]=a("p",{class:"text-xs text-gray-500"},"CSV files only",-1))])],34)]),_:1})]))]),footer:b(()=>[a("div",es,[p.value?(s(),I("div",ts,G(f.value.length)+" records ready to import ",1)):(s(),I("div",as)),a("div",ls,[m(r,{color:E.ModalCancelColor,variant:"soft",label:"Cancel",onClick:ge},null,8,["color"]),m(r,{color:"primary",disabled:!p.value||u.value,loading:u.value,onClick:J},{default:b(()=>[de(" Import "+G(p.value?`${f.value.length} Records`:""),1)]),_:1},8,["disabled","loading"])])])]),_:1},8,["open","ui"])}}}),ns={key:0,class:"text-sm text-gray-500"},na=ye({__name:"FormFieldRenderer",props:{column:{},value:{},error:{},disabled:{type:Boolean},isForeignKey:{type:Boolean},foreignKeyConfig:{},searchFkOptions:{type:Function}},emits:["update:value"],setup(E,{emit:R}){const e=E,t=R,d=A(!1),g=A(""),c=ee(()=>{const h=e.column.type.toUpperCase(),M=e.column.name.toLowerCase();return e.isForeignKey?"foreign-key":M==="status"?"status-select":h.includes("BOOL")?"boolean":h.includes("INT")||h.includes("DECIMAL")||h.includes("FLOAT")?"number":h.includes("DATE")?"date":h.includes("TIME")&&!h.includes("DATE")?"time":h.includes("DATETIME")||h.includes("TIMESTAMP")?"datetime":h.includes("JSON")?"json":h.includes("TEXT")||h.includes("LONGTEXT")?"textarea":h.includes("EMAIL")?"email":h.includes("URL")?"url":"text"}),p=ee(()=>!e.column.nullable&&e.column.extra!=="auto_increment"),x=ee(()=>e.column.name.split("_").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" ")),f=ee(()=>{if(e.disabled)return"";const h=e.column.name.toLowerCase(),M=e.column.type.toUpperCase();if(h.includes("uuid")||h==="id"&&(M.includes("CHAR(36)")||M.includes("CHAR(12)"))||M.includes("UUID")||h==="uuid"&&M.includes("CHAR(12)"))return"Leave empty to auto-generate...";switch(c.value){case"email":return"user@example.com";case"url":return"https://example.com";case"number":return"Enter a number";case"date":return"Select date";case"time":return"Select time";case"datetime":return"Select date and time";case"foreign-key":return"Select related record";default:return`Enter ${x.value.toLowerCase()}`}}),D=ee(()=>{const M=e.column.type.toUpperCase().match(/\((\d+)\)/);return M?parseInt(M[1],10):null}),k=ee(()=>{if(e.value===null||e.value===void 0)return"N/A";switch(c.value){case"boolean":return e.value?"Yes":"No";case"date":case"datetime":return e.value?new Date(e.value).toLocaleString():"N/A";case"json":return typeof e.value=="object"?JSON.stringify(e.value,null,2):e.value;default:return String(e.value)}});function u(h){t("update:value",h)}const L=ee(()=>{const h=e.foreignKeyConfig;return h?h.currentValue&&h.options.length===0?[{label:`Current: ${h.tableName} (${h.currentValue})`,value:h.currentValue}]:h.options:[]}),O=ee(()=>{if(!e.value)return"";const h=new Date(e.value);switch(c.value){case"date":return h.toISOString().split("T")[0];case"time":return h.toTimeString().split(" ")[0].substring(0,8);case"datetime":return typeof e.value=="string"&&e.value.includes(" ")?e.value.replace(" ","T"):h.toISOString().slice(0,19);default:return e.value}});function V(h){switch(c.value){case"datetime":u(h.replace("T"," "));break;case"date":u(h);break;case"time":u(h);break;default:u(h)}}function N(h){if(typeof h=="string")try{const M=JSON.parse(h);return JSON.stringify(M,null,2)}catch{return h}return JSON.stringify(h,null,2)}function Z(h){const y=h.target.value;try{const U=JSON.parse(y);u(U)}catch{u(y)}}let te=null;return Fe(g,async h=>{e.isForeignKey&&e.searchFkOptions&&c.value==="foreign-key"&&(te&&clearTimeout(te),te=window.setTimeout(async()=>{d.value=!0;try{await e.searchFkOptions(h)}catch(M){console.error("Error searching foreign key options:",M)}finally{d.value=!1}},300))}),Pe(async()=>{if(e.isForeignKey&&e.searchFkOptions&&c.value==="foreign-key"){d.value=!0;try{await e.searchFkOptions("")}catch(h){console.error("Error loading initial foreign key options:",h)}finally{d.value=!1}}}),(h,M)=>{const y=Pa,U=ut,P=sa,fe=ea,ae=st;return s(),q(ae,{label:x.value,name:h.column.name,required:p.value,error:h.error,help:h.column.default?`Default: ${h.column.default}`:void 0},{default:b(()=>[h.disabled&&h.column.extra==="auto_increment"?(s(),I("div",ns,G(k.value),1)):c.value==="boolean"?(s(),q(y,{key:1,"model-value":!!h.value,disabled:h.disabled,"onUpdate:modelValue":u},null,8,["model-value","disabled"])):c.value==="number"?(s(),q(U,{key:2,"model-value":h.value,type:"number",placeholder:f.value,disabled:h.disabled,status:h.error?"error":void 0,"onUpdate:modelValue":u,class:"w-full"},null,8,["model-value","placeholder","disabled","status"])):c.value==="email"?(s(),q(U,{key:3,"model-value":h.value,type:"email",placeholder:f.value,disabled:h.disabled,status:h.error?"error":void 0,maxlength:D.value,"onUpdate:modelValue":u,class:"w-full"},null,8,["model-value","placeholder","disabled","status","maxlength"])):c.value==="url"?(s(),q(U,{key:4,"model-value":h.value,type:"url",placeholder:f.value,disabled:h.disabled,status:h.error?"error":void 0,maxlength:D.value,"onUpdate:modelValue":u,class:"w-full"},null,8,["model-value","placeholder","disabled","status","maxlength"])):c.value==="date"?(s(),q(U,{key:5,"model-value":O.value,type:"date",disabled:h.disabled,status:h.error?"error":void 0,"onUpdate:modelValue":V,class:"w-full"},null,8,["model-value","disabled","status"])):c.value==="time"?(s(),q(U,{key:6,"model-value":O.value,type:"time",disabled:h.disabled,status:h.error?"error":void 0,"onUpdate:modelValue":V,class:"w-full"},null,8,["model-value","disabled","status"])):c.value==="datetime"?(s(),q(U,{key:7,"model-value":O.value,type:"datetime-local",disabled:h.disabled,status:h.error?"error":void 0,"onUpdate:modelValue":V,class:"w-full"},null,8,["model-value","disabled","status"])):c.value==="foreign-key"?(s(),q(P,{key:8,"model-value":h.value,searchTerm:g.value,"onUpdate:searchTerm":M[0]||(M[0]=z=>g.value=z),items:L.value,loading:d.value,placeholder:f.value,disabled:h.disabled,"value-key":"value","option-attribute":"label","onUpdate:modelValue":u,class:"w-full"},null,8,["model-value","searchTerm","items","loading","placeholder","disabled"])):c.value==="textarea"?(s(),q(fe,{key:9,"model-value":h.value,placeholder:f.value,disabled:h.disabled,status:h.error?"error":void 0,maxlength:D.value,rows:4,"onUpdate:modelValue":u,class:"w-full"},null,8,["model-value","placeholder","disabled","status","maxlength"])):c.value==="json"?(s(),q(fe,{key:10,"model-value":N(h.value),placeholder:'{ "key": "value" }',disabled:h.disabled,status:h.error?"error":void 0,rows:6,class:"font-mono text-sm w-full",onInput:Z},null,8,["model-value","disabled","status"])):c.value==="status-select"?(s(),q(P,{key:11,"model-value":h.value,items:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Deleted",value:"deleted"}],"option-attribute":"label","value-attribute":"value",disabled:h.disabled,placeholder:"Select status","onUpdate:modelValue":u,class:"w-full"},null,8,["model-value","disabled"])):(s(),q(U,{key:12,"model-value":h.value,type:"text",placeholder:f.value,disabled:h.disabled,status:h.error?"error":void 0,maxlength:D.value,"onUpdate:modelValue":u,class:"w-full"},null,8,["model-value","placeholder","disabled","status","maxlength"]))]),_:1},8,["label","name","required","error","help"])}}}),os={class:"border border-gray-200 rounded-lg bg-white"},is={class:"flex items-center justify-between"},rs={class:"text-sm font-medium text-gray-900"},ds={key:0,class:"p-4"},oa=ye({__name:"FormSectionGroup",props:{title:{},collapsible:{type:Boolean,default:!1},defaultOpen:{type:Boolean,default:!0}},setup(E){const e=A(E.defaultOpen);return(t,d)=>{const g=qe;return s(),I("div",os,[a("div",{class:ne(["px-4 py-3 border-b border-gray-200 bg-gray-50",{"cursor-pointer hover:bg-gray-100":t.collapsible}]),onClick:d[0]||(d[0]=c=>t.collapsible?e.value=!e.value:null)},[a("div",is,[a("h3",rs,G(t.title),1),t.collapsible?(s(),q(g,{key:0,name:e.value?"i-lucide-chevron-up":"i-lucide-chevron-down",class:"w-4 h-4 text-gray-500 transition-transform duration-200"},null,8,["name"])):W("",!0)])],2),!t.collapsible||e.value?(s(),I("div",ds,[ve(t.$slots,"default")])):W("",!0)])}}}),us={class:"flex justify-between w-full"},cs={class:"flex gap-2"},ia=ye({__name:"RecordFormActions",props:{readonly:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},isSaving:{type:Boolean,default:!1},isValid:{type:Boolean,default:!0},hasChanges:{type:Boolean,default:!1}},emits:["save","delete","cancel"],setup(E,{emit:R}){const e=R;function t(){e("save")}function d(){e("delete")}function g(){e("cancel")}return(c,p)=>{const x=Qe;return s(),I("div",us,[a("div",null,[c.isEditing&&!c.readonly?(s(),q(x,{key:0,color:"error",variant:"soft",icon:"i-lucide-trash-2",onClick:d,disabled:c.isSaving,label:"Delete"},null,8,["disabled"])):W("",!0)]),a("div",cs,[m(x,{color:"neutral",variant:"soft",onClick:g,disabled:c.isSaving,label:"Cancel"},null,8,["disabled"]),c.readonly?W("",!0):(s(),q(x,{key:0,type:"button",color:"primary",loading:c.isSaving,disabled:!c.isValid||c.isSaving||!c.hasChanges,onClick:t,label:c.isEditing?"Update":"Create"},null,8,["loading","disabled","label"]))])])}}}),ps={key:0,class:"flex items-center justify-center py-8"},ms={key:1,class:"text-center py-8 text-gray-500"},fs={key:2,class:"space-y-6"},vs={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},gs={class:"flex items-start"},bs={class:"space-y-4"},ys=ye({__name:"NewRecordSlideover",props:{open:{type:Boolean},tableId:{},schema:{}},emits:["update:open","close","submit"],setup(E,{emit:R}){const e=E,t=R,d=He(),g=A(!1),c=A(!1),p=A(!1),x=A(!1),f=A({}),D=A({}),k=A({}),u=A({}),L=ee({get:()=>e.open,set:C=>t("update:open",C)}),O=ee(()=>`Create New Record - ${e.tableId}`),V=ee(()=>e.schema?e.schema.filter(i=>!i.nullable&&i.extra!=="auto_increment"&&!te(i)).every(i=>{const o=f.value[i.name];return o!=null&&o!==""}):!1),N=ee(()=>e.schema?[{title:"Basic Information",fields:e.schema.filter(i=>!i.name.includes("_at")&&!i.name.includes("_id")&&i.name!=="id"&&!Z(i)&&i.extra!=="auto_increment")},{title:"Relationships",fields:e.schema.filter(i=>Z(i))}].filter(i=>i.fields.length>0):[]);function Z(C){return!!C.relationships&&C.relationships.length>0}function te(C){const i=C.name.toLowerCase(),o=C.type.toUpperCase();return i.includes("uuid")||i==="id"&&(o.includes("CHAR(36)")||o.includes("CHAR(12)"))||o.includes("UUID")}async function h(){var i;if(!e.schema)return;const C=e.schema.filter(o=>Z(o));for(const o of C){const r=(i=o.relationships)==null?void 0:i[0],T=r==null?void 0:r.references_table;if(!T){console.warn(`No references_table found for ${o.name}`);continue}try{u.value[o.name]={tableName:T,referencedColumn:r.references_column,currentValue:null,currentDisplayValue:void 0,options:[]}}catch(S){console.error(`Error setting up foreign key for ${o.name}:`,S),u.value[o.name]={tableName:"",referencedColumn:"id",currentValue:null,options:[]}}}}function M(C,i){const r=i.filter(T=>T.name.includes("_at")||T.name.includes("password")||T.name.includes("token")||T.name.includes("user_agent")||T.name.includes("ip_address")||T.extra==="auto_increment"?!1:T.type.includes("varchar")||T.type.includes("text")||T.is_unique&&!T.is_primary).map(T=>{let S=0;/^(name|title|label|display_name)$/i.test(T.name)&&(S+=100),/name$/i.test(T.name)&&(S+=80),T.is_unique&&(S+=60),/^(username|email|code|slug)$/i.test(T.name)&&(S+=50),T.type.includes("varchar")&&(S+=20),(T.type.includes("512")||T.type.includes("1000"))&&(S-=10),/^(uuid|guid|hash)$/i.test(T.name)&&(S-=30);const B=C[T.name];return(!B||B==="")&&(S=0),{column:T,score:S,value:B}}).filter(T=>T.score>0).sort((T,S)=>S.score-T.score).slice(0,2);return r.length===1?r[0].value:r.length>=2?r.map(T=>T.value).join(" - "):Object.values(C).slice(0,2).join(" - ")}async function y(C,i=""){const o=u.value[C];if(!o)return[];try{const r=await d.fetchForeignKeyData(o.tableName,{per_page:20,search:i||void 0});if(r&&Array.isArray(r.data)){const T=r.data.map(S=>{const B=o.referencedColumn,H=S[B]||S.id;let le;const ie=Object.keys(S).find(he=>he.endsWith("_display"));return ie&&S[ie]?le=S[ie]:r.columns&&Array.isArray(r.columns)?le=M(S,r.columns):le=`${Object.values(S).slice(0,2).join(" - ")}`,{label:String(le).substring(0,50),value:H}});return u.value[C].options=T,T}}catch(r){console.error(`Error searching FK options for ${C}:`,r)}return[]}function U(){if(!e.schema)return;const C={};e.schema.forEach(i=>{i.extra!=="auto_increment"&&(i.name==="status"?C[i.name]="active":i.default!==void 0&&i.default!==null?C[i.name]=i.default:C[i.name]=P(i.type,i.nullable))}),f.value=C,D.value={...C},p.value=!1}function P(C,i=!0){const o=C.toUpperCase();return i?null:o.includes("INT")||o.includes("DECIMAL")||o.includes("FLOAT")?0:o.includes("BOOL")?!1:o.includes("DATE")||o.includes("TIME")||o.includes("JSON")?null:""}async function fe(){if(!(!V.value||c.value)){c.value=!0;try{if(ae(),Object.keys(k.value).length>0)return;const C=Object.fromEntries(Object.entries(f.value).filter(([i,o])=>{var T;const r=(T=e.schema)==null?void 0:T.find(S=>S.name===i);return r?r.extra==="auto_increment"||te(r)&&(o==null||o==="")||r.name==="created_at"?!1:r.nullable?o!=null&&o!=="":!0:!0}));t("submit",C),p.value=!1,re()}catch(C){console.error("Error creating record:",C)}finally{c.value=!1}}}function ae(){k.value={},e.schema&&e.schema.forEach(C=>{if(C.extra==="auto_increment")return;const i=f.value[C.name];if(!C.nullable&&!te(C)&&(i==null||i==="")&&(k.value[C.name]=`${C.name} is required`),i!=null&&i!==""){const o=z(C,i);o&&(k.value[C.name]=o)}})}function z(C,i){const o=C.type.toUpperCase();if(o.includes("INT")){const r=Number(i);if(isNaN(r)||!Number.isInteger(r))return"Must be a valid integer"}if(o.includes("DECIMAL")||o.includes("FLOAT")){const r=Number(i);if(isNaN(r))return"Must be a valid number"}return o.includes("EMAIL")&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)?"Must be a valid email address":null}function J(C,i){f.value[C]=i,k.value[C]&&delete k.value[C],p.value=JSON.stringify(f.value)!==JSON.stringify(D.value)}function re(){p.value?x.value=!0:ge()}function ge(){L.value=!1,x.value=!1,t("close"),setTimeout(()=>{f.value={},D.value={},k.value={},p.value=!1},100)}return Fe(L,C=>{C&&(h(),U())}),(C,i)=>{const o=qe,r=vt;return s(),I(_e,null,[m(r,{open:L.value,"onUpdate:open":i[0]||(i[0]=T=>L.value=T),title:O.value,close:!1,side:"right",class:"w-full max-w-2xl",ui:{footer:"justify-end"}},{body:b(()=>[g.value?(s(),I("div",ps,[m(o,{name:"i-lucide-loader-2",class:"animate-spin"}),i[3]||(i[3]=a("span",{class:"ml-2"},"Loading form...",-1))])):C.schema?(s(),I("div",fs,[a("div",vs,[a("div",gs,[m(o,{name:"i-lucide-info",class:"text-blue-500 mt-0.5 mr-2"}),i[5]||(i[5]=a("div",{class:"text-sm text-blue-700"},[a("p",{class:"font-medium"},"Creating a new record"),a("p",{class:"mt-1"}," Fill in the required fields below. Fields marked with an asterisk (*) are required. ")],-1))])]),a("form",{onSubmit:Le(fe,["prevent"])},[(s(!0),I(_e,null,$e(N.value,T=>(s(),q(oa,{key:T.title,title:T.title,collapsible:!1},{default:b(()=>[a("div",bs,[(s(!0),I(_e,null,$e(T.fields,S=>(s(),q(na,{key:S.name,column:S,value:f.value[S.name],error:k.value[S.name],disabled:!1,"is-foreign-key":Z(S),"foreign-key-config":u.value[S.name],"search-fk-options":B=>y(S.name,B),"onUpdate:value":B=>J(S.name,B)},null,8,["column","value","error","is-foreign-key","foreign-key-config","search-fk-options","onUpdate:value"]))),128))])]),_:2},1032,["title"]))),128))],32)])):(s(),I("div",ms,[m(o,{name:"i-lucide-alert-circle",class:"mx-auto mb-2"}),i[4]||(i[4]=a("p",null,"No schema available for this table",-1))]))]),footer:b(()=>[m(ia,{readonly:!1,"is-editing":!1,"is-saving":c.value,"is-valid":V.value,"has-changes":p.value,onSave:fe,onCancel:re},null,8,["is-saving","is-valid","has-changes"])]),_:1},8,["open","title"]),m(ft,{open:x.value,"onUpdate:open":i[1]||(i[1]=T=>x.value=T),ModalTitle:"Unsaved Changes",ModalContent:"You have unsaved changes. Closing without saving will discard these changes.","modal-confirm-text":"Discard Changes","modal-cancel-text":"Continue Editing",onConfirm:ge,onClose:i[2]||(i[2]=T=>x.value=!1)},null,8,["open"])],64)}}}),hs={class:"pt-4"},_s={class:"flex items-center justify-between mb-4"},xs={key:0,class:"flex justify-center py-8"},Cs={key:1,class:"space-y-6"},ws={key:0},ks={class:"space-y-3 max-h-96 overflow-y-auto"},Ss={class:"flex items-start justify-between"},$s={class:"flex-1"},Is={class:"flex items-center gap-3 mb-2"},Vs={class:"text-sm font-medium"},Es={class:"text-xs text-gray-500"},Ts={key:0,class:"text-xs text-gray-600 dark:text-gray-400 space-y-1"},Us={key:0},Fs={key:1},Ds={class:"ml-3 mt-1 space-y-0.5"},Ls={key:1},As={class:"space-y-2 max-h-48 overflow-y-auto"},Rs={class:"flex items-center justify-between"},Os={class:"text-sm font-medium"},zs={class:"text-xs text-gray-500"},Ns={key:2,class:"text-center py-8 text-gray-500"},Bs={key:3,class:"text-center pt-4"},Ms={key:2,class:"text-center py-8 text-gray-500"},qs={class:"flex items-center justify-between"},js={key:0,class:"space-y-6"},Ks={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg"},Ps={class:"text-sm"},Hs={key:0},Gs={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg"},Ys={class:"text-sm space-y-1"},Ws={class:"bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4"},Js={class:"flex items-start gap-3"},Qs={class:"flex justify-end gap-3"},Xs=ye({__name:"SchemaHistoryView",props:{tableName:{}},emits:["reverted"],setup(E,{expose:R,emit:e}){const t=He(),d=at(),g=E,c=e,p=A(null),x=A(!1),f=A(!1),D=A(null),k=A(!1),u=A(null),L=A({limit:25,offset:0}),O=async()=>{if(g.tableName){x.value=!0;try{const y=await t.getSchemaHistory(g.tableName,L.value);p.value=y}catch(y){d.error({title:"Failed to load history",description:y.message||"Unable to fetch schema history"})}finally{x.value=!1}}},V=async y=>{D.value=y,f.value=!0;try{const U=await t.revertSchemaChange(y.id,!1);u.value=U,k.value=!0}catch(U){d.error({title:"Failed to preview revert",description:U.message||"Unable to generate revert preview"})}finally{f.value=!1}},N=async()=>{if(D.value){f.value=!0;try{const y=await t.revertSchemaChange(D.value.id,!0);d.success({title:"Schema reverted",description:"Successfully reverted schema change"}),c("reverted",y),k.value=!1,D.value=null,await O()}catch(y){d.error({title:"Revert failed",description:y.message||"Failed to revert schema change"})}finally{f.value=!1}}},Z=y=>{switch(y.toLowerCase()){case"info":return"text-blue-600";case"warning":return"text-yellow-600";case"error":return"text-red-600";default:return"text-gray-600"}},te=y=>new Date(y).toLocaleString(),h=async()=>{L.value.offset+=L.value.limit,await O()},M=async()=>{L.value={limit:25,offset:0},p.value=null,await O()};return Fe(()=>g.tableName,y=>{y&&M()},{immediate:!0}),R({refreshHistory:M}),(y,U)=>{var J,re,ge,C,i;const P=Qe,fe=qe,ae=Ga,z=Pt;return s(),I("div",hs,[a("div",_s,[U[4]||(U[4]=a("h3",{class:"text-sm font-medium"},"Schema History",-1)),m(P,{size:"sm",variant:"outline",icon:"i-lucide-refresh-cw",loading:x.value,onClick:M},{default:b(()=>U[3]||(U[3]=[de(" Refresh ")])),_:1,__:[3]},8,["loading"])]),x.value&&!p.value?(s(),I("div",xs,[m(fe,{name:"i-lucide-loader-2",class:"animate-spin h-6 w-6"})])):p.value?(s(),I("div",Cs,[(J=p.value.schema_changes)!=null&&J.length?(s(),I("div",ws,[U[8]||(U[8]=a("h4",{class:"text-sm font-medium mb-3"},"Schema Changes",-1)),a("div",ks,[(s(!0),I(_e,null,$e(p.value.schema_changes,o=>{var r;return s(),I("div",{key:o.id,class:"border rounded-lg p-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[a("div",Ss,[a("div",$s,[a("div",Is,[a("span",Vs,G(o.action),1),a("span",{class:ne([Z(o.severity),"text-xs font-medium px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-800"])},G(o.severity),3),a("span",Es,G(te(o.created_at)),1)]),o.context?(s(),I("div",Ts,[o.context.table?(s(),I("div",Us,[U[5]||(U[5]=a("span",{class:"font-medium"},"Table:",-1)),de(" "+G(o.context.table),1)])):W("",!0),o.context.changes_applied?(s(),I("div",Fs,[U[6]||(U[6]=a("span",{class:"font-medium"},"Changes:",-1)),a("ul",Ds,[(s(!0),I(_e,null,$e(o.context.changes_applied,T=>(s(),I("li",{key:T}," â¢ "+G(T),1))),128))])])):W("",!0)])):W("",!0)]),m(P,{variant:"outline",size:"xs",icon:"i-lucide-undo",loading:f.value&&((r=D.value)==null?void 0:r.id)===o.id,onClick:T=>V(o)},{default:b(()=>U[7]||(U[7]=[de(" Revert ")])),_:2,__:[7]},1032,["loading","onClick"])])])}),128))])])):W("",!0),(re=p.value.migrations)!=null&&re.length?(s(),I("div",Ls,[U[9]||(U[9]=a("h4",{class:"text-sm font-medium mb-3"},"Related Migrations",-1)),a("div",As,[(s(!0),I(_e,null,$e(p.value.migrations,o=>(s(),I("div",{key:o.migration,class:"border rounded-lg p-3"},[a("div",Rs,[a("div",null,[a("div",Os,G(o.migration),1),a("div",zs," Batch "+G(o.batch)+" â¢ "+G(te(o.executed_at)),1)])])]))),128))])])):W("",!0),!((ge=p.value.schema_changes)!=null&&ge.length)&&!((C=p.value.migrations)!=null&&C.length)?(s(),I("div",Ns,[m(fe,{name:"i-lucide-clock",class:"mx-auto mb-2 w-8 h-8 text-gray-400"}),U[10]||(U[10]=a("p",{class:"text-sm"},"No schema history found for this table",-1))])):W("",!0),((i=p.value.schema_changes)==null?void 0:i.length)>=L.value.limit?(s(),I("div",Bs,[m(P,{variant:"outline",size:"sm",loading:x.value,onClick:h},{default:b(()=>U[11]||(U[11]=[de(" Load More ")])),_:1,__:[11]},8,["loading"])])):W("",!0)])):(s(),I("div",Ms,[m(fe,{name:"i-lucide-database",class:"mx-auto mb-2 w-8 h-8 text-gray-400"}),U[12]||(U[12]=a("p",{class:"text-sm"},"No schema history available",-1))])),k.value?(s(),q(z,{key:3,open:k.value,"onUpdate:open":U[2]||(U[2]=o=>k.value=o),class:"max-w-4xl"},{default:b(()=>[m(ae,null,{header:b(()=>[a("div",qs,[U[13]||(U[13]=a("h3",{class:"text-lg font-semibold"},"Revert Preview",-1)),m(P,{variant:"ghost",icon:"i-lucide-x",onClick:U[0]||(U[0]=o=>k.value=!1)})])]),footer:b(()=>[a("div",Qs,[m(P,{variant:"outline",onClick:U[1]||(U[1]=o=>k.value=!1)},{default:b(()=>U[19]||(U[19]=[de(" Cancel ")])),_:1,__:[19]}),m(P,{color:"error",loading:f.value,onClick:N},{default:b(()=>U[20]||(U[20]=[de(" Confirm Revert ")])),_:1,__:[20]},8,["loading"])])]),default:b(()=>{var o,r,T;return[u.value?(s(),I("div",js,[a("div",null,[U[16]||(U[16]=a("h4",{class:"font-medium mb-2"},"Original Change",-1)),a("div",Ks,[a("div",Ps,[a("div",null,[U[14]||(U[14]=a("span",{class:"font-medium"},"Action:",-1)),de(" "+G((o=u.value.original_change)==null?void 0:o.action),1)]),a("div",null,[U[15]||(U[15]=a("span",{class:"font-medium"},"Date:",-1)),de(" "+G(te((r=u.value.original_change)==null?void 0:r.created_at)),1)])])])]),(T=u.value.revert_operations)!=null&&T.length?(s(),I("div",Hs,[U[17]||(U[17]=a("h4",{class:"font-medium mb-2"},"Revert Operations",-1)),a("div",Gs,[a("ul",Ys,[(s(!0),I(_e,null,$e(u.value.revert_operations,S=>(s(),I("li",{key:S}," â¢ "+G(S),1))),128))])])])):W("",!0),a("div",Ws,[a("div",Js,[m(fe,{name:"i-lucide-alert-triangle",class:"text-yellow-600 mt-0.5"}),U[18]||(U[18]=a("div",{class:"text-sm"},[a("div",{class:"font-medium text-yellow-800 dark:text-yellow-200 mb-1"}," Warning: This action cannot be undone "),a("div",{class:"text-yellow-700 dark:text-yellow-300"}," Reverting this schema change will modify your table structure. Make sure you have a backup before proceeding. ")],-1))])])])):W("",!0)]}),_:1})]),_:1},8,["open"])):W("",!0)])}}}),Zs={class:"space-y-4"},en={class:"mt-6"},tn={class:"pt-4"},an={class:"flex items-center justify-between mb-3"},ln={key:0,class:"text-sm text-gray-500 text-center py-4 border rounded-md"},sn={class:"flex items-center w-full"},nn={class:"flex items-center justify-center px-2 cursor-move drag-handle"},on={class:"flex flex-1 items-center justify-between"},rn={class:"font-medium truncate max-w-[180px]"},dn={key:0,class:"ml-1 text-xs text-amber-600"},un={key:1,class:"ml-1 text-xs text-red-600"},cn={class:"text-xs text-gray-500 mr-2"},pn={class:"p-3 pt-0"},mn={class:"flex-1"},fn={class:"grid grid-cols-2 gap-4 mb-4"},vn={class:"flex flex-wrap gap-4"},gn={class:"pt-4"},bn={class:"flex items-center justify-between mb-3"},yn={key:0,class:"text-sm text-gray-500 text-center py-4 border rounded-md"},hn={key:1,class:"space-y-3"},_n={class:"flex items-center w-full"},xn={class:"flex flex-1 items-center justify-between"},Cn={class:"text-xs text-gray-500 mr-2"},wn={key:0,class:"ml-1 text-xs text-amber-600"},kn={key:1,class:"ml-1 text-xs text-red-600"},Sn={class:"p-3 pt-0"},$n={class:"space-y-3"},In={class:"grid grid-cols-2 gap-4"},Vn={class:"pt-4"},En={class:"flex items-center justify-between mb-4"},Tn={key:0,class:"text-sm text-gray-500 text-center py-8 border rounded-md"},Un={key:1,class:"space-y-6"},Fn={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Dn={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg"},Ln={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg"},An={class:"font-medium text-lg"},Rn={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg"},On={class:"font-medium text-lg"},zn={key:0},Nn={class:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-auto max-h-64"},Bn={key:1,class:"bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4"},Mn={class:"font-medium text-yellow-800 dark:text-yellow-200 mb-2 flex items-center"},qn={class:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1"},jn={class:"bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-lg p-4"},Kn={class:"font-medium text-blue-800 dark:text-blue-200 mb-2 flex items-center"},Pn={class:"text-sm text-blue-700 dark:text-blue-300 space-y-1"},Hn={key:0},Gn={key:1},Yn={key:2},Wn={key:3},Jn={key:4},Qn={key:5},Xn={class:"pt-4"},Zn={class:"flex items-center justify-between mb-3"},eo={key:0,class:"text-sm text-gray-500 text-center py-4 border rounded-md"},to={key:1,class:"space-y-3"},ao={class:"flex items-center w-full"},lo={class:"flex flex-1 items-center justify-between"},so={class:"text-xs text-gray-500 mr-2"},no={key:0,class:"ml-1 text-xs text-amber-600"},oo={key:1,class:"ml-1 text-xs text-red-600"},io={class:"p-3 pt-0"},ro={class:"space-y-3"},uo={class:"flex justify-end gap-2"},co={class:"space-y-4"},po={key:0,class:"space-y-2"},mo={class:"list-disc pl-5 space-y-1"},fo={key:1,class:"space-y-2"},vo={class:"list-disc pl-5 space-y-1"},go={key:2,class:"space-y-2"},bo={class:"list-disc pl-5 space-y-1"},yo=ye({__name:"EditTableSlideover",props:{open:{type:Boolean,default:!1},submitting:{type:Boolean,default:!1},slideoverTitle:{type:String,default:"Edit Table"},columnData:{type:Array,default:()=>[]},tableName:{type:String,default:""}},emits:["update:open","close","submit","update:submitting"],setup(E,{emit:R}){const e=E,t=at(),d=A(!1),g=A(!1),c=A(!1),p=A({deletedColumns:[],deletedIndexes:[],deletedForeignKeys:[]}),x=ee(()=>`${e.slideoverTitle} | ${Ba.value.toUpperCase()}`),f=R,D=He(),k=ee({get:()=>e.open,set:v=>f("update:open",v)}),u=ee({get:()=>e.submitting,set:v=>f("update:submitting",v)}),L=A(e.tableName||""),O=A(void 0),V=A([]),N=A([]),Z=A([]),te=A({}),h=A({}),M=A({}),y=A([]),U=A([]),P=A([]),fe=ee(()=>L.value.trim()!==""&&!O.value&&V.value.length>0&&V.value.every(v=>v.name.trim()!==""&&!v.nameError)),ae=ee(()=>V.value.some(v=>{var n;return(n=v.options)==null?void 0:n.primary})),z=ee(()=>V.value.length>0&&V.value.some(v=>v.name.trim()!==""));function J(v,n){if(!v.trim())return"Column name is required";if(!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(v))return"Column must start with letter or underscore and contain only letters, numbers, and underscores";if(Bt.includes(v.toLowerCase()))return"Column name cannot be a reserved SQL keyword"}function re(v){return J(v)}function ge(v){if(!v.trim())return"Table name is required";if(!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(v))return"Table name must start with letter or underscore and contain only letters, numbers, and underscores";if(Bt.includes(v.toLowerCase()))return"Table name cannot be a reserved SQL keyword";if(e.tableName&&v.toLowerCase()===e.tableName.toLowerCase())return;if(D.tables.some(ue=>typeof ue=="string"?ue.toLowerCase()===v.toLowerCase():ue&&typeof ue=="object"&&ue.name?ue.name.toLowerCase()===v.toLowerCase():!1))return`Table '${v}' already exists in the database`}function C(){if(!e.columnData||e.columnData.length===0)return;V.value=[],N.value=[],Z.value=[];const v=new Map;e.columnData.forEach((n,X)=>{var De;let ue=n.type,F=null;const w=n.type.match(/([a-zA-Z]+)\(([^)]+)\)/);w&&(ue=w[1].toUpperCase(),F=w[2]);const Ve={name:n.name,type:ue.toUpperCase(),options:{length:F,nullable:n.nullable,primary:n.is_primary,autoIncrement:(De=n.extra)==null?void 0:De.includes("auto_increment"),default:n.default},nameError:void 0,disabled:!0,deleted:!1};V.value.push(Ve),te.value[X]=!1,n.indexes&&n.indexes.length>0&&n.indexes.forEach(Ce=>{if(Ce.name==="PRIMARY"||Ce.type==="PRIMARY KEY")return;const Ae=Ce.name;if(!v.has(Ae)){let Ne="INDEX";Ce.type==="UNIQUE"&&(Ne="UNIQUE"),v.set(Ae,{type:Ne,column:n.name,name:Ce.name})}}),n.relationships&&n.relationships.length>0&&n.relationships.forEach(Ce=>{const Ae={column:Ce.column,references:Ce.references_column||"id",on:Ce.references_table||"",constraint:Ce.constraint,on_update:Ce.on_update,on_delete:Ce.on_delete,disabled:!0};Z.value.push(Ae),Ce.references_table&&Te(Ce.references_table)})}),v.forEach(n=>{N.value.push({type:n.type==="PRIMARY KEY"?"PRIMARY KEY":n.type,column:n.column,disabled:!0})})}function i(){const v=V.value.length,n=V.value.length===0;V.value.push({name:"",type:"INT",options:{length:"11",nullable:!n,primary:n,autoIncrement:n},nameError:void 0}),te.value[v]=!0}function o(v){const n=V.value[v];if(n.disabled&&n.name)y.value.push(n.name),V.value[v].deleted=!0;else{V.value.splice(v,1);const X={};V.value.forEach((ue,F)=>{X[F]=te.value[F<v?F:F+1]||!1}),te.value=X}}function r(v){const n=V.value[v];if(n.disabled&&n.name){const X=y.value.indexOf(n.name);X!==-1&&y.value.splice(X,1)}V.value[v].deleted=!1}function T(){N.value.push({type:"INDEX",column:V.value.length>0?V.value[0].name:""})}function S(v){const n=N.value[v];if(n.disabled&&n.column)U.value.push(n.column),N.value[v].deleted=!0;else{N.value.splice(v,1);const X={};N.value.forEach((ue,F)=>{X[F]=h.value[F<v?F:F+1]||!1}),h.value=X}}function B(v){const n=N.value[v];if(n.disabled&&n.column){const X=U.value.indexOf(n.column);X!==-1&&U.value.splice(X,1)}N.value[v].deleted=!1}function H(){Z.value.push({column:V.value.length>0?V.value[0].name:"",references:"id",on:""})}function le(v){const n=Z.value[v];if(n.disabled&&n.constraint)P.value.push(n.constraint),Z.value[v].deleted=!0;else{Z.value.splice(v,1);const X={};Z.value.forEach((ue,F)=>{X[F]=M.value[F<v?F:F+1]||!1}),M.value=X}}function ie(v){const n=Z.value[v];if(n.disabled&&n.constraint){const X=P.value.indexOf(n.constraint);X!==-1&&P.value.splice(X,1)}Z.value[v].deleted=!1}function he(){c.value?d.value=!0:ze()}function ze(){k.value=!1,d.value=!1,f("close"),setTimeout(()=>{L.value="",O.value=void 0,V.value=[],N.value=[],Z.value=[],te.value={},h.value={},M.value={},y.value=[],U.value=[],P.value=[],c.value=!1},100)}async function Me(){if(!fe.value||(O.value=ge(L.value),V.value.forEach(n=>{n.nameError=re(n.name)}),O.value||V.value.some(n=>n.nameError)))return;if(y.value.length>0||U.value.length>0||P.value.length>0||V.value.some(n=>n.disabled&&n.deleted)||N.value.some(n=>n.disabled&&n.deleted)||Z.value.some(n=>n.disabled&&n.deleted)){const n=new Set([...y.value,...V.value.filter(F=>F.disabled&&F.deleted).map(F=>F.name)]),X=new Set([...U.value,...N.value.filter(F=>F.disabled&&F.deleted).map(F=>F.column)]),ue=new Set([...P.value,...Z.value.filter(F=>F.disabled&&F.deleted&&F.constraint).map(F=>F.constraint)]);p.value={deletedColumns:Array.from(n),deletedIndexes:Array.from(X),deletedForeignKeys:Array.from(ue)},g.value=!0;return}Q()}async function Q(){u.value=!0;const v={table_name:L.value.trim(),columns:V.value.filter(n=>!n.disabled&&!n.deleted).map(n=>{let X=n.type;bt(n.type)&&n.options.length&&(X=`${n.type}(${n.options.length})`);const ue=n.options.autoIncrement&&kt(n.type)?Mt():void 0;return{name:n.name.trim(),type:X,options:{nullable:n.options.nullable?"NULL":"NOT NULL",primary:n.options.primary?"PRIMARY KEY":void 0,autoIncrement:ue,default:n.options.default||void 0}}})};if(N.value.length>0){const n=N.value.filter(X=>X.column&&!X.disabled);n.length>0&&(v.indexes=n.map(X=>({type:X.type,column:X.column})))}if(Z.value.length>0){const n=Z.value.filter(X=>X.column&&X.references&&X.on&&!X.disabled);n.length>0&&(v.foreign_keys=n.map(X=>({column:X.column,references:X.references,on:X.on})))}y.value.length>0&&(v.deleted_columns=y.value),U.value.length>0&&(v.deleted_indexes=U.value),P.value.length>0&&(v.deleted_foreign_keys=P.value),console.log("Update Table Request:",v);try{const n=await D.updateTableSchema(v);if(!n.success)throw new Error("Failed to update table schema");f("submit",n)}catch(n){t.error({title:"Update Failed",description:n.message||"Failed to update table. Please try again."}),console.error("Error updating table schema:",n)}u.value=!1,he()}function ce(){g.value=!1}Fe(V,v=>{v.forEach(n=>{if(n.name){const X=Nt(n.name);X!==n.name&&(n.name=X)}n.nameError=re(n.name)})},{deep:!0}),Fe(L,v=>{if(v){const n=Nt(v);n!==v&&(L.value=n)}O.value=ge(v)}),Fe(k,v=>{v&&(L.value=e.tableName||"",c.value=!1,e.columnData&&e.columnData.length>0&&C())}),Fe(u,v=>{f("update:submitting",v)});const me=A(null);Fe(me,v=>{v&&Ma(v,V,{animation:150,handle:".drag-handle",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",onEnd:()=>{const n={};V.value.forEach((X,ue)=>{n[ue]=te.value[ue]||!1}),te.value=n}})});const we=A(!1),Ie=A(null);async function K(){if(!be()){t.error({title:"No changes",description:"No schema changes to preview"});return}we.value=!0;try{const v=[];V.value.filter(w=>!w.disabled&&!w.deleted).forEach(w=>{let Ve=w.type;bt(w.type)&&w.options.length&&(Ve=`${w.type}(${w.options.length})`);const De=w.options.autoIncrement&&kt(w.type)?Mt():void 0;v.push({type:"add_column",column_name:w.name.trim(),column_type:Ve,options:{nullable:w.options.nullable?"NULL":"NOT NULL",primary:w.options.primary?"PRIMARY KEY":void 0,autoIncrement:De,default:w.options.default||void 0}})}),N.value.filter(w=>w.column&&!w.disabled&&!w.deleted).forEach(w=>{v.push({type:"add_index",index_name:`idx_${L.value}_${w.column}`,columns:[w.column],index_type:w.type})}),Z.value.filter(w=>w.column&&w.references&&w.on&&!w.disabled&&!w.deleted).forEach(w=>{v.push({type:"add_foreign_key",column_name:w.column,references_table:w.on,references_column:w.references})}),[...y.value,...V.value.filter(w=>w.disabled&&w.deleted).map(w=>w.name)].forEach(w=>{v.push({type:"drop_column",column_name:w})}),[...U.value,...N.value.filter(w=>w.disabled&&w.deleted).map(w=>w.column)].forEach(w=>{v.push({type:"drop_index",index_name:w})}),[...P.value,...Z.value.filter(w=>w.disabled&&w.deleted&&w.constraint).map(w=>w.constraint)].forEach(w=>{v.push({type:"drop_foreign_key",constraint_name:w})});const F=await D.previewSchemaChanges(L.value,v);Ie.value=F,t.success({title:"Preview generated",description:"SQL preview has been generated successfully"})}catch(v){t.error({title:"Preview failed",description:v.message||"Failed to generate SQL preview"})}finally{we.value=!1}}function _(v){switch(v==null?void 0:v.toLowerCase()){case"low":return"text-green-600";case"medium":return"text-yellow-600";case"high":return"text-red-600";default:return"text-gray-600"}}const Y=A([{label:"Columns",icon:"i-lucide-columns",slot:"columns-tab"},{label:"Indexes",icon:"i-lucide-hash",slot:"indexes-tab"},{label:"Foreign Keys",icon:"i-lucide-network",slot:"foreign-keys-tab"},{label:"SQL",icon:"i-lucide-eye",slot:"sql-preview-tab"},{label:"History",icon:"i-lucide-history",slot:"schema-history-tab"}]),j=ee(()=>!D.tables||!Array.isArray(D.tables)||D.tables.length===0?[]:D.tables.map(v=>{const n=typeof v=="string"||v&&typeof v=="object"&&v?v:"";return{label:n,value:n}}).filter(v=>v.value!=="")),xe=ee(()=>z.value&&j.value.length>0),se=A({});async function Te(v){if(!(!v||v.trim()==="")){se.value[v]?(se.value[v].isLoading=!0,se.value[v].error=void 0):se.value[v]={columns:[],isLoading:!0,error:void 0};try{const n=await D.fetchTableColumns(v),X=n?n.columns||n:[];if(Array.isArray(X))se.value[v]={columns:X.map(ue=>{const F=ue.name||ue;return{label:typeof F=="string"?`${F}`:F,value:typeof F=="string"?F:String(F)}}),isLoading:!1,error:void 0};else throw new Error("Invalid column data format")}catch(n){console.error("Error fetching columns:",n),se.value[v]={columns:[],isLoading:!1,error:(n==null?void 0:n.message)||"Failed to load columns"}}}}function ke(v,n){const X=v?String(v):null;X&&(Z.value[n].references="",Te(X))}Fe([V,N,Z,y,U,P],()=>{c.value=be()},{deep:!0});function be(){const v=V.value.some(w=>!w.disabled),n=N.value.some(w=>!w.disabled),X=Z.value.some(w=>!w.disabled),ue=y.value.length>0||U.value.length>0||P.value.length>0,F=V.value.some(w=>w.disabled&&w.deleted)||N.value.some(w=>w.disabled&&w.deleted)||Z.value.some(w=>w.disabled&&w.deleted);return v||n||X||ue||F}return(v,n)=>{const X=ut,ue=st,F=Qe,w=qe,Ve=$t,De=dt,Ce=qa,Ae=Ha,Ne=vt,Ue=ft;return s(),I(_e,null,[m(Ne,{open:k.value,"onUpdate:open":n[2]||(n[2]=$=>k.value=$),title:x.value,close:!1,side:"right",class:"w-full max-w-2xl",ui:{footer:"justify-end"}},{body:b(()=>[a("div",Zs,[a("form",{onSubmit:Le(Me,["prevent"])},[m(ue,{label:"Table Name",name:"tableName",required:"",error:O.value},{default:b(()=>[m(X,{modelValue:L.value,"onUpdate:modelValue":n[0]||(n[0]=$=>L.value=$),placeholder:"Enter table name",disabled:!0,autofocus:"",class:"w-full",status:O.value?"error":void 0},null,8,["modelValue","status"])]),_:1},8,["error"]),a("div",en,[m(Ae,{items:Y.value,class:"w-full",variant:"link"},{"columns-tab":b(()=>[a("div",tn,[a("div",an,[n[7]||(n[7]=a("h3",{class:"text-sm font-medium"},"Columns",-1)),m(F,{size:"xs",color:"neutral",variant:"soft",icon:"i-lucide-plus",onClick:i,disabled:u.value},{default:b(()=>n[6]||(n[6]=[de(" Add Column ")])),_:1,__:[6]},8,["disabled"])]),V.value.length===0?(s(),I("div",ln,' No columns added yet. Click "Add Column" to add one. ')):(s(),I("div",{key:1,class:"space-y-3",ref_key:"columnsContainer",ref:me},[(s(!0),I(_e,null,$e(V.value,($,Ee)=>(s(),I("div",{key:Ee,class:ne(["border rounded-md",{"border-gray-300":$.deleted}])},[m(Ce,{open:te.value[Ee],"onUpdate:open":oe=>te.value[Ee]=oe,class:"w-full"},{content:b(()=>[a("div",pn,[a("div",mn,[m(ue,{label:"Column Name",class:"mb-4",required:!0,error:$.nameError},{default:b(()=>[m(X,{modelValue:$.name,"onUpdate:modelValue":oe=>$.name=oe,placeholder:"Column name",disabled:u.value||$.disabled||$.deleted,class:ne(["w-full",{"bg-gray-100 dark:bg-gray-800":$.disabled||$.deleted}]),status:$.nameError?"error":void 0},null,8,["modelValue","onUpdate:modelValue","disabled","status","class"])]),_:2},1032,["error"]),a("div",fn,[m(ue,{label:"Type"},{default:b(()=>[m(Ve,{modelValue:$.type,"onUpdate:modelValue":oe=>$.type=oe,items:l(ja),disabled:u.value||$.disabled||$.deleted,placeholder:"Select type",class:ne(["w-full",{"bg-gray-100 dark:bg-gray-800":$.disabled||$.deleted}])},null,8,["modelValue","onUpdate:modelValue","items","disabled","class"])]),_:2},1024),m(ue,{label:"Length"},{default:b(()=>[m(X,{modelValue:$.options.length,"onUpdate:modelValue":oe=>$.options.length=oe,placeholder:"255",type:"number",min:"1",disabled:u.value||!l(bt)($.type)||$.disabled||$.deleted,class:ne(["w-full",{"bg-gray-100 dark:bg-gray-800":$.disabled||$.deleted}])},null,8,["modelValue","onUpdate:modelValue","disabled","class"])]),_:2},1024)]),a("div",vn,[m(De,{modelValue:$.options.nullable,"onUpdate:modelValue":oe=>$.options.nullable=oe,label:"Nullable",disabled:u.value||$.disabled||$.deleted},null,8,["modelValue","onUpdate:modelValue","disabled"]),m(De,{modelValue:$.options.primary,"onUpdate:modelValue":oe=>$.options.primary=oe,label:"Primary",disabled:u.value||ae.value&&!$.options.primary||$.disabled||$.deleted},null,8,["modelValue","onUpdate:modelValue","disabled"]),m(De,{modelValue:$.options.autoIncrement,"onUpdate:modelValue":oe=>$.options.autoIncrement=oe,label:"Auto Increment",disabled:u.value||!$.options.primary||!l(kt)($.type)||$.disabled||$.deleted},null,8,["modelValue","onUpdate:modelValue","disabled"])])]),m(ue,{label:"Default Value",class:"mt-4"},{default:b(()=>[m(X,{modelValue:$.options.default,"onUpdate:modelValue":oe=>$.options.default=oe,placeholder:"Default value",disabled:u.value||$.disabled||$.deleted,class:ne(["w-full",{"bg-gray-100 dark:bg-gray-800":$.disabled||$.deleted}])},null,8,["modelValue","onUpdate:modelValue","disabled","class"])]),_:2},1024)])]),default:b(()=>[a("div",sn,[a("div",nn,[m(w,{name:"i-lucide-grip-vertical",class:"text-gray-400 hover:text-gray-600"})]),m(F,{class:ne(["group flex-1 flex items-center justify-between p-3 text-left",{"opacity-60":$.deleted}]),color:"neutral",variant:"ghost","trailing-icon":"i-lucide-settings-2",ui:{trailingIcon:"group-data-[state=open]:rotate-90 transition-transform duration-200"}},{default:b(()=>[a("div",on,[a("div",rn,[de(G($.name||"New Column")+" ",1),$.disabled?(s(),I("span",dn,"(existing)")):W("",!0),$.deleted?(s(),I("span",un,"(deleted)")):W("",!0)]),a("div",cn,G($.type)+G(l(bt)($.type)?`(${$.options.length})`:"")+" "+G($.options.primary?"â¢ Primary":"")+" "+G($.options.nullable?"â¢ Nullable":"â¢ NOT NULL"),1)])]),_:2},1032,["class"]),$.deleted?(s(),q(F,{key:1,color:"success",variant:"ghost",icon:"i-tabler-restore",size:"sm",class:"mr-2",onClick:Le(oe=>r(Ee),["stop"]),disabled:u.value},null,8,["onClick","disabled"])):(s(),q(F,{key:0,color:"error",variant:"ghost",icon:"i-lucide-trash-2",size:"sm",class:"mr-2",onClick:Le(oe=>o(Ee),["stop"]),disabled:u.value},null,8,["onClick","disabled"]))])]),_:2},1032,["open","onUpdate:open"])],2))),128))],512))])]),"indexes-tab":b(()=>[a("div",gn,[a("div",bn,[n[9]||(n[9]=a("h3",{class:"text-sm font-medium"},"Indexes",-1)),m(F,{size:"xs",color:"neutral",variant:"soft",icon:"i-lucide-plus",onClick:T,disabled:u.value||!z.value},{default:b(()=>n[8]||(n[8]=[de(" Add Index ")])),_:1,__:[8]},8,["disabled"])]),N.value.length===0?(s(),I("div",yn,' No indexes added yet. Click "Add Index" to add one. ')):(s(),I("div",hn,[(s(!0),I(_e,null,$e(N.value,($,Ee)=>(s(),I("div",{key:Ee,class:ne(["border rounded-md",{"border-gray-300":$.deleted}])},[m(Ce,{open:h.value[Ee],"onUpdate:open":oe=>h.value[Ee]=oe,class:"w-full"},{content:b(()=>[a("div",Sn,[a("div",$n,[a("div",In,[m(ue,{label:"Type"},{default:b(()=>[m(Ve,{modelValue:$.type,"onUpdate:modelValue":oe=>$.type=oe,items:[{label:"Regular Index",value:"INDEX"},{label:"Unique Index",value:"UNIQUE"}],disabled:u.value||$.disabled,class:ne(["w-full",{"bg-gray-100 dark:bg-gray-800":$.disabled}])},null,8,["modelValue","onUpdate:modelValue","disabled","class"])]),_:2},1024),m(ue,{label:"Column"},{default:b(()=>[m(Ve,{modelValue:$.column,"onUpdate:modelValue":oe=>$.column=oe,items:V.value.map(oe=>({label:oe.name,value:oe.name})),disabled:u.value||V.value.length===0||$.disabled,class:ne(["w-full",{"bg-gray-100 dark:bg-gray-800":$.disabled}])},null,8,["modelValue","onUpdate:modelValue","items","disabled","class"])]),_:2},1024)])])])]),default:b(()=>[a("div",_n,[m(F,{class:ne(["group flex-1 flex items-center justify-between p-3 text-left",{"opacity-60":$.deleted}]),color:"neutral",variant:"ghost","trailing-icon":"i-lucide-settings-2",ui:{trailingIcon:"group-data-[state=open]:rotate-90 transition-transform duration-200"}},{default:b(()=>[a("div",xn,[a("div",Cn,[de(G($.type)+" on "+G($.column)+" ",1),$.disabled?(s(),I("span",wn,"(existing)")):W("",!0),$.deleted?(s(),I("span",kn,"(deleted)")):W("",!0)])])]),_:2},1032,["class"]),$.deleted?(s(),q(F,{key:1,color:"success",variant:"ghost",icon:"i-tabler-restore",size:"sm",class:"mr-2",onClick:Le(oe=>B(Ee),["stop"]),disabled:u.value},null,8,["onClick","disabled"])):(s(),q(F,{key:0,color:"error",variant:"ghost",icon:"i-lucide-trash-2",size:"sm",class:"mr-2",onClick:Le(oe=>S(Ee),["stop"]),disabled:u.value},null,8,["onClick","disabled"]))])]),_:2},1032,["open","onUpdate:open"])],2))),128))]))])]),"sql-preview-tab":b(()=>{var $,Ee,oe,Ge,je,Ye,nt,ot,it;return[a("div",Vn,[a("div",En,[n[11]||(n[11]=a("h3",{class:"text-sm font-medium"},"SQL Preview",-1)),m(F,{loading:we.value,disabled:!be(),icon:"i-lucide-eye",size:"sm",onClick:K},{default:b(()=>n[10]||(n[10]=[de(" Generate Preview ")])),_:1,__:[10]},8,["loading","disabled"])]),be()?Ie.value?(s(),I("div",Un,[a("div",Fn,[a("div",Dn,[n[13]||(n[13]=a("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Risk Level",-1)),a("div",{class:ne([_(($=Ie.value.preview)==null?void 0:$.risk_level),"font-medium text-lg"])},G(((oe=(Ee=Ie.value.preview)==null?void 0:Ee.risk_level)==null?void 0:oe.toUpperCase())||"Unknown"),3)]),a("div",Ln,[n[14]||(n[14]=a("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Affected Data",-1)),a("div",An,G(((Ge=Ie.value.preview)==null?void 0:Ge.affected_data)||0)+" records ",1)]),a("div",Rn,[n[15]||(n[15]=a("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," Est. Execution Time ",-1)),a("div",On,G(((je=Ie.value.preview)==null?void 0:je.estimated_execution_time)||0)+"ms ",1)])]),(nt=(Ye=Ie.value.preview)==null?void 0:Ye.sql)!=null&&nt.length?(s(),I("div",zn,[n[16]||(n[16]=a("h5",{class:"font-medium mb-3"},"SQL Statements",-1)),a("div",Nn,[(s(!0),I(_e,null,$e(Ie.value.preview.sql,(pe,gt)=>(s(),I("pre",{key:gt,class:"mb-2 text-sm"},G(pe),1))),128))])])):W("",!0),(it=(ot=Ie.value.preview)==null?void 0:ot.warnings)!=null&&it.length?(s(),I("div",Bn,[a("h5",Mn,[m(w,{name:"i-lucide-alert-triangle",class:"w-4 h-4 mr-2"}),n[17]||(n[17]=de(" Warnings "))]),a("ul",qn,[(s(!0),I(_e,null,$e(Ie.value.preview.warnings,pe=>(s(),I("li",{key:pe}," â¢ "+G(pe),1))),128))])])):W("",!0),a("div",jn,[a("h5",Kn,[m(w,{name:"i-lucide-info",class:"w-4 h-4 mr-2"}),n[18]||(n[18]=de(" Changes Summary "))]),a("div",Pn,[V.value.filter(pe=>!pe.disabled&&!pe.deleted).length?(s(),I("div",Hn," â¢ Adding "+G(V.value.filter(pe=>!pe.disabled&&!pe.deleted).length)+" new column(s) ",1)):W("",!0),N.value.filter(pe=>!pe.disabled&&!pe.deleted).length?(s(),I("div",Gn," â¢ Adding "+G(N.value.filter(pe=>!pe.disabled&&!pe.deleted).length)+" new index(es) ",1)):W("",!0),Z.value.filter(pe=>!pe.disabled&&!pe.deleted).length?(s(),I("div",Yn," â¢ Adding "+G(Z.value.filter(pe=>!pe.disabled&&!pe.deleted).length)+" new foreign key(s) ",1)):W("",!0),y.value.length+V.value.filter(pe=>pe.disabled&&pe.deleted).length?(s(),I("div",Wn," â¢ Dropping "+G(y.value.length+V.value.filter(pe=>pe.disabled&&pe.deleted).length)+" column(s) ",1)):W("",!0),U.value.length+N.value.filter(pe=>pe.disabled&&pe.deleted).length?(s(),I("div",Jn," â¢ Dropping "+G(U.value.length+N.value.filter(pe=>pe.disabled&&pe.deleted).length)+" index(es) ",1)):W("",!0),P.value.length+Z.value.filter(pe=>pe.disabled&&pe.deleted).length?(s(),I("div",Qn," â¢ Dropping "+G(P.value.length+Z.value.filter(pe=>pe.disabled&&pe.deleted).length)+" foreign key(s) ",1)):W("",!0)])])])):W("",!0):(s(),I("div",Tn,[m(w,{name:"i-lucide-info",class:"mx-auto mb-2 w-8 h-8 text-gray-400"}),n[12]||(n[12]=a("p",null,"Make schema changes to generate SQL preview",-1))]))])]}),"foreign-keys-tab":b(()=>[a("div",Xn,[a("div",Zn,[n[20]||(n[20]=a("h3",{class:"text-sm font-medium"},"Foreign Keys",-1)),m(F,{size:"xs",color:"neutral",variant:"soft",icon:"i-lucide-plus",onClick:H,disabled:u.value||!xe.value},{default:b(()=>n[19]||(n[19]=[de(" Add Foreign Key ")])),_:1,__:[19]},8,["disabled"])]),Z.value.length===0?(s(),I("div",eo,' No foreign keys added yet. Click "Add Foreign Key" to add one. ')):(s(),I("div",to,[(s(!0),I(_e,null,$e(Z.value,($,Ee)=>(s(),I("div",{key:Ee,class:ne(["border rounded-md",{"border-gray-300":$.deleted}])},[m(Ce,{open:M.value[Ee],"onUpdate:open":oe=>M.value[Ee]=oe,class:"w-full"},{content:b(()=>[a("div",io,[a("div",ro,[m(ue,{label:"Column"},{default:b(()=>[m(Ve,{modelValue:$.column,"onUpdate:modelValue":oe=>$.column=oe,items:V.value.map(oe=>({label:oe.name,value:oe.name})),disabled:u.value||V.value.length===0||$.disabled,class:ne(["w-full",{"bg-gray-100 dark:bg-gray-800":$.disabled}])},null,8,["modelValue","onUpdate:modelValue","items","disabled","class"])]),_:2},1024),m(ue,{label:"References Table"},{default:b(()=>[m(Ve,{modelValue:$.on,"onUpdate:modelValue":[oe=>$.on=oe,oe=>ke(oe,Ee)],items:j.value,placeholder:"Select referenced table",disabled:u.value||j.value.length===0||$.disabled,class:ne(["w-full",{"bg-gray-100 dark:bg-gray-800":$.disabled}])},null,8,["modelValue","onUpdate:modelValue","items","disabled","class"])]),_:2},1024),m(ue,{label:"References Column"},{default:b(()=>{var oe,Ge;return[m(Ve,{modelValue:$.references,"onUpdate:modelValue":je=>$.references=je,items:((oe=se.value[$.on])==null?void 0:oe.columns)||[],loading:(Ge=se.value[$.on])==null?void 0:Ge.isLoading,disabled:u.value||!$.on||$.disabled,placeholder:$.on?"Select column":"Select table first","loading-icon":"i-lucide-loader-2",class:ne(["w-full",{"bg-gray-100 dark:bg-gray-800":$.disabled}])},null,8,["modelValue","onUpdate:modelValue","items","loading","disabled","placeholder","class"])]}),_:2},1024)])])]),default:b(()=>[a("div",ao,[m(F,{class:ne(["group flex-1 flex items-center justify-between p-3 text-left",{"opacity-60":$.deleted}]),color:"neutral",variant:"ghost","trailing-icon":"i-lucide-settings-2",ui:{trailingIcon:"group-data-[state=open]:rotate-90 transition-transform duration-200"}},{default:b(()=>[a("div",lo,[a("div",so,[de(G($.column)+" â "+G($.on)+"."+G($.references)+" ",1),$.disabled?(s(),I("span",no,"(existing)")):W("",!0),$.deleted?(s(),I("span",oo,"(deleted)")):W("",!0)])])]),_:2},1032,["class"]),$.deleted?(s(),q(F,{key:1,color:"success",variant:"ghost",icon:"i-tabler-restore",size:"sm",class:"mr-2",onClick:Le(oe=>ie(Ee),["stop"]),disabled:u.value},null,8,["onClick","disabled"])):(s(),q(F,{key:0,color:"error",variant:"ghost",icon:"i-lucide-trash-2",size:"sm",class:"mr-2",onClick:Le(oe=>le(Ee),["stop"]),disabled:u.value},null,8,["onClick","disabled"]))])]),_:2},1032,["open","onUpdate:open"])],2))),128))]))])]),"schema-history-tab":b(()=>[m(Xs,{"table-name":L.value,onReverted:n[1]||(n[1]=$=>{l(t).success({title:"Schema Reverted",description:"Schema change has been successfully reverted"}),e.columnData&&e.columnData.length>0&&C()})},null,8,["table-name"])]),_:1},8,["items"])])],32)])]),footer:b(()=>[a("div",uo,[m(F,{color:"neutral",variant:"soft",onClick:he,disabled:u.value,label:"Cancel"},null,8,["disabled"]),m(F,{type:"button",color:"primary",loading:u.value,disabled:!fe.value||u.value||!c.value,onClick:Me,label:"Save Changes"},null,8,["loading","disabled"])])]),_:1},8,["open","title"]),m(Ue,{open:d.value,"onUpdate:open":n[3]||(n[3]=$=>d.value=$),ModalTitle:"Unsaved Changes",ModalContent:"You have unsaved changes to the table structure. Closing without saving will discard these changes.",ModalConfirmText:"Discard Changes",ModalCancelText:"Continue Editing",onConfirm:ze,onClose:n[4]||(n[4]=$=>d.value=!1)},null,8,["open"]),m(Ue,{open:g.value,"onUpdate:open":n[5]||(n[5]=$=>g.value=$),ModalTitle:"Confirm Schema Changes",ModalContent:"",ModalConfirmText:"Confirm & Save Changes",ModalCancelText:"Cancel",onConfirm:Q,onClose:ce},{body:b(()=>[a("div",co,[n[24]||(n[24]=a("p",{class:"text-amber-600 font-medium"}," Warning: You are about to delete the following database objects: ",-1)),p.value.deletedColumns.length>0?(s(),I("div",po,[n[21]||(n[21]=a("h4",{class:"font-medium"},"Columns:",-1)),a("ul",mo,[(s(!0),I(_e,null,$e(p.value.deletedColumns,$=>(s(),I("li",{key:$,class:"text-sm"},G($),1))),128))])])):W("",!0),p.value.deletedIndexes.length>0?(s(),I("div",fo,[n[22]||(n[22]=a("h4",{class:"font-medium"},"Indexes:",-1)),a("ul",vo,[(s(!0),I(_e,null,$e(p.value.deletedIndexes,$=>(s(),I("li",{key:$,class:"text-sm"},G($),1))),128))])])):W("",!0),p.value.deletedForeignKeys.length>0?(s(),I("div",go,[n[23]||(n[23]=a("h4",{class:"font-medium"},"Foreign Keys:",-1)),a("ul",bo,[(s(!0),I(_e,null,$e(p.value.deletedForeignKeys,$=>(s(),I("li",{key:$,class:"text-sm"},G($),1))),128))])])):W("",!0),n[25]||(n[25]=a("p",{class:"text-sm mt-4"}," These changes can potentially affect data and may impact database performance or functionality. Are you sure you want to proceed? ",-1))])]),_:1},8,["open"])],64)}}});function ho(E,R,e){const t=new Map;return ee(()=>{const d=E.value,g=R.value.length,c=R.value[0],p=JSON.stringify({columnNames:d.map(f=>f.name),dataLength:g,firstRowKeys:c?Object.keys(c):[]});if(t.has(p))return t.get(p);const x=e(d,R.value);if(t.set(p,x),t.size>50){const f=t.keys().next().value;f!==void 0&&t.delete(f)}return x})}const _o={slots:{root:"relative",fieldset:"flex gap-x-2",legend:"mb-1 block font-medium text-default",item:"flex items-start",container:"flex items-center",base:"rounded-full ring ring-inset ring-accented overflow-hidden focus-visible:outline-2 focus-visible:outline-offset-2",indicator:"flex items-center justify-center size-full after:bg-default after:rounded-full",wrapper:"w-full",label:"block font-medium text-default",description:"text-muted"},variants:{color:{primary:{base:"focus-visible:outline-primary",indicator:"bg-primary"},secondary:{base:"focus-visible:outline-secondary",indicator:"bg-secondary"},success:{base:"focus-visible:outline-success",indicator:"bg-success"},info:{base:"focus-visible:outline-info",indicator:"bg-info"},warning:{base:"focus-visible:outline-warning",indicator:"bg-warning"},error:{base:"focus-visible:outline-error",indicator:"bg-error"},neutral:{base:"focus-visible:outline-inverted",indicator:"bg-inverted"}},variant:{list:{item:""},card:{item:"border border-muted rounded-lg"},table:{item:"border border-muted"}},orientation:{horizontal:{fieldset:"flex-row"},vertical:{fieldset:"flex-col"}},indicator:{start:{item:"flex-row",wrapper:"ms-2"},end:{item:"flex-row-reverse",wrapper:"me-2"},hidden:{base:"sr-only",wrapper:"text-center"}},size:{xs:{fieldset:"gap-y-0.5",legend:"text-xs",base:"size-3",item:"text-xs",container:"h-4",indicator:"after:size-1"},sm:{fieldset:"gap-y-0.5",legend:"text-xs",base:"size-3.5",item:"text-xs",container:"h-4",indicator:"after:size-1"},md:{fieldset:"gap-y-1",legend:"text-sm",base:"size-4",item:"text-sm",container:"h-5",indicator:"after:size-1.5"},lg:{fieldset:"gap-y-1",legend:"text-sm",base:"size-4.5",item:"text-sm",container:"h-5",indicator:"after:size-1.5"},xl:{fieldset:"gap-y-1.5",legend:"text-base",base:"size-5",item:"text-base",container:"h-6",indicator:"after:size-2"}},disabled:{true:{base:"cursor-not-allowed opacity-75",label:"cursor-not-allowed opacity-75"}},required:{true:{legend:"after:content-['*'] after:ms-0.5 after:text-error"}}},compoundVariants:[{size:"xs",variant:["card","table"],class:{item:"p-2.5"}},{size:"sm",variant:["card","table"],class:{item:"p-3"}},{size:"md",variant:["card","table"],class:{item:"p-3.5"}},{size:"lg",variant:["card","table"],class:{item:"p-4"}},{size:"xl",variant:["card","table"],class:{item:"p-4.5"}},{orientation:"horizontal",variant:"table",class:{item:"first-of-type:rounded-s-lg last-of-type:rounded-e-lg",fieldset:"gap-0 -space-x-px"}},{orientation:"vertical",variant:"table",class:{item:"first-of-type:rounded-t-lg last-of-type:rounded-b-lg",fieldset:"gap-0 -space-y-px"}},{color:"primary",variant:"card",class:{item:"has-data-[state=checked]:border-primary"}},{color:"secondary",variant:"card",class:{item:"has-data-[state=checked]:border-secondary"}},{color:"success",variant:"card",class:{item:"has-data-[state=checked]:border-success"}},{color:"info",variant:"card",class:{item:"has-data-[state=checked]:border-info"}},{color:"warning",variant:"card",class:{item:"has-data-[state=checked]:border-warning"}},{color:"error",variant:"card",class:{item:"has-data-[state=checked]:border-error"}},{color:"neutral",variant:"card",class:{item:"has-data-[state=checked]:border-inverted"}},{color:"primary",variant:"table",class:{item:"has-data-[state=checked]:bg-primary/10 has-data-[state=checked]:border-primary/50 has-data-[state=checked]:z-[1]"}},{color:"secondary",variant:"table",class:{item:"has-data-[state=checked]:bg-secondary/10 has-data-[state=checked]:border-secondary/50 has-data-[state=checked]:z-[1]"}},{color:"success",variant:"table",class:{item:"has-data-[state=checked]:bg-success/10 has-data-[state=checked]:border-success/50 has-data-[state=checked]:z-[1]"}},{color:"info",variant:"table",class:{item:"has-data-[state=checked]:bg-info/10 has-data-[state=checked]:border-info/50 has-data-[state=checked]:z-[1]"}},{color:"warning",variant:"table",class:{item:"has-data-[state=checked]:bg-warning/10 has-data-[state=checked]:border-warning/50 has-data-[state=checked]:z-[1]"}},{color:"error",variant:"table",class:{item:"has-data-[state=checked]:bg-error/10 has-data-[state=checked]:border-error/50 has-data-[state=checked]:z-[1]"}},{color:"neutral",variant:"table",class:{item:"has-data-[state=checked]:bg-elevated has-data-[state=checked]:border-inverted/50 has-data-[state=checked]:z-[1]"}},{variant:["card","table"],disabled:!0,class:{item:"cursor-not-allowed opacity-75"}}],defaultVariants:{size:"md",color:"primary",variant:"list",orientation:"vertical",indicator:"start"}},ra={__name:"RadioGroup",props:{as:{type:null,required:!1},legend:{type:String,required:!1},valueKey:{type:String,required:!1,default:"value"},labelKey:{type:String,required:!1,default:"label"},descriptionKey:{type:String,required:!1,default:"description"},items:{type:Array,required:!1},size:{type:null,required:!1},variant:{type:null,required:!1},color:{type:null,required:!1},orientation:{type:null,required:!1,default:"vertical"},indicator:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultValue:{type:null,required:!1},disabled:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},modelValue:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","change"],setup(E,{emit:R}){const e=E,t=R,d=Wt(),g=Xt(),c=Vt(Jt(e,"as","modelValue","defaultValue","orientation","loop","required"),t),{emitFormChange:p,emitFormInput:x,color:f,name:D,size:k,id:u,disabled:L,ariaAttrs:O}=Qt(e,{bind:!1}),V=u.value??Sa(),N=ee(()=>{var M;return _t({extend:_t(_o),...((M=g.ui)==null?void 0:M.radioGroup)||{}})({size:k.value,color:f.value,disabled:L.value,required:e.required,orientation:e.orientation,variant:e.variant,indicator:e.indicator})});function Z(M){if(M===null)return{id:`${V}:null`,value:void 0,label:void 0};if(typeof M=="string"||typeof M=="number")return{id:`${V}:${M}`,value:String(M),label:String(M)};const y=Ke(M,e.valueKey),U=Ke(M,e.labelKey),P=Ke(M,e.descriptionKey);return{...M,value:y,label:U,description:P,id:`${V}:${y}`}}const te=ee(()=>e.items?e.items.map(Z):[]);function h(M){const y=new Event("change",{target:{value:M}});t("change",y),p(),x()}return(M,y)=>{var U;return s(),q(l(Dl),Se({id:l(V)},l(c),{name:l(D),disabled:l(L),class:N.value.root({class:[(U=e.ui)==null?void 0:U.root,e.class]}),"onUpdate:modelValue":h}),{default:b(({modelValue:P})=>{var fe,ae;return[a("fieldset",Se({class:N.value.fieldset({class:(fe=e.ui)==null?void 0:fe.fieldset})},l(O)),[E.legend||d.legend?(s(),I("legend",{key:0,class:ne(N.value.legend({class:(ae=e.ui)==null?void 0:ae.legend}))},[ve(M.$slots,"legend",{},()=>[de(G(E.legend),1)])],2)):W("",!0),(s(!0),I(_e,null,$e(te.value,z=>{var J,re;return s(),q(St(!E.variant||E.variant==="list"?"div":l(qt)),{key:z.value,class:ne(N.value.item({class:[(J=e.ui)==null?void 0:J.item,(re=z.ui)==null?void 0:re.item,z.class]}))},{default:b(()=>{var ge,C,i,o,r,T,S,B,H,le;return[a("div",{class:ne(N.value.container({class:[(ge=e.ui)==null?void 0:ge.container,(C=z.ui)==null?void 0:C.container]}))},[m(l(Rl),{id:z.id,value:z.value,disabled:z.disabled,class:ne(N.value.base({class:[(i=e.ui)==null?void 0:i.base,(o=z.ui)==null?void 0:o.base],disabled:z.disabled}))},{default:b(()=>{var ie,he;return[m(l(Ol),{class:ne(N.value.indicator({class:[(ie=e.ui)==null?void 0:ie.indicator,(he=z.ui)==null?void 0:he.indicator]}))},null,8,["class"])]}),_:2},1032,["id","value","disabled","class"])],2),z.label||d.label||z.description||d.description?(s(),I("div",{key:0,class:ne(N.value.wrapper({class:[(r=e.ui)==null?void 0:r.wrapper,(T=z.ui)==null?void 0:T.wrapper]}))},[z.label||d.label?(s(),q(St(!E.variant||E.variant==="list"?l(qt):"p"),{key:0,for:z.id,class:ne(N.value.label({class:[(S=e.ui)==null?void 0:S.label,(B=z.ui)==null?void 0:B.label]}))},{default:b(()=>[ve(M.$slots,"label",{item:z,modelValue:P},()=>[de(G(z.label),1)])]),_:2},1032,["for","class"])):W("",!0),z.description||d.description?(s(),I("p",{key:1,class:ne(N.value.description({class:[(H=e.ui)==null?void 0:H.description,(le=z.ui)==null?void 0:le.description]}))},[ve(M.$slots,"description",{item:z,modelValue:P},()=>[de(G(z.description),1)])],2)):W("",!0)],2)):W("",!0)]}),_:2},1032,["class"])}),128))],16)]}),_:3},16,["id","name","disabled","class"])}}},xo={class:"space-y-6"},Co={key:0,class:"space-y-4"},wo={class:"flex items-center justify-between"},ko={class:"flex gap-2"},So={class:"relative"},$o={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg overflow-auto max-h-96 text-sm"},Io={class:"grid grid-cols-2 gap-4 text-sm"},Vo={class:"flex justify-end gap-2"},Eo=ye({__name:"SchemaExportModal",props:{open:{type:Boolean},tableName:{}},emits:["update:open","exported"],setup(E,{emit:R}){const e=He(),t=at(),d=E,g=R,c=ee({get:()=>d.open,set:V=>g("update:open",V)}),p=A("json"),x=A(!1),f=A(null),D=[{label:"JSON",value:"json",description:"Human-readable JSON format"},{label:"SQL",value:"sql",description:"SQL CREATE TABLE statements"},{label:"YAML",value:"yaml",description:"YAML configuration format"},{label:"PHP",value:"php",description:"PHP array configuration"}],k=async()=>{if(d.tableName){x.value=!0;try{const V=await e.exportSchema(d.tableName,p.value);f.value=V,t.success({title:"Schema exported",description:`Successfully exported ${d.tableName} schema in ${p.value.toUpperCase()} format`}),g("exported",V)}catch(V){t.error({title:"Export failed",description:V.message||"Failed to export schema"})}finally{x.value=!1}}},u=()=>{if(!f.value)return;const V=p.value==="json"?JSON.stringify(f.value.schema,null,2):f.value.schema,N=new Blob([V],{type:p.value==="json"?"application/json":"text/plain"}),Z=URL.createObjectURL(N),te=document.createElement("a");te.href=Z,te.download=`${d.tableName}_schema.${p.value}`,document.body.appendChild(te),te.click(),document.body.removeChild(te),URL.revokeObjectURL(Z)},L=async()=>{if(!f.value)return;const V=p.value==="json"?JSON.stringify(f.value.schema,null,2):f.value.schema;try{await navigator.clipboard.writeText(V),t.success({title:"Copied",description:"Schema copied to clipboard"})}catch{t.error({title:"Copy failed",description:"Failed to copy to clipboard"})}},O=()=>{c.value=!1,f.value=null};return(V,N)=>{const Z=ra,te=st,h=Qe,M=vt;return s(),q(M,{open:c.value,"onUpdate:open":N[1]||(N[1]=y=>c.value=y),class:"w-full max-w-2xl",side:"right",title:`Export Schema - ${V.tableName}`,ui:{footer:"justify-end"},close:!1},{body:b(()=>{var y,U,P;return[a("div",xo,[a("div",null,[m(te,{label:"Export Format",size:"lg"},{default:b(()=>[m(Z,{modelValue:p.value,"onUpdate:modelValue":N[0]||(N[0]=fe=>p.value=fe),items:D,"value-attribute":"value","option-attribute":"label"},null,8,["modelValue"])]),_:1})]),f.value?(s(),I("div",Co,[a("div",wo,[N[4]||(N[4]=a("h4",{class:"font-medium"},"Exported Schema",-1)),a("div",ko,[m(h,{variant:"outline",icon:"i-lucide-copy",size:"sm",onClick:L},{default:b(()=>N[2]||(N[2]=[de(" Copy ")])),_:1,__:[2]}),m(h,{variant:"outline",icon:"i-lucide-download",size:"sm",onClick:u},{default:b(()=>N[3]||(N[3]=[de(" Download ")])),_:1,__:[3]})])]),a("div",So,[a("pre",$o,G(p.value==="json"?JSON.stringify(f.value.schema,null,2):f.value.schema),1)]),a("div",Io,[a("div",null,[N[5]||(N[5]=a("span",{class:"font-medium"},"Format:",-1)),de(" "+G((y=f.value.format)==null?void 0:y.toUpperCase()),1)]),a("div",null,[N[6]||(N[6]=a("span",{class:"font-medium"},"Size:",-1)),de(" "+G((((U=f.value.metadata)==null?void 0:U.export_size)/1024).toFixed(2))+" KB ",1)]),a("div",null,[N[7]||(N[7]=a("span",{class:"font-medium"},"Exported:",-1)),de(" "+G(new Date(f.value.exported_at).toLocaleString()),1)]),a("div",null,[N[8]||(N[8]=a("span",{class:"font-medium"},"Version:",-1)),de(" "+G((P=f.value.metadata)==null?void 0:P.format_version),1)])])])):W("",!0)])]}),footer:b(()=>[a("div",Vo,[m(h,{variant:"outline",onClick:O},{default:b(()=>N[9]||(N[9]=[de(" Close ")])),_:1,__:[9]}),m(h,{loading:x.value,disabled:!V.tableName,icon:"i-tabler-table-export",size:"lg",onClick:k},{default:b(()=>N[10]||(N[10]=[de(" Export Schema ")])),_:1,__:[10]},8,["loading","disabled"])])]),_:1},8,["open","title"])}}}),To={class:"space-y-6"},Uo={class:"space-y-4"},Fo={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Do={key:0,class:"space-y-4"},Lo={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg"},Ao={class:"grid grid-cols-2 gap-4 text-sm"},Ro={key:0,class:"mt-4"},Oo={class:"mt-2 text-sm text-red-600"},zo={key:1,class:"space-y-4"},No={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg"},Bo={class:"grid grid-cols-2 gap-4 text-sm"},Mo={key:0,class:"mt-4"},qo={class:"mt-2 text-sm"},jo={key:1,class:"mt-4"},Ko={class:"mt-2 text-sm text-yellow-600"},Po={class:"flex gap-4 justify-end"},Ho={class:"flex justify-end gap-2"},Go=ye({__name:"SchemaImportModal",props:{open:{type:Boolean},tableName:{}},emits:["update:open","imported"],setup(E,{emit:R}){const e=He(),t=at(),d=E,g=R,c=ee({get:()=>d.open,set:M=>g("update:open",M)}),p=A("json"),x=A(""),f=A(!1),D=A(!1),k=A(null),u=A(null),L=A({validate_only:!1,overwrite:!1,backup_existing:!0}),O=[{label:"JSON",value:"json",description:"Human-readable JSON format"},{label:"SQL",value:"sql",description:"SQL CREATE TABLE statements"},{label:"YAML",value:"yaml",description:"YAML configuration format"},{label:"PHP",value:"php",description:"PHP array configuration"}],V=()=>{if(!x.value.trim())return null;try{return p.value==="json"?JSON.parse(x.value):x.value}catch{return t.error({title:"Parse error",description:"Invalid JSON format"}),null}},N=async()=>{var y;const M=V();if(M){D.value=!0;try{const U=await e.importSchema(d.tableName,M,p.value,{...L.value,validate_only:!0});k.value=U,(y=U.result)!=null&&y.success?t.success({title:"Schema valid",description:"Schema validation passed"}):t.error({title:"Schema issues",description:"Schema has validation issues"})}catch(U){t.error({title:"Validation failed",description:U.message||"Failed to validate schema"}),k.value=null}finally{D.value=!1}}},Z=async()=>{var y;const M=V();if(M){f.value=!0;try{const U=await e.importSchema(d.tableName,M,p.value,L.value);u.value=U,(y=U.result)!=null&&y.success?(t.success({title:"Schema imported",description:`Successfully imported schema for ${d.tableName}`}),g("imported",U)):t.error({title:"Import completed with warnings",description:"Some changes may not have been applied"})}catch(U){t.error({title:"Import failed",description:U.message||"Failed to import schema"})}finally{f.value=!1}}},te=M=>{var P;const y=(P=M.target.files)==null?void 0:P[0];if(!y)return;const U=new FileReader;U.onload=fe=>{var z,J;x.value=(z=fe.target)==null?void 0:z.result;const ae=(J=y.name.split(".").pop())==null?void 0:J.toLowerCase();ae&&["json","sql","yaml","php"].includes(ae)&&(p.value=ae)},U.readAsText(y)},h=()=>{c.value=!1,x.value="",k.value=null,u.value=null,L.value={validate_only:!1,overwrite:!1,backup_existing:!0}};return(M,y)=>{const U=ra,P=st,fe=ea,ae=dt,z=Qe,J=vt;return s(),q(J,{open:c.value,"onUpdate:open":y[5]||(y[5]=re=>c.value=re),class:"w-full max-w-2xl",side:"right",title:`Import Schema - ${M.tableName}`,ui:{footer:"justify-end"},close:!1},{body:b(()=>{var re,ge,C,i,o,r,T,S,B,H;return[a("div",To,[a("div",null,[m(P,{label:"Import Format",size:"lg"},{default:b(()=>[m(U,{modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=le=>p.value=le),items:O,"value-attribute":"value","option-attribute":"label"},null,8,["modelValue"])]),_:1})]),a("div",null,[m(P,{label:"Upload Schema File"},{default:b(()=>[a("input",{type:"file",accept:".json,.sql,.yaml,.yml,.php",onChange:te,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),_:1})]),a("div",null,[m(P,{label:"Schema Content"},{default:b(()=>[m(fe,{modelValue:x.value,"onUpdate:modelValue":y[1]||(y[1]=le=>x.value=le),rows:12,placeholder:"Paste your schema content here...",class:"font-mono text-sm w-full"},null,8,["modelValue"])]),_:1})]),a("div",Uo,[y[6]||(y[6]=a("h4",{class:"font-medium"},"Import Options",-1)),a("div",Fo,[m(P,null,{default:b(()=>[m(ae,{modelValue:L.value.validate_only,"onUpdate:modelValue":y[2]||(y[2]=le=>L.value.validate_only=le),label:"Validate Only",help:"Only validate without applying changes"},null,8,["modelValue"])]),_:1}),m(P,null,{default:b(()=>[m(ae,{modelValue:L.value.overwrite,"onUpdate:modelValue":y[3]||(y[3]=le=>L.value.overwrite=le),label:"Overwrite Existing",help:"Overwrite existing table structure"},null,8,["modelValue"])]),_:1}),m(P,null,{default:b(()=>[m(ae,{modelValue:L.value.backup_existing,"onUpdate:modelValue":y[4]||(y[4]=le=>L.value.backup_existing=le),label:"Backup Existing",help:"Create backup before import"},null,8,["modelValue"])]),_:1})])]),k.value?(s(),I("div",Do,[y[10]||(y[10]=a("h4",{class:"font-medium"},"Validation Results",-1)),a("div",Lo,[a("div",Ao,[a("div",null,[y[7]||(y[7]=a("span",{class:"font-medium"},"Status:",-1)),a("span",{class:ne((re=k.value.validation)!=null&&re.valid?"text-green-600":"text-red-600")},G((ge=k.value.validation)!=null&&ge.valid?"Valid":"Invalid"),3)]),a("div",null,[y[8]||(y[8]=a("span",{class:"font-medium"},"Validated:",-1)),de(" "+G(new Date(k.value.validated_at).toLocaleString()),1)])]),(i=(C=k.value.validation)==null?void 0:C.errors)!=null&&i.length?(s(),I("div",Ro,[y[9]||(y[9]=a("span",{class:"font-medium text-red-600"},"Errors:",-1)),a("ul",Oo,[(s(!0),I(_e,null,$e(k.value.validation.errors,le=>(s(),I("li",{key:le}," â¢ "+G(le),1))),128))])])):W("",!0)])])):W("",!0),u.value?(s(),I("div",zo,[y[15]||(y[15]=a("h4",{class:"font-medium"},"Import Results",-1)),a("div",No,[a("div",Bo,[a("div",null,[y[11]||(y[11]=a("span",{class:"font-medium"},"Status:",-1)),a("span",{class:ne((o=u.value.result)!=null&&o.success?"text-green-600":"text-red-600")},G((r=u.value.result)!=null&&r.success?"Success":"Failed"),3)]),a("div",null,[y[12]||(y[12]=a("span",{class:"font-medium"},"Imported:",-1)),de(" "+G(new Date(u.value.imported_at).toLocaleString()),1)])]),(S=(T=u.value.result)==null?void 0:T.changes)!=null&&S.length?(s(),I("div",Mo,[y[13]||(y[13]=a("span",{class:"font-medium"},"Changes Applied:",-1)),a("ul",qo,[(s(!0),I(_e,null,$e(u.value.result.changes,le=>(s(),I("li",{key:le},"â¢ "+G(le),1))),128))])])):W("",!0),(H=(B=u.value.result)==null?void 0:B.warnings)!=null&&H.length?(s(),I("div",jo,[y[14]||(y[14]=a("span",{class:"font-medium text-yellow-600"},"Warnings:",-1)),a("ul",Ko,[(s(!0),I(_e,null,$e(u.value.result.warnings,le=>(s(),I("li",{key:le}," â¢ "+G(le),1))),128))])])):W("",!0)])])):W("",!0),a("div",Po,[m(z,{loading:D.value,disabled:!x.value.trim(),variant:"outline",icon:"i-lucide-check-circle",onClick:N},{default:b(()=>y[16]||(y[16]=[de(" Validate Schema ")])),_:1,__:[16]},8,["loading","disabled"])])])]}),footer:b(()=>[a("div",Ho,[m(z,{variant:"outline",onClick:h},{default:b(()=>y[17]||(y[17]=[de(" Close ")])),_:1,__:[17]}),m(z,{loading:f.value,disabled:!x.value.trim()||L.value.validate_only,icon:"i-lucide-upload",onClick:Z},{default:b(()=>y[18]||(y[18]=[de(" Import Schema ")])),_:1,__:[18]},8,["loading","disabled"])])]),_:1},8,["open","title"])}}}),Yo={key:0,class:"flex items-center justify-center py-8"},Wo={key:1,class:"text-center py-8 text-gray-500"},Jo={key:2,class:"space-y-6"},Qo={class:"space-y-4"},Xo=ye({__name:"RecordEditSlideover",props:{open:{type:Boolean},tableId:{},recordData:{},schema:{},readonly:{type:Boolean,default:!1}},emits:["update:open","close","submit","delete"],setup(E,{emit:R}){const e=E,t=R,d=He(),g=A(!1),c=A(!1),p=A(!1),x=A(!1),f=A({}),D=A({}),k=A({}),u=A({}),L=ee({get:()=>e.open,set:o=>t("update:open",o)}),O=ee(()=>!!e.recordData),V=ee(()=>e.readonly?`View Record - ${e.tableId}`:O.value?`Edit Record - ${e.tableId}`:`Create Record - ${e.tableId}`),N=ee(()=>{if(!e.schema)return!1;const o=e.schema.filter(r=>!r.nullable&&r.extra!=="auto_increment");return O.value?Object.keys(f.value).length>0:o.every(r=>{const T=f.value[r.name];return T!=null&&T!==""})}),Z=ee(()=>e.schema?[{title:"Basic Information",fields:e.schema.filter(r=>!r.name.includes("_at")&&!r.name.includes("_id")&&r.name!=="id"&&!te(r))},{title:"Relationships",fields:e.schema.filter(r=>te(r))},{title:"System Fields",fields:e.schema.filter(r=>r.name.includes("_at")||r.name==="id"||r.extra==="auto_increment")}].filter(r=>r.fields.length>0):[]);function te(o){return!!o.relationships&&o.relationships.length>0}function h(){if(e.recordData){const o=Object.fromEntries(Object.entries(e.recordData).filter(([r])=>!r.endsWith("_display")));f.value={...o},D.value={...o},p.value=!1}}async function M(){var r,T,S;if(!e.schema)return;const o=e.schema.filter(B=>te(B));for(const B of o){const H=(r=B.relationships)==null?void 0:r[0],le=H==null?void 0:H.references_table;if(!le){console.warn(`No references_table found for ${B.name}`);continue}try{const ie=((T=e.recordData)==null?void 0:T[B.name])||null,he=((S=e.recordData)==null?void 0:S[B.name+"_display"])||null;u.value[B.name]={tableName:le,referencedColumn:H.references_column,currentValue:ie,currentDisplayValue:he,options:ie&&he?[{label:he,value:ie}]:[]}}catch(ie){console.error(`Error setting up foreign key for ${B.name}:`,ie),u.value[B.name]={tableName:"",referencedColumn:"id",currentValue:null,options:[]}}}}function y(o,r){const S=r.filter(B=>B.name.includes("_at")||B.name.includes("password")||B.name.includes("token")||B.name.includes("user_agent")||B.name.includes("ip_address")||B.extra==="auto_increment"?!1:B.type.includes("varchar")||B.type.includes("text")||B.is_unique&&!B.is_primary).map(B=>{let H=0;/^(name|title|label|display_name)$/i.test(B.name)&&(H+=100),/name$/i.test(B.name)&&(H+=80),B.is_unique&&(H+=60),/^(username|email|code|slug)$/i.test(B.name)&&(H+=50),B.type.includes("varchar")&&(H+=20),(B.type.includes("512")||B.type.includes("1000"))&&(H-=10),/^(uuid|guid|hash)$/i.test(B.name)&&(H-=30);const le=o[B.name];return(!le||le==="")&&(H=0),{column:B,score:H,value:le}}).filter(B=>B.score>0).sort((B,H)=>H.score-B.score).slice(0,2);return S.length===1?S[0].value:S.length>=2?S.map(B=>B.value).join(" - "):Object.values(o).slice(0,2).join(" - ")}async function U(o,r=""){const T=u.value[o];if(!T)return[];try{const S=await d.fetchForeignKeyData(T.tableName,{per_page:20,search:r||void 0});if(S&&Array.isArray(S.data)){const B=S.data.map(H=>{const le=T.referencedColumn,ie=H[le]||H.id;let he;const ze=Object.keys(H).find(Me=>Me.endsWith("_display"));return ze&&H[ze]?he=H[ze]:S.columns&&Array.isArray(S.columns)?he=y(H,S.columns):he=`${Object.values(H).slice(0,2).join(" - ")}`,{label:String(he).substring(0,50),value:ie}});return u.value[o].options=B,B}}catch(S){console.error(`Error searching FK options for ${o}:`,S)}return[]}function P(){if(!e.schema)return;const o={};e.schema.forEach(r=>{r.default!==void 0?o[r.name]=r.default:o[r.name]=fe(r.type)}),f.value=o,D.value={...o},p.value=!1}function fe(o){const r=o.toUpperCase();return r.includes("INT")||r.includes("DECIMAL")||r.includes("FLOAT")?null:r.includes("BOOL")?!1:r.includes("DATE")||r.includes("TIME")||r.includes("JSON")?null:""}async function ae(){if(!(!N.value||c.value)){c.value=!0;try{if(z(),Object.keys(k.value).length>0)return;t("submit",{...f.value}),p.value=!1,C()}catch(o){console.error("Error saving record:",o)}finally{c.value=!1}}}function z(){k.value={},e.schema&&e.schema.forEach(o=>{const r=f.value[o.name];if(!o.nullable&&o.extra!=="auto_increment"&&(r==null||r==="")&&(k.value[o.name]=`${o.name} is required`),r!=null&&r!==""){const T=J(o,r);T&&(k.value[o.name]=T)}})}function J(o,r){const T=o.type.toUpperCase();if(T.includes("INT")){const S=Number(r);if(isNaN(S)||!Number.isInteger(S))return"Must be a valid integer"}if(T.includes("DECIMAL")||T.includes("FLOAT")){const S=Number(r);if(isNaN(S))return"Must be a valid number"}return T.includes("EMAIL")&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?"Must be a valid email address":null}function re(o,r){f.value[o]=r,k.value[o]&&delete k.value[o],p.value=JSON.stringify(f.value)!==JSON.stringify(D.value)}function ge(){if(e.recordData){const o=e.recordData;t("delete",o)}}function C(){p.value&&!e.readonly?x.value=!0:i()}function i(){L.value=!1,x.value=!1,t("close"),setTimeout(()=>{f.value={},D.value={},k.value={},p.value=!1},100)}return Fe(L,o=>{o&&(M(),O.value?h():P())}),(o,r)=>{const T=qe,S=vt;return s(),I(_e,null,[m(S,{open:L.value,"onUpdate:open":r[0]||(r[0]=B=>L.value=B),title:V.value,close:!1,side:"right",class:"w-full max-w-2xl",ui:{footer:"justify-end"}},{body:b(()=>[g.value?(s(),I("div",Yo,[m(T,{name:"i-lucide-loader-2",class:"animate-spin"}),r[3]||(r[3]=a("span",{class:"ml-2"},"Loading record...",-1))])):o.schema?(s(),I("div",Jo,[a("form",{onSubmit:Le(ae,["prevent"])},[(s(!0),I(_e,null,$e(Z.value,B=>(s(),q(oa,{key:B.title,title:B.title,collapsible:B.title!=="Basic Information"},{default:b(()=>[a("div",Qo,[(s(!0),I(_e,null,$e(B.fields,H=>(s(),q(na,{key:H.name,column:H,value:f.value[H.name],error:k.value[H.name],disabled:o.readonly||H.extra==="auto_increment","is-foreign-key":te(H),"foreign-key-config":u.value[H.name],"search-fk-options":le=>U(H.name,le),"onUpdate:value":le=>re(H.name,le)},null,8,["column","value","error","disabled","is-foreign-key","foreign-key-config","search-fk-options","onUpdate:value"]))),128))])]),_:2},1032,["title","collapsible"]))),128))],32)])):(s(),I("div",Wo,[m(T,{name:"i-lucide-alert-circle",class:"mx-auto mb-2"}),r[4]||(r[4]=a("p",null,"No schema available for this table",-1))]))]),footer:b(()=>[m(ia,{readonly:o.readonly,"is-editing":O.value,"is-saving":c.value,"is-valid":N.value,"has-changes":p.value,onSave:ae,onDelete:ge,onCancel:C},null,8,["readonly","is-editing","is-saving","is-valid","has-changes"])]),_:1},8,["open","title"]),m(ft,{open:x.value,"onUpdate:open":r[1]||(r[1]=B=>x.value=B),ModalTitle:"Unsaved Changes",ModalContent:"You have unsaved changes. Closing without saving will discard these changes.","modal-confirm-text":"Discard Changes","modal-cancel-text":"Continue Editing",onConfirm:i,onClose:r[2]||(r[2]=B=>x.value=!1)},null,8,["open"])],64)}}}),Zo={class:"flex flex-col h-full relative"},ei={class:"flex flex-wrap items-center justify-between gap-2 mb-2"},ti={class:"flex items-center gap-2"},ai={class:"flex items-center"},li={class:"flex-grow overflow-auto mb-12"},si={key:0,class:"absolute bottom-0 left-0 right-0 flex border-t border-gray-200 dark:border-gray-700 px-5 pt-3 justify-between items-center bg-white dark:bg-gray-900 z-10"},ni={class:"flex"},oi={class:"flex items-center space-x-3 mb-6"},ii={class:"flex items-center justify-center w-12 h-12 rounded-full"},ri={class:"mb-6"},di={class:"bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-lg p-4"},ui={class:"flex items-start space-x-3"},ci={class:"text-sm font-medium text-red-800 dark:text-red-200 mb-1"},pi={class:"text-xs text-red-700 dark:text-red-300"},mi={key:0,class:"mt-4"},fi={class:"flex flex-wrap gap-1"},vi={class:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},gi={class:"flex items-center space-x-3 mb-4"},bi={key:0,class:"space-y-3 ml-6"},yi=ye({__name:"DbTable",props:{tableName:{type:String,default:""},tableData:{type:Array,default:()=>[],required:!0},columns:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},pageSize:{type:String,default:"25"},totalItems:{type:Number,default:0},initialPage:{type:Number,default:1},maxContentLength:{type:Number,default:30},visibleColumns:{type:Array,default:()=>[]},hiddenColumns:{type:Array,default:()=>[]},paginationFrom:{type:Number,default:1},paginationTo:{type:Number,default:1}},emits:["refresh-data","update:page","update:page-size","onDelete","onShowEdit"],setup(E,{emit:R}){const e=dt,t=A({}),d=$a("table"),g=He(),c=at(),p=A(!1),x=A({enabled:!1,statusColumn:"status",deletedValue:"deleted"}),f=A(null),D=A({}),k=A(!1),u=E,L=R,O=A({pageIndex:u.initialPage-1,pageSize:Number(u.pageSize)}),V=A({left:[],right:["action"]}),N=A(["25","50","100"]),Z=A(u.pageSize),te=A(!1),h=A(!1),M=A(!1),y=ee(()=>g.selectedRowsCount),U=ee(()=>Array.from(g.selectedRows)),P=A(!1),fe=A(!1),ae=A(!1),z=A(null);function J(K){return["last_token_refresh"].includes(K)?!1:["password","token","secret","key","hash","salt"].some(j=>K.toLowerCase().includes(j))}function re(K,_){const j=["_at","_date","_time","_on","date_","time_","updated","deleted","timestamp"].some(xe=>K.toLowerCase().includes(xe));return typeof _=="string"?j||/^\d{4}-\d{2}-\d{2}(T|\s)\d{2}:\d{2}:\d{2}/.test(_):j}function ge(K,_){return K==="status"||K.endsWith("_status")||typeof _=="string"&&["active","inactive","pending","completed","failed","suspended","deleted"].includes(_.toLowerCase())}function C(K,_){return typeof K!="string"||K.length<=_?K:K.substring(0,_)+"..."}const i=Ze(u,"columns"),o=Ze(u,"tableData"),r=ho(i,o,K=>{const _=[{id:"select",header:({table:se})=>Re(e,{modelValue:se.getIsSomePageRowsSelected()?"indeterminate":se.getIsAllPageRowsSelected(),"onUpdate:modelValue":Te=>{se.toggleAllPageRowsSelected(!!Te)},ariaLabel:"Select all"}),cell:({row:se})=>Re(e,{modelValue:se.getIsSelected(),"onUpdate:modelValue":Te=>{se.toggleSelected(!!Te);const ke=se.original.id;Te?g.selectRow(ke):g.toggleRowSelection(ke)},ariaLabel:"Select row"})}];let j=[...K.map(se=>({accessorKey:se.name,header:se.name,cell:({row:Te})=>{var w,Ve;const ke=Te.getValue(se.name),be=se.name,v=Te.original.uuid||Te.original.id,n=((w=f.value)==null?void 0:w.rowId)===v&&((Ve=f.value)==null?void 0:Ve.columnKey)===be,ue=!["id","created_at","updated_at"].includes(be)&&!J(be);if(n&&ue){const De=ut,Ce=$t,Ae=dt,Ne=`${v}-${be}`;if(f.value&&typeof f.value.originalValue=="boolean")return Re("div",{class:"px-2"},[Re(Ae,{modelValue:f.value.currentValue,"onUpdate:modelValue":Ue=>{f.value&&(f.value.currentValue=Ue,he(v,be,Ue))}})]);if(f.value&&ge(be,f.value.originalValue))return Re("div",{class:"relative"},[Re(Ce,{modelValue:f.value.currentValue,items:["active","inactive","pending","failed","suspended","deleted"],size:"xs","onUpdate:modelValue":Ue=>{f.value&&(f.value.currentValue=Ue)},onKeydown:Ue=>{Ue.key==="Enter"&&f.value?he(v,be,f.value.currentValue):Ue.key==="Escape"&&ie()}}),D.value[Ne]&&Re("div",{class:"absolute top-full left-0 mt-1 text-xs text-red-500 z-50 whitespace-nowrap"},D.value[Ne])]);if(f.value)return Re("div",{class:"relative"},[Re(De,{modelValue:f.value.currentValue,size:"xs",autofocus:!0,loading:k.value,color:D.value[Ne]?"red":void 0,"onUpdate:modelValue":Ue=>{f.value&&(f.value.currentValue=Ue)},onKeydown:Ue=>{Ue.key==="Enter"&&f.value?he(v,be,f.value.currentValue):Ue.key==="Escape"&&ie()},onBlur:()=>{setTimeout(()=>{var Ue,$;((Ue=f.value)==null?void 0:Ue.rowId)===v&&(($=f.value)==null?void 0:$.columnKey)===be&&f.value&&he(v,be,f.value.currentValue)},200)}}),D.value[Ne]&&Re("div",{class:"absolute top-full left-0 mt-1 text-xs text-red-500 z-50 whitespace-nowrap"},D.value[Ne])])}const F=(()=>{if(J(be))return"â¢â¢â¢â¢â¢â¢â¢â¢";if(re(be,ke),ge(be,ke)){const De={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800",suspended:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800",failed:"bg-red-100 text-red-800",deleted:"bg-red-100 text-red-900"},Ce=typeof ke=="string"?ke.toLowerCase():"",Ae=De[Ce]||"bg-gray-100 text-gray-800";return Re("span",{class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Ae}`},ke)}return typeof ke=="boolean"?ke?Re("span",{class:"text-green-600"},"Yes"):Re("span",{class:"text-red-600"},"No"):ke===null?"â":typeof ke=="string"&&ke.length>u.maxContentLength?Re("div",{class:"truncate max-w-xs",title:ke},C(ke,u.maxContentLength)):ke})();return ue?Re("div",{class:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 px-2 py-1 rounded transition-colors",onClick:()=>le(v,be,ke),title:"Click to edit"},F):F}}))];u.visibleColumns&&u.visibleColumns.length>0&&(j=j.filter(se=>{const Te=se.accessorKey;return u.visibleColumns.includes(Te)})),u.hiddenColumns&&u.hiddenColumns.length>0&&(j=j.filter(se=>{const Te=se.accessorKey;return!u.hiddenColumns.includes(Te)})),j=j.map(se=>({...se,enableHiding:!0}));const xe=[{id:"action"}];return[..._,...j,...xe]});function T(){var Y,j,xe;const K=(xe=(j=(Y=d.value)==null?void 0:Y.tableApi)==null?void 0:j.getSelectedRowModel())==null?void 0:xe.rows.map(se=>se.original).filter(se=>se!==void 0),_=(K==null?void 0:K.filter(se=>se!==null).map(se=>se.id).filter(se=>se!==void 0))||[];g.selectedRows=new Set(_),p.value=!0}function S(K){z.value=K,ae.value=!0}function B(){h.value=!0}Fe(()=>Z.value,K=>{O.value.pageSize=Number(K),O.value.pageIndex=0,L("update:page-size",K)}),Fe(()=>t.value,K=>{te.value=Object.keys(K).length>0});const H=async K=>{L("refresh-data",K)},le=(K,_,Y)=>{f.value={rowId:K,columnKey:_,originalValue:Y,currentValue:Y}},ie=()=>{f.value=null,D.value={}},he=async(K,_,Y)=>{try{delete D.value[`${K}-${_}`];const j=ze(_,Y);if(!j.valid){D.value[`${K}-${_}`]=j.error;return}k.value=!0;const xe={[_]:Y};console.log("Updating cell:",{tableName:u.tableName,rowId:K,columnKey:_,newValue:Y,updateData:xe}),await g.updateTableRow(u.tableName,K,xe),c.success({title:"Cell updated",description:`Successfully updated ${_}`}),f.value=null,D.value={}}catch(j){D.value[`${K}-${_}`]=j.message,c.error({title:"Update failed",description:j.message})}finally{k.value=!1}},ze=(K,_)=>{const Y=u.columns.find(j=>j.name===K);if(!Y)return{valid:!0};if(Y.nullable===!1&&(_===null||_===""))return{valid:!1,error:"This field is required"};if(Y.type.includes("INT")&&_!==null&&_!==""&&isNaN(parseInt(_)))return{valid:!1,error:"Must be a valid number"};if(Y.type.includes("VARCHAR")){const j=Y.type.match(/VARCHAR\((\d+)\)/);if(j&&_&&_.length>parseInt(j[1]))return{valid:!1,error:`Maximum ${j[1]} characters`}}return Y.name.includes("email")&&_&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_)?{valid:!1,error:"Invalid email format"}:{valid:!0}},Me=async()=>{var K,_;if(y.value===0){c.error({title:"No records selected",description:"Please select records to delete"});return}M.value=!0;try{const Y=x.value.enabled?{soft_delete:!0,status_column:x.value.statusColumn,deleted_value:x.value.deletedValue}:void 0,j=await g.bulkDeleteRecords(u.tableName,Y),xe=j.soft_deleted!==void 0?"soft deleted":"deleted",se=j.soft_deleted!==void 0?j.soft_deleted:j.deleted;c.success({title:`Records ${xe}`,description:`Successfully ${xe} ${se} record${se===1?"":"s"}`}),L("onDelete",j),p.value=!1,g.clearSelection(),t.value={},(_=(K=d.value)==null?void 0:K.tableApi)==null||_.resetRowSelection()}catch(Y){c.error({title:"Delete failed",description:Y.message||"Failed to delete selected records"})}finally{M.value=!1}},Q=K=>{console.log("Schema exported:",K),c.success({title:"Schema exported",description:"Schema has been exported successfully"})},ce=K=>{console.log("Schema imported:",K),c.success({title:"Schema imported",description:"Schema has been imported successfully"}),L("refresh-data")},me=async K=>{try{const _=z.value.uuid||z.value.id,Y=Object.fromEntries(Object.entries(K).filter(([j])=>!j.endsWith("_display")));await g.updateTableRow(u.tableName,_,Y),c.success({title:"Record updated",description:"Successfully updated record"}),ae.value=!1}catch(_){console.error("Error updating record:",_),k.value=!1,c.error({title:"Update failed",description:_.message})}finally{k.value=!1}};function we(K){z.value=K,g.selectedRows=new Set([K.id]),p.value=!0,ae.value=!1}function Ie(){ae.value=!1,z.value=null}return(K,_)=>{var ue,F;const Y=Qe,j=ta,xe=Zt,se=Ya,Te=$t,ke=yo,be=qe,v=ut,n=st,X=ft;return s(),I(_e,null,[a("div",Zo,[a("div",ei,[a("div",ti,[m(Y,{variant:"outline",icon:"i-lucide-table-properties",onClick:_[0]||(_[0]=w=>B())}),m(Y,{variant:"outline",icon:"i-tabler-table-export",onClick:_[1]||(_[1]=w=>P.value=!0)}),m(Y,{variant:"outline",icon:"i-tabler-table-import",onClick:_[2]||(_[2]=w=>fe.value=!0)})]),a("div",ai,[te.value?(s(),q(Y,{key:0,color:"error",variant:"outline",size:"sm",icon:"i-tabler-trash",onClick:T,class:"me-2"})):W("",!0),m(j,{items:(F=(ue=d.value)==null?void 0:ue.tableApi)==null?void 0:F.getAllColumns().filter(w=>w.getCanHide()).map(w=>({label:w.id,type:"checkbox",checked:w.getIsVisible(),onUpdateChecked(Ve){var De,Ce,Ae;(Ae=(Ce=(De=d.value)==null?void 0:De.tableApi)==null?void 0:Ce.getColumn(w.id))==null||Ae.toggleVisibility(!!Ve)},onSelect(Ve){Ve==null||Ve.preventDefault()}})),content:{align:"end"}},{default:b(()=>[m(Y,{label:"Columns",color:"neutral",variant:"outline","trailing-icon":"i-lucide-chevron-down"})]),_:1},8,["items"])])]),a("div",li,[m(xe,{ref_key:"table",ref:d,loading:u.isLoading,sticky:"","row-selection":t.value,"onUpdate:rowSelection":_[3]||(_[3]=w=>t.value=w),"column-pinning":V.value,"onUpdate:columnPinning":_[4]||(_[4]=w=>V.value=w),data:u.tableData,columns:l(r),hover:"",class:"min-h-96 max-h-[calc(100vh-12rem)]",pagination:O.value,"pagination-options":{manualPagination:!0},ui:{th:"px-4 py-3.5 text-sm text-highlighted text-left rtl:text-right font-semibold whitespace-nowrap [&:has([role=checkbox])]:pe-0"}},{empty:b(()=>[ve(K.$slots,"empty")]),"action-cell":b(({row:w})=>[m(Y,{icon:"i-tabler-arrow-right",color:"neutral",variant:"ghost","aria-label":"Actions",onClick:Ve=>S(w.original)},null,8,["onClick"])]),_:3},8,["loading","row-selection","column-pinning","data","columns","pagination"])]),u.tableData.length>0?(s(),I("div",si,[a("div",null,G(u.paginationFrom)+" to "+G(u.paginationTo)+" of "+G(u.totalItems),1),a("div",ni,[m(se,{"default-page":O.value.pageIndex+1,page:O.value.pageIndex+1,"items-per-page":Number(O.value.pageSize),total:u.totalItems,"onUpdate:page":_[5]||(_[5]=w=>{O.value.pageIndex=w-1,L("update:page",O.value)}),class:"mr-3"},null,8,["default-page","page","items-per-page","total"]),m(Te,{modelValue:Z.value,"onUpdate:modelValue":_[6]||(_[6]=w=>Z.value=w),items:N.value,class:"w-20"},null,8,["modelValue","items"])])])):W("",!0)]),m(ke,{open:h.value,"onUpdate:open":_[7]||(_[7]=w=>h.value=w),slideoverTitle:"Edit Table",columnData:u.columns,tableName:u.tableName,onSubmit:H},null,8,["open","columnData","tableName"]),m(X,{open:p.value,"onUpdate:open":_[11]||(_[11]=w=>p.value=w),ModalConfirmText:`Yes, Delete ${y.value} Record${y.value===1?"":"s"}`,ModalCancelText:"Cancel",ui:{content:"divide-y-0 p-5",footer:"flex justify-end space-x-2"},ModalConfirmColor:"error",onConfirm:Me,onClose:_[12]||(_[12]=w=>p.value=!1),"is-loading":M.value},{body:b(()=>[a("div",oi,[a("div",ii,[m(be,{name:"i-tabler-trash",class:"size-15 text-red-600 dark:text-red-400"})]),_[16]||(_[16]=a("div",null,[a("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"}," Delete Selected Records "),a("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"This action cannot be undone")],-1))]),a("div",ri,[a("div",di,[a("div",ui,[m(be,{name:"i-lucide-alert-triangle",class:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),a("div",null,[a("p",ci," Are you sure you want to delete "+G(y.value)+" record"+G(y.value===1?"":"s")+"? ",1),a("p",pi,' All selected records will be permanently removed from the table "'+G(u.tableName)+'". ',1)])])]),y.value<=10?(s(),I("div",mi,[_[17]||(_[17]=a("p",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"}," Selected record IDs: ",-1)),a("div",fi,[(s(!0),I(_e,null,$e(U.value,w=>(s(),I("span",{key:w,class:"inline-flex items-center px-2 py-1 rounded-md text-xs bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"},G(w),1))),128))])])):W("",!0),a("div",vi,[a("div",gi,[m(l(e),{modelValue:x.value.enabled,"onUpdate:modelValue":_[8]||(_[8]=w=>x.value.enabled=w),label:"Use soft delete","help-text":"Update a status column instead of permanently deleting records"},null,8,["modelValue"])]),x.value.enabled?(s(),I("div",bi,[m(n,{label:"Status Column",size:"sm"},{default:b(()=>[m(v,{modelValue:x.value.statusColumn,"onUpdate:modelValue":_[9]||(_[9]=w=>x.value.statusColumn=w),placeholder:"status",size:"sm"},null,8,["modelValue"])]),_:1}),m(n,{label:"Deleted Value",size:"sm"},{default:b(()=>[m(v,{modelValue:x.value.deletedValue,"onUpdate:modelValue":_[10]||(_[10]=w=>x.value.deletedValue=w),placeholder:"deleted",size:"sm"},null,8,["modelValue"])]),_:1})])):W("",!0)])])]),_:1},8,["open","ModalConfirmText","is-loading"]),m(Xo,{open:ae.value,"onUpdate:open":_[13]||(_[13]=w=>ae.value=w),"table-id":u.tableName,"record-data":z.value,schema:u.columns,onSubmit:me,onDelete:we,onClose:Ie},null,8,["open","table-id","record-data","schema"]),m(Eo,{open:P.value,"onUpdate:open":_[14]||(_[14]=w=>P.value=w),"table-name":u.tableName,onExported:Q},null,8,["open","table-name"]),m(Go,{open:fe.value,"onUpdate:open":_[15]||(_[15]=w=>fe.value=w),"table-name":u.tableName,onImported:ce},null,8,["open","table-name"])],64)}}});function hi(E,R=300){let e;return(...t)=>(clearTimeout(e),new Promise(d=>{e=setTimeout(()=>{d(E(...t))},R)}))}const _i={class:"h-full flex flex-col"},xi={class:"flex-1 overflow-auto"},Ci={key:1,class:"p-4 h-full"},wi={class:"flex flex-col items-center justify-center py-12 text-center"},ki={class:"mb-4 text-gray-400"},dr=ye({__name:"[name]",setup(E){const R=Ia(),e=Va(),t=He(),d=A(R.params.name),g=A(!1),c=at(),p=A(!1),x=A(!1),f=A(!1),D=A(!1),k=A(!1);Ka({shift_d:{usingInput:!1,handler:()=>{p.value=!0}},escape:{usingInput:!0,handler:()=>{p.value&&(p.value=!1)}}});const u=async()=>{g.value=!0,t.tableData=[],t.tableColumns=[],await t.fetchTableData(d.value),g.value=!1},L=hi(u,300),O=async()=>{x.value=!0;try{await t.deleteTable(d.value),c.success({title:"Table deleted",description:`Table "${d.value}" has been deleted successfully.`}),e.push("/tables")}catch(z){c.error({title:"Delete failed",description:z.message||`Failed to delete table "${d.value}".`}),console.error("Error deleting table:",z)}finally{x.value=!1,p.value=!1}};Fe(()=>R.params.name,async z=>{d.value=z,d.value&&await L()},{immediate:!0});const V=async z=>{console.log("Refresh data:",z),z.data.failed_operations.length&&c.error({title:z.message,description:z.data.failed_operations.map(J=>J).join(", ")}),z.success&&c.success({title:"Schema updated successfully",description:z.message}),await u()},N=async z=>{await t.fetchTableData(d.value,{page:1,per_page:parseInt(z)})},Z=async z=>{await t.fetchTableData(d.value,{page:z.pageIndex+1,per_page:z.pageSize})},te=[[{label:"Export All Data",icon:"i-lucide-download",onSelect(){h()}}],[{label:"Export Current View",icon:"i-lucide-file-down",onSelect(){M()}}],[{label:"Import from CSV",icon:"i-lucide-upload",onSelect(){f.value=!0}}]],h=async()=>{try{c.info({title:"Exporting data...",description:"Please wait"});const z=await t.exportTableData(d.value);y(z,`${d.value}_export_${new Date().toISOString().slice(0,10)}.csv`),c.success({title:"Export successful",description:`Exported ${z.length} records to CSV`})}catch(z){c.error({title:"Export failed",description:z.message||"Failed to export data"})}},M=()=>{const z=t.tableData;if(!z.length){c.error({title:"No data to export",description:"The current view has no records"});return}y(z,`${d.value}_view_${new Date().toISOString().slice(0,10)}.csv`),c.success({title:"Export successful",description:`Exported ${z.length} records to CSV`})},y=(z,J)=>{const re=U(z),ge=new Blob([re],{type:"text/csv;charset=utf-8;"}),C=document.createElement("a");C.href=URL.createObjectURL(ge),C.download=J,C.click(),URL.revokeObjectURL(C.href)},U=z=>{if(!z.length)return"";const J=Object.keys(z[0]),re=J.join(","),ge=z.map(C=>J.map(i=>{const o=C[i]??"",r=String(o),T=r.includes(",")||r.includes(`
`)||r.includes('"'),S=r.replace(/"/g,'""');return T?`"${S}"`:S}).join(","));return[re,...ge].join(`
`)},P=async()=>{await u(),f.value=!1},fe=async()=>{await u()},ae=async z=>{const J=d.value;try{k.value=!0,await t.createTableRow(J,z),c.success({title:"Record created",description:"Successfully created record"}),D.value=!1}catch(re){console.error("Failed to create record:",re),c.error({title:"Creation failed",description:re.message})}finally{k.value=!1}};return(z,J)=>{const re=Qe,ge=ta,C=Qa,i=Ja,o=qe,r=yi,T=ys,S=ft,B=ss;return s(),I("div",_i,[d.value?(s(),q(C,{key:0,title:`${d.value}`},{right:b(()=>[m(re,{color:"error",variant:"outline",icon:"i-tabler-trash",size:"sm",onClick:J[0]||(J[0]=H=>p.value=!0)}),m(ge,{items:te},{default:b(()=>[m(re,{variant:"outline",icon:"i-lucide-file-spreadsheet","trailing-icon":"i-lucide-chevron-down",size:"sm"},{default:b(()=>J[6]||(J[6]=[de(" Import/Export ")])),_:1,__:[6]})]),_:1}),m(re,{size:"sm",color:"primary",icon:"i-lucide-plus",onClick:J[1]||(J[1]=H=>D.value=!0)},{default:b(()=>J[7]||(J[7]=[de(" New Record ")])),_:1,__:[7]})]),_:1},8,["title"])):W("",!0),a("div",xi,[g.value?(s(),q(i,{key:0,"row-count":10,"column-count":5})):(s(),I("div",Ci,[l(t).tableData.length>0||l(t).tableColumns.length>0?(s(),q(r,{key:0,"table-data":l(t).tableData,columns:l(t).tableColumns,"is-loading":!1,"total-items":l(t).pagination.total,"pagination-from":l(t).pagination.from,"pagination-to":l(t).pagination.to,"table-name":d.value,onRefreshData:V,"onUpdate:pageSize":N,"onUpdate:page":Z,onOnDelete:fe},{empty:b(()=>[a("div",wi,[a("div",ki,[m(o,{name:"i-lucide-database",class:"w-12 h-12"})]),J[9]||(J[9]=a("h3",{class:"text-base font-semibold mb-1"},"No data available",-1)),J[10]||(J[10]=a("p",{class:"text-sm text-gray-500 mb-4"},"This table doesn't have any records yet.",-1)),m(re,{size:"sm",color:"primary",icon:"i-lucide-plus"},{default:b(()=>J[8]||(J[8]=[de(" Add First Record ")])),_:1,__:[8]})])]),_:1},8,["table-data","columns","total-items","pagination-from","pagination-to","table-name"])):W("",!0)]))]),m(T,{open:D.value,"onUpdate:open":J[2]||(J[2]=H=>D.value=H),"table-id":d.value,schema:l(t).tableColumns,onSubmit:ae},null,8,["open","table-id","schema"]),m(S,{open:p.value,"onUpdate:open":J[3]||(J[3]=H=>p.value=H),ModalIcon:"i-tabler-trash",ModalContent:`Are you sure you want to delete the table <b>'${d.value}'</b>? All data will be permanently deleted. This action cannot be undone.`,ModalConfirmText:"Yes, Delete Table",ModalCancelText:"Cancel","is-loading":x.value,onConfirm:O,onClose:J[4]||(J[4]=H=>p.value=!1),ModalIconClass:"text-red-500 size-15 color-red-500",ui:{content:"divide-y-0 p-5",footer:"flex justify-end space-x-2"},ModalConfirmColor:"error"},null,8,["open","ModalContent","is-loading"]),m(B,{open:f.value,"onUpdate:open":J[5]||(J[5]=H=>f.value=H),"table-name":d.value,"table-columns":l(t).tableColumns,onImported:P},null,8,["open","table-name","table-columns"])])}}});export{dr as default};
