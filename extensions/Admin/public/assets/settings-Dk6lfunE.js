import{_ as pe,b as re}from"./route-block-BD734aAn.js";import{_ as me}from"./Textarea-Byvyu8gK.js";import{_ as ge}from"./Card-kWGpn_Iq.js";import{d as se,a as ye,i as _,o as t,j as h,m as O,l as q,P as le,K as ce,q as he,a3 as be,f as D,a6 as Y,a7 as oe,B as n,F as G,ai as Q,X as z,k as m,z as U,al as te,am as ie,N as T,O as x,Z as u,p as K,at as _e,ak as ke,ah as ee,aM as xe,aN as we,r as B,E as Ce,aq as $e,A as Se,a1 as qe,aL as Ie,as as ae}from"./index-CRsdYi2H.js";import{i as je,d as ze,a as Ue,_ as Ae,b as Ne,c as Oe}from"./AccordionTrigger-CcfQpBEg.js";import{_ as ue}from"./Input-BHZUZoYe.js";import{_ as Ve}from"./DashboardNavbar.vue_vue_type_script_setup_true_lang-BjOyJKj1.js";import{u as Fe}from"./useToastNotification-BcotWXPZ.js";import{_ as Le}from"./Select-C57MTzpF.js";import{_ as Ee}from"./Switch-DxUzj61U.js";import"./DashboardResizeHandle.vue_vue_type_script_setup_true_lang-BBA6ihDY.js";import"./DashboardSidebarToggle.vue_vue_type_script_setup_true_lang-DsgFYwLG.js";import"./CollapsibleTrigger-DPh81dER.js";import"./isValueEqualOrExist-BBQ1z4Lv.js";import"./useDirection-k4nYEygm.js";import"./useArrowNavigation-B5rxJs06.js";import"./useFocusGuards-Du7C4AgP.js";import"./useFormControl-NdRzoGR7.js";import"./useBodyScrollLock-B9_nYFZW.js";import"./VisuallyHiddenInput-C3uj9iqK.js";import"./Label-PeVd4_oV.js";const Pe=se({__name:"AccordionHeader",props:{asChild:{type:Boolean},as:{default:"h3"}},setup(r){const k=r,a=je(),y=ze();return ye(),(f,g)=>(t(),_(q(le),{as:k.as,"as-child":k.asChild,"data-orientation":q(a).orientation,"data-state":q(y).dataState.value,"data-disabled":q(y).dataDisabled.value},{default:h(()=>[O(f.$slots,"default")]),_:3},8,["as","as-child","data-orientation","data-state","data-disabled"]))}}),Be={slots:{root:"w-full",item:"border-b border-default last:border-b-0",header:"flex",trigger:"group flex-1 flex items-center gap-1.5 font-medium text-sm py-3.5 focus-visible:outline-primary min-w-0",content:"data-[state=open]:animate-[accordion-down_200ms_ease-out] data-[state=closed]:animate-[accordion-up_200ms_ease-out] overflow-hidden focus:outline-none",body:"text-sm pb-3.5",leadingIcon:"shrink-0 size-5",trailingIcon:"shrink-0 size-5 ms-auto group-data-[state=open]:rotate-180 transition-transform duration-200",label:"text-start break-words"},variants:{disabled:{true:{trigger:"cursor-not-allowed opacity-75"}}}},De={__name:"Accordion",props:{as:{type:null,required:!1},items:{type:Array,required:!1},trailingIcon:{type:String,required:!1},labelKey:{type:String,required:!1,default:"label"},class:{type:null,required:!1},ui:{type:null,required:!1},collapsible:{type:Boolean,required:!1,default:!0},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1},type:{type:String,required:!1,default:"single"},disabled:{type:Boolean,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0}},emits:["update:modelValue"],setup(r,{emit:k}){const a=r,y=k,f=ce(),g=oe(),I=he(be(a,"as","collapsible","defaultValue","disabled","modelValue","type","unmountOnHide"),y),v=D(()=>{var c;return Y({extend:Y(Be),...((c=g.ui)==null?void 0:c.accordion)||{}})({disabled:a.disabled})});return(c,A)=>{var C;return t(),_(q(Oe),K(q(I),{class:v.value.root({class:[(C=a.ui)==null?void 0:C.root,a.class]})}),{default:h(()=>[(t(!0),n(G,null,Q(a.items,(l,p)=>{var j,M;return t(),_(q(Ue),{key:p,value:l.value||String(p),disabled:l.disabled,class:z(v.value.item({class:[(j=a.ui)==null?void 0:j.item,(M=l.ui)==null?void 0:M.item,l.class]}))},{default:h(({open:V})=>{var F,R,L,$;return[m(q(Pe),{as:"div",class:z(v.value.header({class:[(F=a.ui)==null?void 0:F.header,(R=l.ui)==null?void 0:R.header]}))},{default:h(()=>{var w,E;return[m(q(Ae),{class:z(v.value.trigger({class:[(w=a.ui)==null?void 0:w.trigger,(E=l.ui)==null?void 0:E.trigger],disabled:l.disabled}))},{default:h(()=>{var e,d;return[O(c.$slots,"leading",{item:l,index:p,open:V},()=>{var b,s;return[l.icon?(t(),_(te,{key:0,name:l.icon,class:z(v.value.leadingIcon({class:[(b=a.ui)==null?void 0:b.leadingIcon,(s=l==null?void 0:l.ui)==null?void 0:s.leadingIcon]}))},null,8,["name","class"])):U("",!0)]}),q(ie)(l,a.labelKey)||f.default?(t(),n("span",{key:0,class:z(v.value.label({class:[(e=a.ui)==null?void 0:e.label,(d=l.ui)==null?void 0:d.label]}))},[O(c.$slots,"default",{item:l,index:p,open:V},()=>[T(x(q(ie)(l,a.labelKey)),1)])],2)):U("",!0),O(c.$slots,"trailing",{item:l,index:p,open:V},()=>{var b,s;return[m(te,{name:l.trailingIcon||r.trailingIcon||q(g).ui.icons.chevronDown,class:z(v.value.trailingIcon({class:[(b=a.ui)==null?void 0:b.trailingIcon,(s=l.ui)==null?void 0:s.trailingIcon]}))},null,8,["name","class"])]})]}),_:2},1032,["class"])]}),_:2},1032,["class"]),l.content||f.content||l.slot&&f[l.slot]||f.body||l.slot&&f[`${l.slot}-body`]?(t(),_(q(Ne),{key:0,class:z(v.value.content({class:[(L=a.ui)==null?void 0:L.content,($=l.ui)==null?void 0:$.content]}))},{default:h(()=>[O(c.$slots,l.slot||"content",{item:l,index:p,open:V},()=>{var w,E;return[u("div",{class:z(v.value.body({class:[(w=a.ui)==null?void 0:w.body,(E=l.ui)==null?void 0:E.body]}))},[O(c.$slots,l.slot?`${l.slot}-body`:"body",{item:l,index:p,open:V},()=>[T(x(l.content),1)])],2)]})]),_:2},1032,["class"])):U("",!0)]}),_:2},1032,["value","disabled","class"])}),128))]),_:3},16,["class"])}}},Me={slots:{root:"relative overflow-hidden w-full rounded-lg p-4 flex gap-2.5",wrapper:"min-w-0 flex-1 flex flex-col",title:"text-sm font-medium",description:"text-sm opacity-90",icon:"shrink-0 size-5",avatar:"shrink-0",avatarSize:"2xl",actions:"flex flex-wrap gap-1.5 shrink-0",close:"p-0"},variants:{color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},variant:{solid:"",outline:"",soft:"",subtle:""},orientation:{horizontal:{root:"items-center",actions:"items-center"},vertical:{root:"items-start",actions:"items-start mt-2.5"}},title:{true:{description:"mt-1"}}},compoundVariants:[{color:"primary",variant:"solid",class:{root:"bg-primary text-inverted"}},{color:"secondary",variant:"solid",class:{root:"bg-secondary text-inverted"}},{color:"success",variant:"solid",class:{root:"bg-success text-inverted"}},{color:"info",variant:"solid",class:{root:"bg-info text-inverted"}},{color:"warning",variant:"solid",class:{root:"bg-warning text-inverted"}},{color:"error",variant:"solid",class:{root:"bg-error text-inverted"}},{color:"primary",variant:"outline",class:{root:"text-primary ring ring-inset ring-primary/25"}},{color:"secondary",variant:"outline",class:{root:"text-secondary ring ring-inset ring-secondary/25"}},{color:"success",variant:"outline",class:{root:"text-success ring ring-inset ring-success/25"}},{color:"info",variant:"outline",class:{root:"text-info ring ring-inset ring-info/25"}},{color:"warning",variant:"outline",class:{root:"text-warning ring ring-inset ring-warning/25"}},{color:"error",variant:"outline",class:{root:"text-error ring ring-inset ring-error/25"}},{color:"primary",variant:"soft",class:{root:"bg-primary/10 text-primary"}},{color:"secondary",variant:"soft",class:{root:"bg-secondary/10 text-secondary"}},{color:"success",variant:"soft",class:{root:"bg-success/10 text-success"}},{color:"info",variant:"soft",class:{root:"bg-info/10 text-info"}},{color:"warning",variant:"soft",class:{root:"bg-warning/10 text-warning"}},{color:"error",variant:"soft",class:{root:"bg-error/10 text-error"}},{color:"primary",variant:"subtle",class:{root:"bg-primary/10 text-primary ring ring-inset ring-primary/25"}},{color:"secondary",variant:"subtle",class:{root:"bg-secondary/10 text-secondary ring ring-inset ring-secondary/25"}},{color:"success",variant:"subtle",class:{root:"bg-success/10 text-success ring ring-inset ring-success/25"}},{color:"info",variant:"subtle",class:{root:"bg-info/10 text-info ring ring-inset ring-info/25"}},{color:"warning",variant:"subtle",class:{root:"bg-warning/10 text-warning ring ring-inset ring-warning/25"}},{color:"error",variant:"subtle",class:{root:"bg-error/10 text-error ring ring-inset ring-error/25"}},{color:"neutral",variant:"solid",class:{root:"text-inverted bg-inverted"}},{color:"neutral",variant:"outline",class:{root:"text-highlighted bg-default ring ring-inset ring-default"}},{color:"neutral",variant:"soft",class:{root:"text-highlighted bg-elevated/50"}},{color:"neutral",variant:"subtle",class:{root:"text-highlighted bg-elevated/50 ring ring-inset ring-accented"}}],defaultVariants:{color:"primary",variant:"solid"}},Je={__name:"Alert",props:{as:{type:null,required:!1},title:{type:String,required:!1},description:{type:String,required:!1},icon:{type:String,required:!1},avatar:{type:Object,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},orientation:{type:null,required:!1,default:"vertical"},actions:{type:Array,required:!1},close:{type:[Boolean,Object],required:!1},closeIcon:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},emits:["update:open"],setup(r,{emit:k}){const a=r,y=k,f=ce(),{t:g}=_e(),I=oe(),v=D(()=>{var c;return Y({extend:Y(Me),...((c=I.ui)==null?void 0:c.alert)||{}})({color:a.color,variant:a.variant,orientation:a.orientation,title:!!a.title||!!f.title})});return(c,A)=>{var C;return t(),_(q(le),{as:r.as,"data-orientation":r.orientation,class:z(v.value.root({class:[(C=a.ui)==null?void 0:C.root,a.class]}))},{default:h(()=>{var l,p,j,M,V,F,R,L;return[O(c.$slots,"leading",{},()=>{var $,w,E;return[r.avatar?(t(),_(ke,K({key:0,size:(($=a.ui)==null?void 0:$.avatarSize)||v.value.avatarSize()},r.avatar,{class:v.value.avatar({class:(w=a.ui)==null?void 0:w.avatar})}),null,16,["size","class"])):r.icon?(t(),_(te,{key:1,name:r.icon,class:z(v.value.icon({class:(E=a.ui)==null?void 0:E.icon}))},null,8,["name","class"])):U("",!0)]}),u("div",{class:z(v.value.wrapper({class:(l=a.ui)==null?void 0:l.wrapper}))},[r.title||f.title?(t(),n("div",{key:0,class:z(v.value.title({class:(p=a.ui)==null?void 0:p.title}))},[O(c.$slots,"title",{},()=>[T(x(r.title),1)])],2)):U("",!0),r.description||f.description?(t(),n("div",{key:1,class:z(v.value.description({class:(j=a.ui)==null?void 0:j.description}))},[O(c.$slots,"description",{},()=>[T(x(r.description),1)])],2)):U("",!0),r.orientation==="vertical"&&((M=r.actions)!=null&&M.length||f.actions)?(t(),n("div",{key:2,class:z(v.value.actions({class:(V=a.ui)==null?void 0:V.actions}))},[O(c.$slots,"actions",{},()=>[(t(!0),n(G,null,Q(r.actions,($,w)=>(t(),_(ee,K({key:w,size:"xs"},{ref_for:!0},$),null,16))),128))])],2)):U("",!0)],2),r.orientation==="horizontal"&&((F=r.actions)!=null&&F.length||f.actions)||r.close?(t(),n("div",{key:0,class:z(v.value.actions({class:(R=a.ui)==null?void 0:R.actions,orientation:"horizontal"}))},[r.orientation==="horizontal"&&((L=r.actions)!=null&&L.length||f.actions)?O(c.$slots,"actions",{key:0},()=>[(t(!0),n(G,null,Q(r.actions,($,w)=>(t(),_(ee,K({key:w,size:"xs"},{ref_for:!0},$),null,16))),128))]):U("",!0),O(c.$slots,"close",{ui:v.value},()=>{var $;return[r.close?(t(),_(ee,K({key:0,icon:r.closeIcon||q(I).ui.icons.close,color:"neutral",variant:"link","aria-label":q(g)("alert.close")},typeof r.close=="object"?r.close:{},{class:v.value.close({class:($=a.ui)==null?void 0:$.close}),onClick:A[0]||(A[0]=w=>y("update:open",!1))}),null,16,["icon","aria-label","class"])):U("",!0)]})],2)):U("",!0)]}),_:3},8,["as","data-orientation","class"])}}},Re={base:"relative",variants:{size:{xs:"",sm:"",md:"",lg:"",xl:""},orientation:{horizontal:"inline-flex -space-x-px",vertical:"flex flex-col -space-y-px"}}},Te={__name:"ButtonGroup",props:{as:{type:null,required:!1},size:{type:null,required:!1},orientation:{type:null,required:!1,default:"horizontal"},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(r){const k=r,a=oe(),y=D(()=>{var f;return Y({extend:Y(Re),...((f=a.ui)==null?void 0:f.buttonGroup)||{}})});return xe(we,D(()=>({orientation:k.orientation,size:k.size}))),(f,g)=>(t(),_(q(le),{as:r.as,class:z(y.value({orientation:r.orientation,class:k.class}))},{default:h(()=>[O(f.$slots,"default")]),_:3},8,["as","class"]))}},Qe={class:"space-y-2"},Ge={key:0,class:"space-y-4"},He={class:"flex items-center justify-between"},We={class:"flex items-center space-x-2"},Xe={key:0,class:"pl-4 border-l-2 border-primary-500 dark:border-primary-400 space-y-3"},Ye={key:1,class:"space-y-1"},Ze={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Ke={key:2,class:"space-y-1"},et={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},tt={class:"relative"},at={key:3,class:"space-y-1"},st={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},lt={key:4,class:"space-y-1"},ot={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},nt={key:5,class:"flex items-center space-x-2"},rt={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},it={key:6,class:"space-y-1"},ct={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},ut={key:7,class:"space-y-2"},dt={class:"flex items-center justify-between"},vt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},ft={key:0,class:"space-y-2 pl-4 border-l-2 border-gray-200 dark:border-gray-700"},pt={key:0,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},mt={class:"flex items-center justify-between mb-3"},gt={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},yt={key:1,class:"flex items-center space-x-2"},ht={key:1,class:"text-sm text-gray-500 dark:text-gray-400 italic pl-4"},bt={key:8,class:"space-y-2"},_t={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},kt={class:"pl-4 border-l-2 border-gray-200 dark:border-gray-700 space-y-3"},xt={key:9,class:"space-y-1"},wt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Ct=se({__name:"ConfigFormField",props:{name:{},value:{},path:{}},emits:["update"],setup(r,{emit:k}){const a=r,y=k,f={engine:[{label:"MySQL",value:"mysql"},{label:"PostgreSQL",value:"pgsql"},{label:"SQLite",value:"sqlite"}],driver:[{label:"MySQL",value:"mysql"},{label:"PostgreSQL",value:"pgsql"},{label:"SQLite",value:"sqlite"}],role:[{label:"Primary",value:"primary"},{label:"Secondary",value:"secondary"},{label:"Backup",value:"backup"}],cache_driver:[{label:"File",value:"file"},{label:"Redis",value:"redis"},{label:"Memcached",value:"memcached"},{label:"Array",value:"array"}],session_driver:[{label:"File",value:"file"},{label:"Cookie",value:"cookie"},{label:"Database",value:"database"},{label:"Redis",value:"redis"}],log_level:[{label:"Debug",value:"debug"},{label:"Info",value:"info"},{label:"Warning",value:"warning"},{label:"Error",value:"error"},{label:"Critical",value:"critical"}],environment:[{label:"Development",value:"development"},{label:"Staging",value:"staging"},{label:"Production",value:"production"}],env:[{label:"Development",value:"development"},{label:"Staging",value:"staging"},{label:"Production",value:"production"}]},g=D(()=>{const e=a.name.toLowerCase();return f[e]!==void 0&&a.value!==null&&typeof a.value=="string"}),I=D(()=>{const e=a.name.toLowerCase();return f[e]||[]}),v=D(()=>{const e=a.name.toLowerCase();return e.includes("password")||e.includes("secret")||e.includes("key")||e.includes("token")}),c=D(()=>a.path.length===2&&a.path[0]==="mail"&&a.name==="smtp"),A=B(!1),C=B(!1);Ce(()=>a.value,e=>{c.value&&typeof e=="object"&&e!==null&&(A.value=Object.keys(e).length>0&&e.host!=="")},{immediate:!0});const l=D(()=>{const e=a.value;return e==null?"null":typeof e=="boolean"?"boolean":typeof e=="number"?"number":typeof e=="string"?"string":Array.isArray(e)?"array":typeof e=="object"?"object":"unknown"}),p=D(()=>a.name.replace(/_/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "));function j(e){y("update",a.path,e)}function M(e){const d=e.target;j(d.value)}function V(e){const d=e.target,b=parseFloat(d.value);j(isNaN(b)?0:b)}function F(e,d){const b=[...a.value];b[e]=d,j(b)}function R(e,d){const b=[...e],s=parseInt(b[b.length-2]),o=b[b.length-1],i=[...a.value];typeof i[s]=="object"&&i[s]!==null&&(i[s]={...i[s],[o]:d},j(i))}function L(){const e=[...a.value||[]];e.length>0&&typeof e[0]=="object"&&e[0]!==null?a.name==="jobs"?e.push({name:"",schedule:"",handler_class:"",parameters:[],description:"",enabled:!0,persistence:!1,timeout:300,retry_attempts:3}):e.push({}):e.push(""),j(e)}function $(e){const d=[...a.value];d.splice(e,1),j(d)}function w(e,d){y("update",e,d)}function E(e){A.value=e}return(e,d)=>{const b=Ee,s=$e("ConfigFormField",!0),o=Le,i=ue,P=ee;return t(),n("div",Qe,[c.value?(t(),n("div",Ge,[u("div",He,[u("div",We,[m(b,{modelValue:A.value,"onUpdate:modelValue":[d[0]||(d[0]=N=>A.value=N),E]},null,8,["modelValue"]),d[2]||(d[2]=u("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Enable SMTP ",-1))]),d[3]||(d[3]=u("div",{class:"text-sm text-gray-500 dark:text-gray-400"}," Configure email delivery via SMTP server ",-1))]),A.value?(t(),n("div",Xe,[(t(!0),n(G,null,Q(e.value,(N,S)=>(t(),_(s,{key:S,name:String(S),value:N,path:[...e.path,String(S)],onUpdate:w},null,8,["name","value","path"]))),128))])):U("",!0)])):U("",!0),l.value==="string"&&g.value?(t(),n("div",Ye,[u("label",Ze,x(p.value),1),m(o,{"model-value":e.value,"onUpdate:modelValue":j,items:I.value,placeholder:`Select ${p.value.toLowerCase()}`,class:"w-full"},null,8,["model-value","items","placeholder"])])):l.value==="string"&&v.value?(t(),n("div",Ke,[u("label",et,x(p.value),1),u("div",tt,[m(i,{type:C.value?"text":"password",value:e.value,onInput:M,placeholder:`Enter ${p.value.toLowerCase()}`,class:"w-full pr-10"},null,8,["type","value","placeholder"]),m(P,{variant:"ghost",size:"sm",icon:C.value?"i-heroicons-eye-slash":"i-heroicons-eye",onClick:d[1]||(d[1]=N=>C.value=!C.value),class:"absolute right-0 top-0 h-full"},null,8,["icon"])])])):l.value==="string"?(t(),n("div",at,[u("label",st,x(p.value),1),m(i,{value:e.value,onInput:M,placeholder:`Enter ${p.value.toLowerCase()}`,class:"w-full"},null,8,["value","placeholder"])])):l.value==="number"?(t(),n("div",lt,[u("label",ot,x(p.value),1),m(i,{type:"number",value:e.value,onInput:V,placeholder:`Enter ${p.value.toLowerCase()}`,class:"w-full"},null,8,["value","placeholder"])])):l.value==="boolean"?(t(),n("div",nt,[m(b,{"model-value":e.value,"onUpdate:modelValue":j},null,8,["model-value"]),u("label",rt,x(p.value),1)])):l.value==="null"?(t(),n("div",it,[u("label",ct,x(p.value),1),m(i,{value:"",onInput:M,placeholder:`Enter ${p.value.toLowerCase()} (currently null)`},null,8,["placeholder"])])):l.value==="array"?(t(),n("div",ut,[u("div",dt,[u("label",vt,x(p.value),1),m(P,{size:"md",variant:"ghost",icon:"i-heroicons-plus",onClick:L},{default:h(()=>d[4]||(d[4]=[T(" Add Item ")])),_:1,__:[4]})]),e.value&&e.value.length>0?(t(),n("div",ft,[(t(!0),n(G,null,Q(e.value,(N,S)=>(t(),n("div",{key:S,class:"space-y-2"},[typeof N=="object"&&N!==null?(t(),n("div",pt,[u("div",mt,[u("h4",gt," Item "+x(S+1),1),m(P,{size:"sm",variant:"ghost",color:"error",icon:"i-heroicons-trash",onClick:H=>$(S)},null,8,["onClick"])]),(t(!0),n(G,null,Q(N,(H,Z)=>(t(),_(s,{key:Z,name:String(Z),value:H,path:[...e.path,String(S),String(Z)],onUpdate:R},null,8,["name","value","path"]))),128))])):(t(),n("div",yt,[m(i,{value:N,onInput:H=>F(S,H.target.value),placeholder:`Item ${S+1}`,class:"flex-1"},null,8,["value","onInput","placeholder"]),m(P,{size:"sm",variant:"ghost",color:"error",icon:"i-heroicons-trash",onClick:H=>$(S)},null,8,["onClick"])]))]))),128))])):(t(),n("div",ht," No items in array "))])):l.value==="object"&&!c.value?(t(),n("div",bt,[u("label",_t,x(p.value),1),u("div",kt,[(t(!0),n(G,null,Q(e.value,(N,S)=>(t(),_(s,{key:S,name:String(S),value:N,path:[...e.path,String(S)],onUpdate:w},null,8,["name","value","path"]))),128))])])):c.value?U("",!0):(t(),n("div",xt,[u("label",wt,x(p.value)+" ("+x(l.value)+") ",1),d[5]||(d[5]=u("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Unsupported field type",-1))]))])}}}),$t={class:"flex h-full"},St={class:"w-64 border-r border-gray-200 dark:border-gray-700"},qt={class:"p-4"},It={class:"space-y-4"},jt={class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3"},zt={class:"space-y-3"},Ut={class:"flex-1 p-6 overflow-y-auto"},At={key:0,class:"flex items-center justify-center h-full"},Nt={key:1,class:"flex items-center justify-center h-full"},Ot={key:2,class:"max-w-4xl mx-auto"},Vt={key:0,class:"space-y-6"},Ft={class:"text-lg font-semibold"},Lt={class:"space-y-4"},Et={class:"py-3"},Pt={key:1},Bt={class:"text-lg font-semibold"},Dt={key:3,class:"flex items-center justify-center h-full text-gray-500"},Mt=se({__name:"settings",setup(r){const k=B(!1),a=B(!1),y=B(null),f=B([]),g=B(null),I=B(null),v=B(""),c=B(!1),A=B(""),C=B("form"),l=Fe(),p={app:"i-heroicons-cog-6-tooth",database:"i-heroicons-circle-stack",services:"i-heroicons-server-stack",security:"i-heroicons-shield-check",lockdown:"i-heroicons-lock-closed",session:"i-heroicons-key",cache:"i-heroicons-archive-box",schedule:"i-heroicons-clock",default:"i-heroicons-document-text"},j=s=>{const o=s.toLowerCase().replace(".php","");return p[o]||p.default},M=D(()=>{if(!A.value)return f.value;const s=A.value.toLowerCase();return f.value.filter(o=>o.name.toLowerCase().includes(s))}),V=D(()=>{const s={Core:[],Security:[],Extensions:[],Other:[]};return M.value.forEach(o=>{const i=o.name.toLowerCase();i==="app"||i==="database"||i==="services"?s.Core.push(o):i==="security"||i==="lockdown"||i==="session"?s.Security.push(o):i.includes("extension")||o.path.includes("extension")?s.Extensions.push(o):s.Other.push(o)}),Object.entries(s).filter(([,o])=>o.length>0)}),F=s=>s.replace(".php","").split(/[-_]/).map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ");async function R(){k.value=!0,y.value=null;try{const s=await ae.configs.getAllConfigs();s.success&&(f.value=s.data||[],f.value.length>0&&!g.value&&await L(f.value[0].name))}catch(s){const o=s;y.value=o.message||"Failed to fetch configuration files",l.error({title:"Error",description:y.value})}finally{k.value=!1}}async function L(s){if(!(c.value&&!await e())){k.value=!0,y.value=null,g.value=s;try{const o=await ae.configs.getConfig(s);o.success&&(I.value=o.data.content,v.value=JSON.stringify(o.data.content,null,2),c.value=!1)}catch(o){const i=o;y.value=i.message||"Failed to load configuration",l.error({title:"Error",description:y.value})}finally{k.value=!1}}}async function $(){if(!(!g.value||!c.value)){a.value=!0,y.value=null;try{let s;if(C.value==="json")try{s=JSON.parse(v.value)}catch{throw new Error("Invalid JSON format")}else s=I.value;(await ae.configs.updateConfig(g.value,s)).success&&(c.value=!1,l.success({title:"Success",description:"Configuration saved successfully"}),await L(g.value))}catch(s){const o=s;y.value=o.message||"Failed to save configuration",l.error({title:"Error",description:y.value})}finally{a.value=!1}}}function w(s,o){if(!I.value)return;let i=I.value;for(let P=0;P<s.length-1;P++)i[s[P]]||(i[s[P]]={}),i=i[s[P]];i[s[s.length-1]]=o,v.value=JSON.stringify(I.value,null,2),c.value=!0}function E(s){v.value=s,c.value=!0;try{I.value=JSON.parse(s)}catch{}}async function e(){return new Promise(s=>{const o=confirm("You have unsaved changes. Do you want to discard them?");s(o)})}function d(){g.value&&L(g.value)}async function b(){await R(),l.success({title:"Refreshed",description:"Configuration files reloaded"})}return Se(()=>{R()}),qe(async()=>{c.value&&await e()}),(s,o)=>{const i=ee,P=Te,N=Ve,S=ue,H=te,Z=Je,de=De,ne=ge,ve=me,fe=pe;return t(),_(fe,{id:"settings"},{header:h(()=>[m(N,{title:"Settings"},{right:h(()=>[g.value&&c.value?(t(),_(i,{key:0,color:"primary",icon:"i-heroicons-check",loading:a.value,onClick:$,size:"sm"},{default:h(()=>o[3]||(o[3]=[T(" Save Changes ")])),_:1,__:[3]},8,["loading"])):U("",!0),g.value&&c.value?(t(),_(i,{key:1,variant:"ghost",icon:"i-heroicons-arrow-uturn-left",onClick:d,size:"sm"},{default:h(()=>o[4]||(o[4]=[T(" Reset ")])),_:1,__:[4]})):U("",!0),g.value?(t(),_(P,{key:2,size:"sm"},{default:h(()=>[m(i,{variant:C.value==="form"?"solid":"ghost",onClick:o[0]||(o[0]=J=>C.value="form")},{default:h(()=>o[5]||(o[5]=[T(" Form ")])),_:1,__:[5]},8,["variant"]),m(i,{variant:C.value==="json"?"solid":"ghost",onClick:o[1]||(o[1]=J=>C.value="json")},{default:h(()=>o[6]||(o[6]=[T(" JSON ")])),_:1,__:[6]},8,["variant"])]),_:1})):U("",!0),m(i,{variant:"ghost",icon:"i-heroicons-arrow-path",loading:k.value,onClick:b,size:"sm"},null,8,["loading"])]),_:1})]),body:h(()=>[u("div",$t,[u("div",St,[u("div",qt,[m(S,{modelValue:A.value,"onUpdate:modelValue":o[2]||(o[2]=J=>A.value=J),placeholder:"Search configurations...",icon:"i-heroicons-magnifying-glass",class:"mb-4"},null,8,["modelValue"]),u("div",It,[(t(!0),n(G,null,Q(V.value,([J,W])=>(t(),n("div",{key:J},[u("h3",jt,x(J),1),u("div",zt,[(t(!0),n(G,null,Q(W,X=>(t(),_(i,{key:X.name,onClick:Jt=>L(X.name),variant:g.value===X.name?"solid":"ghost",color:g.value===X.name?"primary":"neutral",icon:j(X.name),size:"sm",block:"",class:"justify-start"},{default:h(()=>[T(x(F(X.name)),1)]),_:2},1032,["onClick","variant","color","icon"]))),128))])]))),128))])])]),u("div",Ut,[k.value?(t(),n("div",At,[m(H,{name:"i-heroicons-arrow-path",class:"animate-spin h-8 w-8 text-gray-400"})])):y.value?(t(),n("div",Nt,[m(Z,{icon:"i-heroicons-exclamation-triangle",color:"error",variant:"subtle",title:y.value},null,8,["title"])])):g.value&&I.value?(t(),n("div",Ot,[C.value==="form"?(t(),n("div",Vt,[m(ne,null,{header:h(()=>[u("h3",Ft,x(F(g.value))+" Configuration ",1)]),default:h(()=>[u("div",Lt,[m(de,{items:Object.entries(I.value||{}).map(([J,W])=>({label:F(J),defaultOpen:!0,slot:J}))},Ie({_:2},[Q(I.value,(J,W)=>({name:W,fn:h(()=>[u("div",Et,[m(Ct,{name:String(W),value:J,path:[String(W)],onUpdate:w},null,8,["name","value","path"])])])}))]),1032,["items"])])]),_:1})])):(t(),n("div",Pt,[m(ne,null,{header:h(()=>[u("h3",Bt,x(F(g.value))+" Configuration (JSON) ",1)]),default:h(()=>[u("div",null,[m(ve,{"model-value":v.value,"onUpdate:modelValue":E,placeholder:"Configuration JSON...",class:"font-mono text-sm w-full",rows:25},null,8,["model-value"])])]),_:1})]))])):(t(),n("div",Dt," Select a configuration file from the sidebar to edit "))])])]),_:1})}}});typeof re=="function"&&re(Mt);export{Mt as default};
